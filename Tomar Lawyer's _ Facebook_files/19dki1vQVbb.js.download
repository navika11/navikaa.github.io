if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("LSLocalizedStrings",["fbt"],(function(a,b,c,d,e,f,g){a=function(a,b){switch(a){default:return""}};e.exports=a}),null);
__d("LSLocalizedStringsV2",["fbt","bs_caml_int64"],(function(a,b,c,d,e,f,g){a=function(a,c){switch(a){case"2285622730":return g._(/*FBT_CALL*/"Messenger is offline"/*FBT_CALL*/);case"1919524925":return g._(/*FBT_CALL*/"Please check your connection. Anything you do in chats while offline, such as send messages or change chat colours, will be completed when you connect to the Internet."/*FBT_CALL*/);case"14617150":return g._(/*FBT_CALL*/"Facebook user"/*FBT_CALL*/);case"4002265907":return g._(/*FBT_CALL*/"You replied to yourself"/*FBT_CALL*/);case"2663996736":return g._(/*FBT_CALL*/"You replied to {participant_name}"/*FBT_CALL*/,[g._param("participant_name",c(0))]);case"2868699317":return g._(/*FBT_CALL*/"{sender_name} replied to you"/*FBT_CALL*/,[g._param("sender_name",c(0))]);case"2688620547":return g._(/*FBT_CALL*/"{sender_name} replied to themselves"/*FBT_CALL*/,[g._param("sender_name",c(0))]);case"3544071775":return g._(/*FBT_CALL*/"{sender_name} replied to {reply_source_sender_name}"/*FBT_CALL*/,[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"2375715979":return g._(/*FBT_CALL*/"You unsent a message."/*FBT_CALL*/);case"3810165735":return g._(/*FBT_CALL*/"{user_name} unsent a message."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"1890485478":return g._(/*FBT_CALL*/"You"/*FBT_CALL*/);case"1299547062":return g._(/*FBT_CALL*/"You sent a sticker."/*FBT_CALL*/);case"3621454483":return g._(/*FBT_CALL*/"{user_name} sent a sticker."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3948960063":return g._(/*FBT_CALL*/"You sent an attachment."/*FBT_CALL*/);case"1249692047":return g._(/*FBT_CALL*/"{user_name} sent an attachment."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2106510577":return g._(/*FBT_CALL*/"You sent a photo."/*FBT_CALL*/);case"3960370133":return g._(/*FBT_CALL*/"{user_name} sent a photo."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3798396796":return g._(/*FBT_CALL*/"You sent a GIF from {app_name}."/*FBT_CALL*/,[g._param("app_name",c(0))]);case"3388601579":return g._(/*FBT_CALL*/"{user_name} sent a GIF from {app_name}."/*FBT_CALL*/,[g._param("user_name",c(0)),g._param("app_name",c(1))]);case"1556712457":return g._(/*FBT_CALL*/"You sent a GIF."/*FBT_CALL*/);case"3601791933":return g._(/*FBT_CALL*/"{user_name} sent a GIF."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3759817031":return g._(/*FBT_CALL*/"You sent a video."/*FBT_CALL*/);case"2934729541":return g._(/*FBT_CALL*/"{user_name} sent a video."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"392493418":return g._(/*FBT_CALL*/"You sent a voice message."/*FBT_CALL*/);case"4085467454":return g._(/*FBT_CALL*/"{user_name} sent a voice message."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2738683656":return g._(/*FBT_CALL*/"You sent a selfie sticker."/*FBT_CALL*/);case"2996525642":return g._(/*FBT_CALL*/"{user_name} sent a selfie sticker."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2326868239":return g._(/*FBT_CALL*/"You shared a post."/*FBT_CALL*/);case"1001986796":return g._(/*FBT_CALL*/"{user_name} shared a post."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2285746939":return g._(/*FBT_CALL*/"You replied to a story."/*FBT_CALL*/);case"3759448420":return g._(/*FBT_CALL*/"{user_name} replied to a story."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3719716921":return g._(/*FBT_CALL*/"You sent a story."/*FBT_CALL*/);case"284944921":return g._(/*FBT_CALL*/"{user_name} sent a story."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3557790945":return g._(/*FBT_CALL*/"You sent a reel."/*FBT_CALL*/);case"3756846086":return g._(/*FBT_CALL*/"{user_name} sent a reel."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2716405471":return g._(/*FBT_CALL*/"You sent a profile."/*FBT_CALL*/);case"3909474073":return g._(/*FBT_CALL*/"{user_name} sent a profile."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"780378803":return g._(/*FBT_CALL*/"You sent an IGTV video."/*FBT_CALL*/);case"3918212613":return g._(/*FBT_CALL*/"{user_name} sent an IGTV video."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2135145355":return g._(/*FBT_CALL*/"You sent a live location."/*FBT_CALL*/);case"3603511704":return g._(/*FBT_CALL*/"{user_name} sent a live location."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"705614308":return g._(/*FBT_CALL*/{"*":"You sent {number} photos.","_1":"You sent a photo."}/*FBT_CALL*/,[g._plural(b("bs_caml_int64").to_float(c(0)),"number")]);case"313217698":return g._(/*FBT_CALL*/{"*":"{user_name} sent {number} photos.","_1":"{user_name} sent a photo."}/*FBT_CALL*/,[g._plural(b("bs_caml_int64").to_float(c(1)),"number"),g._param("user_name",c(0))]);case"3558654267":return g._(/*FBT_CALL*/"You sent multiple attachments."/*FBT_CALL*/);case"3422266740":return g._(/*FBT_CALL*/"{user_name} sent multiple attachments."/*FBT_CALL*/,[g._param("user_name",c(0))]);default:return""}};e.exports=a}),null);
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0}],[{name:"contacts",id:7,primary_key:["id"]},{name:"ig_contact_info",id:176,primary_key:["contactId"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"]},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:["lastActivityTimestampMs","threadKey"],parentThreadKeyLastActivityTimestampMs:["parentThreadKey","lastActivityTimestampMs","threadKey"],clientThreadKey:["clientThreadKey","threadKey"],threadTypeLastActivityTimestampMs:["threadType","lastActivityTimestampMs","threadKey"]}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:["offlineThreadingId"],messageDisplayOrder:["threadKey","primarySortKey","secondarySortKey","messageId"]}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:["threadKey","readWatermarkTimestampMs","contactId"],threadKeyDeliveredWatermarkTimestampMs:["threadKey","deliveredWatermarkTimestampMs","contactId"]}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:["threadKey","timestampMs","messageId","attachmentFbid"]}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","attachmentIndex"]}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","ctaId"]}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:["ctaId"]}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:["threadKey","ctaId"]}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v2__generated",id:159,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName"]},{name:"community_folders",id:162,primary_key:["folderId"]},{name:"community_members",id:170,primary_key:["communityId","contactId","source"],indexes:{communityContactId:["communityId","contactId"],communitySource:["communityId","source"]}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"]},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:["threadKey","inviterId","inviteeId"]}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:["optimisticClientToken"]}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:["pinnedTimestamp","threadKey"]}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"]},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"]},{name:"community_events",id:202,primary_key:["eventId","communityId"]}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:["stickerPackId","stickerId"]}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:["threadKey"]}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:["scoreType","contactId"]}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:["ownerId","bucketType"]}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:["optimisticClientId"]}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:["optimisticClientToken"]}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:["roomId","participantId"]}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:["serverThreadKey"],chat_id:["clientThreadPk"],jid:["jid"]}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"]},{name:"data_trace_addon",id:154,primary_key:["addonId"],auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]}],[{name:"presence_states",id:186,primary_key:["contactId"]}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:["pendingBackupTaskId"]},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:["backupId","epochId"]}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:["deviceId","supportedVersion"]}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]}]]}),null);
__d("LSGetViewerFBID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(a){return b.seq([function(a){return b.db.table(4).fetch([[[[0,1]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=[-1,4294967295]:(b=a.item,c[0]=b.facebookUserId)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSIssueNewTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(2).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:b.i64.of_float(Date.now()),httpUrlOverride:a[3],timeoutTimestampMs:a[4],pluginType:a[5],priority:a[6],syncGroupId:a[7],minTimeToSyncTimestampMs:a[9]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSIssueMessagesRangeQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.islc(c.ftr(c.db.table(13).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.eq(b.minTimestampMs,f)||c.i64.le(b.minTimestampMs,a[1]))}),0,c.i64.to_float([0,1])).next().then(function(e,g){var h=e.done;e=e.value;return h?0:(g=e.item,d[3]=g.threadKey,d[4]=[0,0],d[1]=g.minTimestampMs,d[2]=g.minMessageId,c.i64.eq(a[2],[0,0])?d[0]=g.hasMoreBefore&&!g.isLoadingBefore:d[0]=g.hasMoreAfter&&!g.isLoadingAfter,d[0]?c.seq([function(b){return c.i64.eq(a[2],[0,0])?c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch(),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})})},function(a){return a=[d[1],d[2]],d[5]=a[0],d[6]=a[1],a}]):c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch(),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})})},function(a){return a=[g.maxTimestampMs,g.maxMessageId],d[5]=a[0],d[6]=a[1],a}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[7]=[0,1]:(e=b.item,d[13]=e.syncGroup,c.i64.neq(d[13],f)?d[12]=d[13]:d[12]=[0,1],d[7]=d[12])})},function(e){return d[9]=new c.Map(),d[9].set("thread_key",a[0]),d[9].set("direction",a[2]),d[9].set("reference_timestamp_ms",d[5]),d[9].set("reference_message_id",d[6]),d[9].set("sync_group",d[7]),d[10]=d[9].get("thread_key"),d[9],d[11]=c.toJSON(d[9]),c.sp(b("LSIssueNewTask"),"mrq.{}".split("{}").join(c.i64.to_string(d[10])),[0,228],d[11],f,f,[0,0],[0,0],f,f,[0,0])}]):c.resolve())})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExists",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return[[0,7],[0,8],[0,13],[0,10],[0,11],[0,16]].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(f=[!0,!0,!1],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,d[10]=e.authorityLevel,e.folderName==="other"?(f=[!0,!1,!1],d[7]=f[0],d[8]=f[1],d[9]=f[2],f):(c.i64.ge(d[10],a[4])||c.i64.eq(d[10],[0,20])&&(c.i64.eq(a[1],[0,2])||[[0,23],[0,21],[0,18]].some(function(b){return c.i64.eq(a[1],b)}))?(b=[!1,!1,!1],d[11]=b[0],d[12]=b[1],d[13]=b[2],b):(e=[!0,!1,!0],d[11]=e[0],d[12]=e[1],d[13]=e[2],e),f=[d[11],d[12],d[13]],d[7]=f[0],d[8]=f[1],d[9]=f[2],f),b=[d[7],d[8],d[9]],d[3]=b[0],d[4]=b[1],d[5]=b[2],b)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",!1),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",[0,1]),d[3].set("metadata_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),[0,209],d[5],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(e){return d[1]?c.seq([function(b){return d[3]=[64,1083495711],d[4]=[0,0],c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:[0,0],threadType:a[1],folderName:a[2],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[-1,4294967295],ongoingCallState:[0,0],parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3],capabilities2:d[4],unsendLimitMs:[-1,4294967295]})},function(e){return c.i64.eq(a[1],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[5]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],d[5]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[5])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[5],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.fe(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExists",["LSVerifyThreadExists"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExists"),a[0],a[1]==null?[0,1]:a[1],"inbox",[0,0],[0,40])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("MWChatMarkAllAsSeenMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="2781738478526229"}),null);
__d("MWChatMarkAllAsSeenMutation.graphql",["MWChatMarkAllAsSeenMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ViewerMessagesMarkAllSeenResponsePayload",kind:"LinkedField",name:"viewer_messages_mark_all_seen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatMarkAllAsSeenMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatMarkAllAsSeenMutation",selections:c},params:{id:b("MWChatMarkAllAsSeenMutation_facebookRelayOperation"),metadata:{},name:"MWChatMarkAllAsSeenMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometBlueBridgeContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("convertToCometQuicklingURI",["ConstUriUtils","Env","URI","persistentQueryParams"],(function(a,b,c,d,e,f,g){"use strict";b=new(c("URI"))(String(document.location));var h=b.getOrigin();e=b.getQueryData();var i=Object.entries(e).reduce(function(a,b){var d=b[0];b=b[1];if(d==="sk")return a;c("persistentQueryParams").find(function(a){return a===d})&&(a[d]=b);return a},{});function j(a,b,d){var e=a.indexOf("?")!==-1?"&":"?";e=""+a+e+"cquick="+b+"&ctarget="+h+"&cquick_token="+((a=c("Env").compat_iframe_token)!=null?a:"");d&&(e+="&noCoBLog=true");return e}function a(a,b,e){var f;e===void 0&&(e=!1);var g=d("ConstUriUtils").getUri(a);if(g==null)return j(a,b,e);f=new Map([].concat(Object.entries({cquick:b,cquick_token:(f=c("Env").compat_iframe_token)!=null?f:"",ctarget:h}),Object.entries(i)));e&&f.set("noCoBLog","true");g=g.addQueryParams(f);return g==null?j(a,b,e):g.toString()}g["default"]=a}),98);
__d("getCompatIframeOrigin",["ConstUriUtils","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=document.location.origin,e=d("ConstUriUtils").getUri(b);if(e==null){c("FBLogger")("comet_infra").mustfix("Failed to parse the origin `%s`",b);return b}b=e.getSubdomain();if(b==="comet"||b==="www"){b=e.setSubDomain(a);if(b!=null)return b.toString().slice(0,-1)}return e.toString().slice(0,-1)}g["default"]=a}),98);
__d("getMessageEventString",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.data;if(typeof a==="object"){a=a==null?void 0:a[b];if(typeof a==="string")return a}return""}f["default"]=a}),66);
__d("CometCompatBroker",["BaseEventEmitter","CometAltpayJsSdkIframeAllowedDomains","ConstUriUtils","FBLogger","JSScheduler","convertToCometQuicklingURI","getCompatIframeOrigin","getMessageEventString"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=d("ConstUriUtils").getUri(a);if(b==null){c("FBLogger")("comet_infra").mustfix("Failed to parse the origin `%s`",a);return!1}a=["apps","secure","www"].some(function(a){a=d("ConstUriUtils").getUri(c("getCompatIframeOrigin")(a));return a==null?!1:b.isSameOrigin(a)});if(a)return!0;a=d("ConstUriUtils").getUri(document.location.origin.replace(/facebook\.com/i,"messenger.com"));return a?b.isSameOrigin(a):!1}function i(a){var b=d("ConstUriUtils").getUri(a);if(b==null){c("FBLogger")("comet_infra").mustfix("Failed to parse the origin `%s`",a);return!1}a=c("CometAltpayJsSdkIframeAllowedDomains").allowed_domains;if(a==null||a.length<=0)return!1;a=a.some(function(a){a=d("ConstUriUtils").getUri(a);return a==null?!1:b.isSameOrigin(a)});return a?!0:!1}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$CometCompatBroker1=null,e.$CometCompatBroker2="",e.$CometCompatBroker3=!1,e.$CometCompatBroker4=null,e.$CometCompatBroker5=!1,e.$CometCompatBroker6=function(a){d("JSScheduler").scheduleNormalPriCallback(function(){var b=c("getMessageEventString")(a,"compatAction");if(b!==""){e.emit(b,a);return}c("FBLogger")("compat").mustfix("Invalid MessageEvent payload received")})},e.cleanup=function(){window.removeEventListener("message",e.$CometCompatBroker4),e.$CometCompatBroker3=!1},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.init=function(a,b,c){var d=this;c===void 0&&(c=!1);this.$CometCompatBroker2=b;this.$CometCompatBroker5=c;this.$CometCompatBroker4=function(b){d.setupMessageChannel(b,a)};this.$CometCompatBroker3||(window.addEventListener("message",this.$CometCompatBroker4),this.$CometCompatBroker3=!0)};e.sendChildFrameMessage=function(a){this.$CometCompatBroker1&&this.$CometCompatBroker1.postMessage(babelHelpers["extends"]({},a))};e.sendChildFrameParams=function(a){this.sendChildFrameMessage(babelHelpers["extends"]({},a,{uri:c("convertToCometQuicklingURI")(a.uri,this.$CometCompatBroker2)}))};e.setupMessageChannel=function(a,b){var d=c("getMessageEventString")(a,"compatAction"),e=c("getMessageEventString")(a,"iframeKey");(this.$CometCompatBroker5&&i(a.origin)||h(a.origin))&&d==="CompatSetup"&&e===this.$CometCompatBroker2&&(this.$CometCompatBroker1&&this.$CometCompatBroker1.close(),a.ports!=null&&Array.isArray(a.ports)&&(this.$CometCompatBroker1=a.ports[0],this.$CometCompatBroker1.onmessage=this.$CometCompatBroker6,b()))};return b}(c("BaseEventEmitter"));g["default"]=a}),98);
__d("MWChatMarkAllAsSeenMutation",["CometRelay","MWChatMarkAllAsSeenMutation.graphql","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("MWChatMarkAllAsSeenMutation.graphql");function j(a){a=a.get(d("relay-runtime").VIEWER_ID);if(a==null)return;a=a.getLinkedRecord("message_threads");if(a==null)return;var b=a.getValue("unseen_count");if(typeof b!=="number")return;a.setValue(0,"unseen_count")}function a(a,b,c,e){return d("CometRelay").commitMutation(a,{mutation:i,onCompleted:c,onError:e,optimisticUpdater:function(a){j(a)},updater:function(a){j(a)},variables:b})}g["default"]=a}),98);
__d("getCompatIframeSource",["ConstUriUtils","convertToCometQuicklingURI","getCompatIframeOrigin"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){e===void 0&&(e=!1);var f=d("ConstUriUtils").getUri(a);f=(f=f!=null?(f=f.getUnqualifiedUri())==null?void 0:f.toString():a)!=null?f:a;a=c("getCompatIframeOrigin")("www");return""+a+c("convertToCometQuicklingURI")(f,b,e)}g["default"]=a}),98);
__d("LogCometCanvasAppTimeSpentFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743833");c=b("FalcoLoggerInternal").create("log_comet_canvas_app_time_spent",a);e.exports=c}),null);
__d("useCompatCanvasAppListener",["LogCometCanvasAppTimeSpentFalcoEvent","WebSession","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a,b){var e=b.priority;h(function(){a.addListener("log_canvas_app_time_spent",function(a){a=a.data;var b={appID:""+a.appID,endTime:a.currentTime,startTime:a.lastOpenTime,webSessionId:d("WebSession").getId()};e==="HIGH"?c("LogCometCanvasAppTimeSpentFalcoEvent").logImmediately(function(){return b}):c("LogCometCanvasAppTimeSpentFalcoEvent").log(function(){return b})});return function(){a.removeAllListeners("log_canvas_app_time_spent")}},[e,a])}g["default"]=a}),98);
__d("getMessageEventBoolean",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.data;if(typeof a==="object"){a=a==null?void 0:a[b];if(typeof a==="boolean")return a}return!1}f["default"]=a}),66);
__d("MWChatEncryptedBackupsUpsellChatTabVisibilityContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=d("react");b=a.createContext;var i=a.useContext,j=a.useMemo,k=a.useState,l=b({enabledState:[!1,c("emptyFunction")],openState:[!1,c("emptyFunction")]});e=function(a){a=a.children;var b=k(!1),c=k(!1);return h.jsx(l.Provider,{value:j(function(){return{enabledState:c,openState:b}},[b,c]),children:a})};f=function(){var a=i(l);a=a.enabledState;return a};d=function(){var a=i(l);a=a.openState;return a};g.MWChatEncryptedBackupsUpsellChatTabVisibilityContextProvider=e;g.useMWChatEncryptedBackupsUpsellChatTabEnabled=f;g.useMWChatEncryptedBackupsUpsellChatTabOpen=d}),98);
__d("MWChatOpenTabForUser.bs",["LSThreadAttributionStore.bs","MWChatInteraction.bs","MWChatStateActions.bs","MWChatStateV2.bs","MessagingThreadType.bs","bs_caml_format","bs_curry","react","requireDeferred","useCometFeedNoRoutingNavigationEventLogger","useMWChatOpenTabTraceProvider"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWChatLogOpenChatTab.bs").__setRef("MWChatOpenTabForUser.bs"),j=b("requireDeferred")("MWLSPreloadThreadForContact.bs").__setRef("MWChatOpenTabForUser.bs"),k=b("requireDeferred")("MWV2ChatOpenSecureTabForUserCallback.bs").__setRef("MWChatOpenTabForUser.bs");function a(a,c){var d=a!==void 0?a:!1,e=b("useMWChatOpenTabTraceProvider")(),f=b("useCometFeedNoRoutingNavigationEventLogger")();a=function(a){j.onReady(function(c){return b("bs_curry")._1(c.verifyThreadExists,a)})};var g=b("MWChatStateV2.bs").useDispatch(void 0),l=h.useMemo(function(){return function(a,h){f(Date.now(),"","messenger");b("LSThreadAttributionStore.bs").setSource(a,c);i.onReady(function(d){return b("bs_curry")._4(d.logOpenUserTab,h,a,c,void 0)});return e(function(c){b("MWChatInteraction.bs").set(a,c);if(h===!0){k.onReady(function(c){return b("bs_curry")._3(c.openChatTab,a,d,g)});return}else return b("bs_curry")._1(g,b("MWChatStateActions.bs").openTab(Date.now(),{shouldFocus:!d},{TAG:1,_0:{threadKey:b("bs_caml_format").caml_int64_of_string(a),clientThreadKey:void 0,threadType:b("MessagingThreadType.bs").oneToOne}}))},"user",c,a)}},[f,e,d,c]);return[l,a]}f.$MWChatLogOpenChatTab$Deferred=i;f.$MWLSPreloadThreadForContact$Deferred=j;f.$MWV2ChatOpenSecureTabForUserCallback$Deferred=k;f.useHook=a}),null);
__d("MWChatOpenTabForUser.re",["MWChatOpenTabForUser.bs","bs_curry"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MWChatOpenTabForUser.bs").useHook,a.preventAutofocus,c);return a};f.useHook=a}),null);
__d("useMWChatOpenTabForUser",["MWChatEncryptedBackupsUpsellChatTabVisibilityContext","MWChatOpenTabForUser.re","cr:10179","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a,e){b("cr:10179")&&b("cr:10179").interrupt();var f={};e!=null&&(f.preventAutofocus=e.preventAutofocus_DO_NOT_USE);var g=c("MWChatOpenTabForUser.re").useHook(f,a);e=d("MWChatEncryptedBackupsUpsellChatTabVisibilityContext").useMWChatEncryptedBackupsUpsellChatTabEnabled();var i=e[0];f=d("MWChatEncryptedBackupsUpsellChatTabVisibilityContext").useMWChatEncryptedBackupsUpsellChatTabOpen();var j=f[0],k=f[1];return h(function(){var a=g[0],b=g[1];return i&&!j?[function(){return k(!0)},c("emptyFunction")]:[function(b,c){return a(b,(b=c)!=null?b:!1)},b]},[i,j,k,g])}g["default"]=a}),98);
__d("useCompatChatTabListener",["FBLogger","getMessageEventBoolean","getMessageEventString","react","useMWChatOpenTabForPage","useMWChatOpenTabForUser"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=c("useMWChatOpenTabForUser")("compat"),d=b[0];b[1];var e=c("useMWChatOpenTabForPage")("compat");h(function(){a.addListener("startchat",function(a){var b=c("getMessageEventString")(a,"tabId");a=c("getMessageEventBoolean")(a,"isPage");b!==""?a?e(b):d(b):c("FBLogger")("CometMessenger").mustfix("No id in useCompatChatTabListener")});return function(){return a.removeAllListeners("startchat")}},[a,d,e])}g["default"]=a}),98);
__d("useCompatClickEventDispatcher",["useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("useLayoutEffect_SAFE_FOR_SSR")(function(){var b=a.current;if(b==null)return;var c,d=function(){c&&c();try{var a,d=(a=b.contentDocument)!=null?a:b.contentWindow.document,e=function(a){var c;a=document.createEvent("HTMLEvents");a.initEvent("click",!0,!1);(c=b.parentElement)==null?void 0:c.dispatchEvent(a)};d.addEventListener("click",e,{capture:!0});c=function(){d.removeEventListener("click",e,{capture:!0})}}catch(a){}};b.addEventListener("load",d);return function(){b.removeEventListener("load",d),c&&c()}},[a])}g["default"]=a}),98);
__d("useCompatDarkModeListener",["react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=c("useCurrentDisplayMode")()==="dark";h(function(){a&&a.sendChildFrameMessage({compatAction:"dark-mode",enabled:String(b)})},[a,b])}g["default"]=a}),98);
__d("useCompatDocumentFocusChange",["clearInterval","react","recoverableViolation","setInterval","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(a){var b=c("useCurrentRoute")(),d=i(null);h(function(){var b=null,e=a.addListener("subscribe_document_focus_change",function(){if(b!=null){c("recoverableViolation")("Received multiple subscribe_document_focus_change messages from the page","comet_infra");return}function e(){var b=document.hasFocus();d.current!==b&&(d.current=b,a.sendChildFrameMessage({compatAction:"document_focus_change",focused:String(document.hasFocus())}))}b=c("setInterval")(e,1e3)});return function(){e.remove(),b!=null&&c("clearInterval")(b)}},[a,b])}g["default"]=a}),98);
__d("useCompatReloadListener",["react","useCometRouterDispatcher","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a,b){var d=c("useCometRouterDispatcher")(),e=b.forceSelf,f=c("useCurrentRoute")();h(function(){a.addListener("reload",function(a){a=e?{target:"self"}:{};f&&(d&&d.goTo(f,a))});return function(){return a.removeAllListeners("reload")}},[d,a,e,f])}g["default"]=a}),98);
__d("useCompatRouteListener",["ConstUriUtils","HiddenSubtreePassiveContext","URI","getMessageEventBoolean","getMessageEventString","gkx","goForceFullPageRedirectTo","react","useCometRouterDispatcher","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useContext,i=b.useEffect;function a(a,b){var e=c("useCometRouterDispatcher")(),f=b.forceSelf,g=b.noMaintain,j=h(c("HiddenSubtreePassiveContext")),k=c("useCurrentRoute")();i(function(){e&&a.addListener("route",function(a){if(j.getCurrentState().hidden)return;var b=c("getMessageEventBoolean")(a,"fullPageReload"),h=new(c("URI"))(c("getMessageEventString")(a,"uri")).removeQueryData(["cquick","ctarget","cquick_token"]);if(!h.isSameOrigin()||b){c("goForceFullPageRedirectTo")(h.toString());return}b=h.getUnqualifiedURI();h=b.toString();var i=c("getMessageEventString")(a,"maintainKey");a=c("getMessageEventBoolean")(a,"replace");if(!Boolean(i)||g){i=f?{replace:a,target:"self"}:{replace:a};e.go(h,i)}else{i={replace:a,target:"self"};if(k){a=d("ConstUriUtils").getUri(k.url);b=b.getPath().startsWith("/messages")?"messenger":c("gkx")("1224637")&&b.getPath().startsWith("/settings")&&(a==null?void 0:a.getPath().startsWith("/settings"))?k.tabKey:void 0;a=babelHelpers["extends"]({},k,{tabKey:b,url:h});e.goTo(a,i)}else e.go(h,i)}});return function(){return a.removeAllListeners("route")}},[e,a,f,j,g,k])}g["default"]=a}),98);
__d("useCompatTimeSpentBitArrayListener",["CometTimeSpentBitArrayLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){h(function(){a.addListener("update_time_spent_bit_array_from_boc",function(a){a=a.data;d("CometTimeSpentBitArrayLogger").updateTimeSpentArray(a.eventTimeInMs)});return function(){a.removeAllListeners("update_time_spent_bit_array_from_boc")}},[a])}g["default"]=a}),98);
__d("CometFullPageCompatRoot.react",["BaseViewportMarginsContext","CometBlueBridgeContext","CometCompatBroker","CometDOMOnlyBoundary.react","CometHeroHoldTrigger.react","CometOnRefresh.react","CometRelay","CometRouteRenderType","CometRouteURL","CurrentUser","FBLogger","InteractionTracing","MWChatMarkAllAsSeenMutation","clearTimeout","cometUniqueID","cr:683059","getCompatIframeSource","react","setTimeout","useCompatCanvasAppListener","useCompatChatTabListener","useCompatClickEventDispatcher","useCompatDarkModeListener","useCompatDocumentFocusChange","useCompatReloadListener","useCompatRouteListener","useCompatTimeSpentBitArrayListener","useCurrentDisplayMode","useCurrentRoute","useLayoutEffect_SAFE_FOR_SSR","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useCallback,j=e.useContext,k=e.useEffect,l=e.useRef,m=e.useState;function a(a){var e=a.routeProps.maintainKey,f=c("useCurrentDisplayMode")();f=f==="dark";var g=j(c("CometBlueBridgeContext")),n=c("usePrevious")(e),o=c("useCurrentRoute")(),p=d("CometRouteURL").useRouteURL(),q=(o=o==null?void 0:o.routePath)!=null?o:p;g&&c("FBLogger")("BlueOnComet").mustfix("Blue on Comet is not allowed in Comet on Blue, was trying to load "+q);o=m(c("cometUniqueID")());var r=o[0],s=o[1],t=c("getCompatIframeSource")(p,r,g),u=l(null);o=m(t);g=o[0];var v=o[1],w=l(null),x=l(null);o=m(!0);var y=o[0],z=o[1];c("useLayoutEffect_SAFE_FOR_SSR")(function(){b("cr:683059")&&(b("cr:683059").addMarkerPoint("BoC_start"),w.current=b("cr:683059").holdTrigger(r),x.current=c("setTimeout")(function(){w.current&&w.current(),w.current=null},6e4),b("cr:683059").addAnnotation("routePath",q));z(!1);return function(){w.current&&w.current()}},[r,g,q]);o=m(new(c("CometCompatBroker"))());var A=o[0],B=d("CometRelay").useRelayEnvironment(),C=l(null);o=j(c("BaseViewportMarginsContext"));var D=i(function(){s(c("cometUniqueID")())},[s]);d("CometOnRefresh.react").useOnRefresh(D);D=i(function(){b("cr:683059")&&(b("cr:683059").addVisualElement(C.current,"BoCIframe"),b("cr:683059").addMarkerPoint("BoC_end"),c("clearTimeout")(x.current),w.current&&w.current(),w.current=null),z(!1)},[C,w]);c("useLayoutEffect_SAFE_FOR_SSR")(function(){A.init(function(){},r);return A.cleanup},[A,r,g]);c("useCompatRouteListener")(A,{forceSelf:!1,noMaintain:!1});c("useCompatReloadListener")(A,{forceSelf:!0});c("useCompatCanvasAppListener")(A,{priority:c("CurrentUser").isLoggedIn()?"HIGH":"LOW"});c("useCompatDocumentFocusChange")(A);c("useCompatTimeSpentBitArrayListener")(A);c("useCompatChatTabListener")(A);c("useCompatDarkModeListener")(A);var E=a.customCompatEventHandler;k(function(){if(E)return E(A)},[A,E]);k(function(){if(p.startsWith("/messages")){c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addGlobalMetadata("afterMessengerLoaded",1)});if(!t.includes("/t/")&&u.current!=null&&u.current.includes("/t/"))return}t!==u.current&&(Boolean(e)&&e===n?A.sendChildFrameParams({compatAction:"transitionpage",rel:"",uri:t}):v(t));u.current=t},[A,t,e,n,p]);k(function(){if(p.startsWith("/messages")){var a=String(Date.now());c("MWChatMarkAllAsSeenMutation")(B,{input:{actor_id:c("CurrentUser").getID(),precise_timestamp:a}})}},[B,p]);c("useCompatClickEventDispatcher")(C);a=p.includes("/groups/")&&p.includes("/chats/");a=p.startsWith("/messages")||a;return h.jsx("div",{className:"ina5je9e d2edcug0 datstx6m",children:h.jsxs(c("CometDOMOnlyBoundary.react"),{children:[h.jsx(c("CometHeroHoldTrigger.react"),{description:"BoC iframe",hold:y}),h.jsx("iframe",{className:"k4urcfbm jgljxmt5 a8c37x1j izx4hr6d humdl8nn bn081pho gcieejh5"+(f&&!a?" esnais5j":"")+(d("CometRouteRenderType").useIsPushView()&&o.top===0?" nznu9b0o":""),onError:D,onLoad:D,ref:C,src:g,tabIndex:-1},g)]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMenuItemSelectable_DEPRECATED.react",["ix","CometIcon.react","CometMenuItemBase.react","CometMenuItemIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){return!a?null:i.jsx(c("CometIcon.react"),{color:"highlight",icon:d("fbicon")._(h("477820"),20)})}j.displayName=j.name+" [from "+f.id+"]";function a(a,b){a.aux;var d=a.disabled,e=a.icon,f=a.iconColor,g=a.iconStyle,h=a.isSelected,k=babelHelpers.objectWithoutPropertiesLoose(a,["aux","disabled","icon","iconColor","iconStyle","isSelected"]);if(e)return i.jsx(c("CometMenuItemBase.react"),babelHelpers["extends"]({},k,{"aria-checked":h,aux:a.aux!=null?a.aux(h,d):j(h),disabled:d,iconNode:i.jsx(c("CometMenuItemIcon.react"),{icon:e,iconColor:f,use:g}),ref:b}));else{e=a.aux!=null?a.aux(h,d):j(h);return i.jsx(c("CometMenuItemBase.react"),babelHelpers["extends"]({},k,{"aria-checked":h,aux:e?i.jsx("div",{className:"irj2b8pg ew0dbk1b",children:e}):void 0,disabled:d,ref:b}))}}a.displayName=a.name+" [from "+f.id+"]";b=i.forwardRef(a);g["default"]=b}),98);
__d("BaseToastAnimationInternal.react",["react","stylex","useFadeEffect","useMergeRefs","useToasterStateManager","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback,j=100,k={mount:{opacity:"pedkr2u6",transform:"g3zh7qmp",transitionDuration:"pc15xi3s",transitionTimingFunction:"ilcmz9jb"},root:{opacity:"b5wmifdl",transform:"f2tghaqp",transitionDuration:"s1992sns",transitionProperty:"r5qslco7",transitionTimingFunction:"nf1dmkjp"}};function a(a){var b=a.children,d=a.expired;d=d===void 0?!1:d;var e=a.id,f=a.position;a=a.xstyle;var g=c("useToasterStateManager")(),l=h.Children.only(b);b=i(function(){g.resetTimer(e)},[e,g]);var m=i(function(){g.stopTimer(e)},[e,g]),n=i(function(){g.shown(e)},[e,g]),o=i(function(){g.hidden(e)},[e,g]),p=i(function(a){l.props.onActionPress!=null&&l.props.onActionPress(a),a.defaultPrevented||g.expire(e)},[l.props,e,g]);o=c("useVisibilityObserver")({onHidden:o,onVisible:n,options:{activityMonitorOverride:null}});n=c("useFadeEffect")(!d);d=n[0];var q=n[1];n=n[2];n=c("useMergeRefs")(n,o);return d?h.jsx("li",{className:c("stylex")(k.root,q&&k.mount,a),onMouseEnter:m,onMouseLeave:b,ref:n,style:{bottom:j*f},children:h.cloneElement(l,{onActionPress:p})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseToasterView.react",["BaseToasterStateManager","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("BaseToasterStateManager").getInstance();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={visibleToasts:[]},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromProps=function(a,b){b=b!=null?b.visibleToasts.slice(0,a.maxVisible):[];var c=0,d=a.filterToasts,e=a.toasterState,f={},g=d!=null?Object.keys(e).filter(function(a){var b,c=e[a];f[a]=c;var g=c==null?void 0:c.shown;b=c==null?void 0:(b=c.value)==null?void 0:(b=b.type)==null?void 0:b.name;if(c==null||b==null)return!0;if(d.has(b)&&!g){i.expire(a);return!1}}):Object.keys(e),h=b.reduce(function(a,b){b!=null&&a.add(b.id);return a},new Set()),j=0;while(c<a.maxVisible){var k=b[c],l=Object.keys(f).length>0?f:a.toasterState;if(k!=null){l=Object.prototype.hasOwnProperty.call(l,k.id);if(l){l=e[k.id];b[c]={expired:l.expired,id:l.id,toast:l.value};c++;continue}else b[c]=null}k=null;while(k==null&&j<g.length){l=g[j++];var m=h.has(l);m||(k=a.toasterState[l])}k!=null&&(b[c]={expired:k.expired,id:k.id,toast:k.value});c++}return{visibleToasts:b}};var c=b.prototype;c.render=function(){var a=this;return h.jsx("ul",{className:this.props.className,children:this.state.visibleToasts.map(function(b,c){return b!=null?a.props.children(b.toast,b.id,b.expired,c):null})})};return b}(h.PureComponent);a.defaultProps={maxVisible:1};g["default"]=a}),98);
__d("CometConfirmationDialogImpl.react",["CometTwoButtonDialogImpl.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.body,d=a.cancel,e=a.confirm,f=a.disabled;f=f===void 0?!1:f;var g=a.onClose;a=a.title;return h.jsx(c("CometTwoButtonDialogImpl.react"),{body:b,disabled:f,onClose:function(a){return g(a==="PRIMARY")},primary:e,secondary:d,testids:{dialog:"CometConfirmationDialogImpl",primary:"CometConfirmationDialogConfirmButton",secondary:"CometConfirmationDialogCancelButton"},title:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTabMenu.react",["CometMenu.react","CometMenuItemSelectable_DEPRECATED.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.menuItems,d=a.menuSize;a=a.truncate;return h.jsx(c("CometMenu.react"),{size:d,truncate:a,children:b.map(function(a,b){var d=a.badge,e=a.disabled,f=a.icon,g=a.label,i=a.linkProps,j=a.onHoverIn,k=a.onHoverOut,l=a.onPress,m=a.onPressIn,n=a.selected;a=a.tabRef;return h.jsx(c("CometMenuItemSelectable_DEPRECATED.react"),{badge:d,disabled:e,href:(d=i==null?void 0:i.url)!=null?d:void 0,icon:f,isSelected:(e=n)!=null?e:!1,onClick:l,onHoverIn:j,onHoverOut:k,onPressIn:m,primaryText:g,ref:a,role:"menuitemradio",routeTarget:i==null?void 0:i.routeTarget,target:i==null?void 0:i.target,testid:void 0},b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("nativePromiseRegeneratorRuntime",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;b=typeof Symbol==="function"?Symbol:{};var h=b.iterator||"@@iterator";c=b.asyncIterator||"@@asyncIterator";var i=e.exports;function j(a,b,c,d){b=Object.create((b||q).prototype);d=new A(d||[]);b._invoke=w(a,c,d);return b}i.wrap=j;function k(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}var l="suspendedStart",m="suspendedYield",n="executing",o="completed",p={};function q(){}function r(){}function s(){}var t=s.prototype=q.prototype;r.prototype=t.constructor=s;s.constructor=r;r.displayName="GeneratorFunction";function a(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}v.prototype[c]=function(){return this};i.isGeneratorFunction=function(a){a=typeof a==="function"&&a.constructor;return a?a===r||(a.displayName||a.name)==="GeneratorFunction":!1};i.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,s):Object.assign(a,s);a.prototype=Object.create(t);return a};i.awrap=function(a){return new u(a)};function u(a){this.arg=a}function v(a){function b(b,e){var f=a[b](e);b=f.value;return b instanceof u?window.Promise.resolve(b.arg).then(c,d):window.Promise.resolve(b).then(function(a){f.value=a;return f})}typeof process==="object"&&process.domain&&(b=process.domain.bind(b));var c=b.bind(a,"next"),d=b.bind(a,"throw");b.bind(a,"return");var e;function f(a,c){var d=e?e.then(function(){return b(a,c)}):new window.Promise(function(d){d(b(a,c))});e=d["catch"](function(a){});return d}this._invoke=f}a(v.prototype);i.async=function(a,b,c,d){var e=new v(j(a,b,c,d));return i.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function w(a,b,c){var d=l;return function(e,f){if(d===n)throw new Error("Generator is already running");if(d===o){if(e==="throw")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e==="return"||e==="throw"&&g.iterator[e]===void 0){c.delegate=null;var h=g.iterator["return"];if(h){h=k(h,g.iterator,f);if(h.type==="throw"){e="throw";f=h.arg;continue}}if(e==="return")continue}h=k(g.iterator[e],g.iterator,f);if(h.type==="throw"){c.delegate=null;e="throw";f=h.arg;continue}e="next";f=void 0;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=m;return i}c.delegate=null}if(e==="next")d===m?c.sent=f:c.sent=void 0;else if(e==="throw"){if(d===l){d=o;throw f}c.dispatchException(f)&&(e="next",f=void 0)}else e==="return"&&c.abrupt("return",f);d=n;h=k(a,b,c);if(h.type==="normal"){d=c.done?o:m;var i={value:h.arg,done:c.done};if(h.arg===p)c.delegate&&e==="next"&&(f=void 0);else return i}else h.type==="throw"&&(d=o,e="throw",f=h.arg)}}}a(t);var x=!1;i.defineGeneratorMethods=function(){if(x)return;x=!0;t[h]=function(){return this};t.toString=function(){return"[object Generator]"}};i.defineGeneratorMethods();function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(y,this),this.reset(!0)}i.keys=function(a){var b=[];for(var c in a)b.push(c);b.reverse();return function c(){while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){if(a){var b=a[h];if(b)return b.call(a);if(typeof a.next==="function")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(g.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=void 0;b.done=!0;return b};return b.next=b}}return{next:C}}i.values=B;function C(){return{value:void 0,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=void 0;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(var a in this)a.charAt(0)==="t"&&g.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function c(c,d){f.type="throw";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc==="root")return c("end");if(e.tryLoc<=this.prev){var h=g.call(e,"catchLoc"),i=g.call(e,"finallyLoc");if(h&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(h){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&g.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return p},complete:function(a,b){if(a.type==="throw")throw a.arg;a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=a.arg,this.next="end"):a.type==="normal"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return p}}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type==="throw"){var e=d.arg;z(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return p}}}),null);
__d("BPlusTreeBase",["nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=c("nativePromiseRegeneratorRuntime").mark(s),i=c("nativePromiseRegeneratorRuntime").mark(t),j=c("nativePromiseRegeneratorRuntime").mark(x),k=c("nativePromiseRegeneratorRuntime").mark(y),l=c("nativePromiseRegeneratorRuntime").mark(z),m=c("nativePromiseRegeneratorRuntime").mark(A),n=c("nativePromiseRegeneratorRuntime").mark(B),o=c("nativePromiseRegeneratorRuntime").mark(C),p=c("nativePromiseRegeneratorRuntime").mark(D),q=function(){return{children:[],isLeaf:!0,keys:[]}},r={gte:[!0,0],lt:[!0,1],gt:[!1,0],lte:[!1,1]};function s(a){var b,d,e,f,g,i,j,k,l,m,n,o;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:return c.delegateYield(a.readHeader(),"t0",1);case 1:b=c.t0;if(!(b==null||b.rootId==null||b.headId==null)){c.next=4;break}return c.abrupt("return");case 4:return c.delegateYield(a.readExn(b.rootId),"t1",5);case 5:d=c.t1,e=[{node:d,id:b.rootId}];case 7:if(!(e.length>0)){c.next=30;break}f=e.shift(),g=f.id,i=f.node;if(i.isLeaf){c.next=27;break}j=i.children,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 11:if(!k){c.next=17;break}if(!(l>=j.length)){c.next=14;break}return c.abrupt("break",27);case 14:m=j[l++];c.next=21;break;case 17:l=j.next();if(!l.done){c.next=20;break}return c.abrupt("break",27);case 20:m=l.value;case 21:n=m;return c.delegateYield(a.read(n),"t2",23);case 23:o=c.t2,o!=null&&e.push({node:o,id:n});case 25:c.next=11;break;case 27:return c.delegateYield(a.remove(g),"t3",28);case 28:c.next=7;break;case 30:return c.delegateYield(a.removeHeader(),"t4",31);case 31:case"end":return c.stop()}},h,this)}function t(a,b,d,e){var f,g,h,j,k;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:return c.delegateYield(b.readExn(d),"t0",1);case 1:f=c.t0,g=[],(h=f,j=d),k=-1;case 5:if(h.isLeaf){c.next=14;break}g.push([h,j,k]);k=u(a,h.keys,e,r.gt);k===-1&&(k=h.keys.length);j=h.children[k];return c.delegateYield(b.readExn(j),"t1",11);case 11:h=c.t1;c.next=5;break;case 14:return c.abrupt("return",[h,j,g,k]);case 15:case"end":return c.stop()}},i,this)}function u(a,b,c,d){var e=0,f=b.length-1;while(e<=f){var g=e+f>>1;(d[0]?a(b[g],c)<0:a(b[g],c)<=0)?e=g+1:f=g-1}g=[e,f][d[1]];return g===b.length?-1:g}function v(a,b,c){if(!b.length)return[0,0];var d=u(a,b,c,r.gte);if(d===-1)return[b.length,0];else if(a(b[d],c)===0)return[d,1];return[d,0]}function w(a,b,c){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];return[].concat(a.slice(0,b),e,a.slice(b+c))}function x(a){var b,d;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:return c.delegateYield(a.readHeader(),"t0",1);case 1:b=c.t0;if(!(b==null)){c.next=7;break}return c.delegateYield(a.writeNew({isLeaf:!0,children:[],keys:[]}),"t1",4);case 4:d=c.t1;b={rootId:d,tailId:d,headId:d};return c.delegateYield(a.writeHeader(b),"t2",7);case 7:return c.abrupt("return",b);case 8:case"end":return c.stop()}},j,this)}function y(a,b,d){var e,f,g;return c("nativePromiseRegeneratorRuntime").wrap(function(h){while(1)switch(h.prev=h.next){case 0:h.t0=t;h.t1=a;h.t2=b;return h.delegateYield(x(b),"t3",4);case 4:h.t4=h.t3.rootId;h.t5=d;return h.delegateYield(h.t0(h.t1,h.t2,h.t4,h.t5),"t6",7);case 7:e=h.t6;f=e[0];g=u(a,f.keys,d,r.gte);if(!(g===-1||a(f.keys[g],d)!==0)){h.next=12;break}throw c("unrecoverableViolation")("key not found: "+String(d),"messenger_web_product");case 12:return h.abrupt("return",f.children[g]);case 13:case"end":return h.stop()}},k,this)}function z(a,b,d,e){var f,g,h;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:c.t0=t;c.t1=a;c.t2=b;return c.delegateYield(x(b),"t3",4);case 4:c.t4=c.t3.rootId;c.t5=d;return c.delegateYield(c.t0(c.t1,c.t2,c.t4,c.t5),"t6",7);case 7:f=c.t6;g=f[0];h=u(a,g.keys,d,r.gte);if(!(h===-1||a(g.keys[h],d)!==0)){c.next=12;break}return c.abrupt("return",e);case 12:return c.abrupt("return",g.children[h]);case 13:case"end":return c.stop()}},l,this)}function A(a,b,d){var e,f,g;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:c.t0=t;c.t1=a;c.t2=b;return c.delegateYield(x(b),"t3",4);case 4:c.t4=c.t3.rootId;c.t5=d;return c.delegateYield(c.t0(c.t1,c.t2,c.t4,c.t5),"t6",7);case 7:e=c.t6;f=e[0];g=u(a,f.keys,d,r.gte);return c.abrupt("return",g!==-1&&a(f.keys[g],d)===0);case 11:case"end":return c.stop()}},m,this)}function B(a,b,d,e,f){var g,h,i,j,k,l,m,o,p,q,r,s,u,y,z,A,B,C,D;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:return c.delegateYield(x(b),"t0",1);case 1:g=c.t0;h={};return c.delegateYield(t(a,b,g.rootId,e),"t1",4);case 4:i=c.t1,j=i[0],k=i[1],l=i[2],(m=v(a,j.keys,e),o=m[0],p=m[1]),(q=babelHelpers["extends"]({},j,{children:w(j.children,o,p,f),keys:p===1?j.keys:w(j.keys,o,p,e)}),r=k);case 10:if(!(q.keys.length>=d)){c.next=44;break}y=l.pop()||[{keys:[],children:[r],isLeaf:!1}];s=y[0];u=y[1];z=Math.floor(q.keys.length/2);A=void 0,B=void 0;if(!q.isLeaf){c.next=35;break}A={isLeaf:!0,children:q.children.slice(z),keys:q.keys.slice(z),nextId:q.nextId,prevId:r};return c.delegateYield(b.writeNew(A),"t2",19);case 19:B=q.nextId=c.t2;if(!A.nextId){c.next=32;break}c.t3=b;c.t4=A.nextId;c.t5=babelHelpers;c.t6={};return c.delegateYield(b.readExn(A.nextId),"t7",26);case 26:c.t8=c.t7;c.t9={prevId:B};c.t10=c.t5["extends"].call(c.t5,c.t6,c.t8,c.t9);return c.delegateYield(c.t3.write.call(c.t3,c.t4,c.t10),"t11",30);case 30:c.next=33;break;case 32:h.tailId=B;case 33:c.next=38;break;case 35:A={isLeaf:!1,children:q.children.slice(z+1),keys:q.keys.slice(z+1)};return c.delegateYield(b.writeNew(A),"t12",37);case 37:B=c.t12;case 38:C=v(a,s.keys,q.keys[z]),D=C[0];s=babelHelpers["extends"]({},s,{keys:w(s.keys,D,0,q.keys[z]),children:w(s.children,D+1,0,B)});return c.delegateYield(b.write(r,babelHelpers["extends"]({},q,{keys:q.keys.slice(0,z),children:q.children.slice(0,z+(q.isLeaf?0:1))})),"t13",41);case 41:q=s,r=u;c.next=10;break;case 44:if(!(r==null)){c.next=49;break}return c.delegateYield(b.writeNew(q),"t14",46);case 46:h.rootId=c.t14;c.next=50;break;case 49:return c.delegateYield(b.write(r,q),"t15",50);case 50:if(!Object.keys(h).length){c.next=52;break}return c.delegateYield(b.writeHeader(babelHelpers["extends"]({},g,h)),"t16",52);case 52:case"end":return c.stop()}},n,this)}function C(a,b,d,e){var f,g,h,i,j,k,l,m,n,p,q,s,v,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;return c("nativePromiseRegeneratorRuntime").wrap(function(o){while(1)switch(o.prev=o.next){case 0:return o.delegateYield(x(b),"t0",1);case 1:f=o.t0;g={};h=Math.floor(d/2);return o.delegateYield(t(a,b,f.rootId,e),"t1",5);case 5:i=o.t1;j=i[0];k=i[1];l=i[2];m=i[3];n=u(a,j.keys,e,r.gte);if(!(n===-1||a(j.keys[n],e)!==0)){o.next=13;break}return o.abrupt("return",!1);case 13:p=babelHelpers["extends"]({},j,{keys:w(j.keys,n,1),children:w(j.children,n,1)}),q=k,s=m;case 16:if(!(p.keys.length<h&&l.length)){o.next=101;break}B=l.pop();v=B[0];y=B[1];z=B[2];C=[[{nodeId:v.children[s-1]},{nodeId:q,node:p},s-1],[{nodeId:q,node:p},{nodeId:v.children[s+1]},s]].filter(function(a){var b=a[0];a=a[1];return b.nodeId!==void 0&&a.nodeId!==void 0});D=C,E=Array.isArray(D),F=0,D=E?D:D[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 23:if(!E){o.next=29;break}if(!(F>=D.length)){o.next=26;break}return o.abrupt("break",57);case 26:G=D[F++];o.next=33;break;case 29:F=D.next();if(!F.done){o.next=32;break}return o.abrupt("break",57);case 32:G=F.value;case 33:H=G;I=H[0];J=H[1];K=H[2];o.t2=I.node;if(o.t2){o.next=41;break}return o.delegateYield(b.readExn(I.nodeId),"t3",40);case 40:o.t2=o.t3;case 41:I.node=o.t2;o.t4=J.node;if(o.t4){o.next=46;break}return o.delegateYield(b.readExn(J.nodeId),"t5",45);case 45:o.t4=o.t5;case 46:J.node=o.t4;if(!(I.node.keys.length+J.node.keys.length>=h*2)){o.next=55;break}p.isLeaf?(J.node=babelHelpers["extends"]({},J.node,{children:[].concat(I.node.children,J.node.children),keys:[].concat(I.node.keys,J.node.keys)}),I.node=babelHelpers["extends"]({},I.node,{children:J.node.children.splice(0,h),keys:J.node.keys.splice(0,h)}),v=babelHelpers["extends"]({},v,{keys:w(v.keys,K,1,J.node.keys[0])})):(J.node=babelHelpers["extends"]({},J.node,{children:[].concat(I.node.children,J.node.children),keys:[].concat(I.node.keys,[v.keys[K]],J.node.keys)}),I.node=babelHelpers["extends"]({},I.node,{children:J.node.children.splice(0,h+1)}),v=babelHelpers["extends"]({},v,{keys:w(v.keys,K,1,J.node.keys.splice(h,1)[0])}),I.node.keys=J.node.keys.splice(0,h));return o.delegateYield(b.write(I.nodeId,I.node),"t6",50);case 50:return o.delegateYield(b.write(J.nodeId,J.node),"t7",51);case 51:return o.delegateYield(b.write(y,v),"t8",52);case 52:if(!Object.keys(g).length){o.next=54;break}return o.delegateYield(b.writeHeader(babelHelpers["extends"]({},f,g)),"t9",54);case 54:return o.abrupt("return",!0);case 55:o.next=23;break;case 57:L=C,M=Array.isArray(L),N=0,L=M?L:L[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 58:if(!M){o.next=64;break}if(!(N>=L.length)){o.next=61;break}return o.abrupt("break",98);case 61:O=L[N++];o.next=68;break;case 64:N=L.next();if(!N.done){o.next=67;break}return o.abrupt("break",98);case 67:O=N.value;case 68:P=O;Q=P[0];R=P[1];S=P[2];Q.node=babelHelpers["extends"]({},Q.node,{children:[].concat(Q.node.children,R.node.children)});if(!p.isLeaf){o.next=91;break}Q.node.keys=[].concat(Q.node.keys,R.node.keys);if(!R.node.nextId){o.next=87;break}o.t10=b;o.t11=R.node.nextId;o.t12=babelHelpers;o.t13={};return o.delegateYield(b.readExn(R.node.nextId),"t14",81);case 81:o.t15=o.t14;o.t16={prevId:Q.nodeId};o.t17=o.t12["extends"].call(o.t12,o.t13,o.t15,o.t16);return o.delegateYield(o.t10.write.call(o.t10,o.t11,o.t17),"t18",85);case 85:o.next=88;break;case 87:g.tailId=Q.nodeId;case 88:Q.node.nextId=R.node.nextId;o.next=92;break;case 91:Q.node.keys=[].concat(Q.node.keys,[v.keys[S]],R.node.keys);case 92:v=babelHelpers["extends"]({},v,{keys:w(v.keys,S,1),children:w(v.children,S+1,1)});return o.delegateYield(b.write(Q.nodeId,Q.node),"t19",94);case 94:return o.delegateYield(b.remove(R.nodeId),"t20",95);case 95:return o.abrupt("break",98);case 96:o.next=58;break;case 98:A=[v,y,z],p=A[0],q=A[1],s=A[2],A;o.next=16;break;case 101:return o.delegateYield(b.write(q,p),"t21",102);case 102:return o.delegateYield(b.readExn(f.rootId),"t22",103);case 103:T=o.t22;if(!(!T.keys.length&&T.children.length)){o.next=109;break}if(!T.isLeaf){o.next=107;break}throw c("unrecoverableViolation")("cannot be leaf","messenger_web_product");case 107:return o.delegateYield(b.remove(f.rootId),"t23",108);case 108:g.rootId=T.children[0];case 109:if(!Object.keys(g).length){o.next=111;break}return o.delegateYield(b.writeHeader(babelHelpers["extends"]({},f,g)),"t24",111);case 111:return o.abrupt("return",!0);case 112:case"end":return o.stop()}},o,this)}function D(a,b,d){var e,f,g,h,i,j,k,l,m,n,o,s,v,w,y,z,A,B,C,D,E,F,G,H,I;return c("nativePromiseRegeneratorRuntime").wrap(function(p){while(1)switch(p.prev=p.next){case 0:e=d===void 0?{}:d,f=e.dir,g=f===void 0?"asc":f,h=babelHelpers.objectWithoutPropertiesLoose(e,["dir"]);if(!(Object.prototype.hasOwnProperty.call(h,"gt")&&Object.prototype.hasOwnProperty.call(h,"gte"))){p.next=3;break}throw c("unrecoverableViolation")("cannot specify both greater than and greater than or equal","messenger_web_product");case 3:if(!(Object.prototype.hasOwnProperty.call(h,"lt")&&Object.prototype.hasOwnProperty.call(h,"lte"))){p.next=5;break}throw c("unrecoverableViolation")("cannot specify both less than and less than or equal","messenger_web_product");case 5:return p.delegateYield(x(b),"t0",6);case 6:k=p.t0;if(!(g==="asc")){p.next=89;break}if(!Object.prototype.hasOwnProperty.call(h,"gt")){p.next=15;break}return p.delegateYield(t(a,b,k.rootId,h.gt),"t1",10);case 10:l=p.t1;i=l[0];j=l[1];p.next=28;break;case 15:if(!Object.prototype.hasOwnProperty.call(h,"gte")){p.next=22;break}return p.delegateYield(t(a,b,k.rootId,h.gte),"t2",17);case 17:m=p.t2;i=m[0];j=m[1];p.next=28;break;case 22:return p.delegateYield(b.readExn(k.headId),"t3",23);case 23:p.t4=p.t3,p.t5=k.headId,n=[p.t4,p.t5],i=n[0],j=n[1];case 28:o=Object.prototype.hasOwnProperty.call(h,"gt")?u(a,i.keys,h.gt,r.gt):Object.prototype.hasOwnProperty.call(h,"gte")?u(a,i.keys,h.gte,r.gte):0;case 29:if(!(i&&j!==void 0)){p.next=87;break}case 30:if(!(o!==-1&&o<i.keys.length)){p.next=78;break}s=i.keys[o];if(!(Object.prototype.hasOwnProperty.call(h,"lt")&&a(s,h.lt)>=0||Object.prototype.hasOwnProperty.call(h,"lte")&&a(s,h.lte)>0)){p.next=34;break}return p.abrupt("return");case 34:p.next=36;return[i.keys[o],i.children[o]];case 36:v=p.sent;return p.delegateYield(b.read(j),"t7",38);case 38:p.t6=p.t7;if(p.t6){p.next=41;break}p.t6=q();case 41:i=p.t6;if(!(v!=null)){p.next=60;break}if(!(a(v,s)<=0)){p.next=45;break}throw c("unrecoverableViolation")("key must be greater than current key","messenger_web_product");case 45:o=u(a,i.keys,v,r.gte);if(!(o===-1)){p.next=58;break}p.t8=t;p.t9=a;p.t10=b;return p.delegateYield(x(b),"t11",51);case 51:p.t12=(k=p.t11).rootId;p.t13=v;return p.delegateYield(p.t8(p.t9,p.t10,p.t12,p.t13),"t14",54);case 54:w=p.t14,i=w[0],j=w[1],o=u(a,i.keys,v,r.gte);case 58:p.next=76;break;case 60:y=o>=i.keys.length||a(i.keys[o],s)!==0;if(!y){p.next=75;break}o=u(a,i.keys,s,r.lte);if(!(o===-1)){p.next=75;break}p.t15=t;p.t16=a;p.t17=b;return p.delegateYield(x(b),"t18",68);case 68:p.t19=(k=p.t18).rootId;p.t20=s;return p.delegateYield(p.t15(p.t16,p.t17,p.t19,p.t20),"t21",71);case 71:z=p.t21,i=z[0],j=z[1],o=u(a,i.keys,s,r.lte);case 75:o++;case 76:p.next=30;break;case 78:j=i.nextId;p.t22=j!==void 0;if(!p.t22){p.next=83;break}return p.delegateYield(b.readExn(j),"t23",82);case 82:p.t22=p.t23;case 83:i=p.t22;o=0;p.next=29;break;case 87:p.next=168;break;case 89:if(!Object.prototype.hasOwnProperty.call(h,"lt")){p.next=96;break}return p.delegateYield(t(a,b,k.rootId,h.lt),"t24",91);case 91:A=p.t24;i=A[0];j=A[1];p.next=109;break;case 96:if(!Object.prototype.hasOwnProperty.call(h,"lte")){p.next=103;break}return p.delegateYield(t(a,b,k.rootId,h.lte),"t25",98);case 98:B=p.t25;i=B[0];j=B[1];p.next=109;break;case 103:return p.delegateYield(b.readExn(k.tailId),"t26",104);case 104:p.t27=p.t26,p.t28=k.tailId,C=[p.t27,p.t28],i=C[0],j=C[1];case 109:D=Object.prototype.hasOwnProperty.call(h,"lt")?u(a,i.keys,h.lt,r.lt):Object.prototype.hasOwnProperty.call(h,"lte")?u(a,i.keys,h.lte,r.lte):i.keys.length-1;case 110:if(!(i&&j!==void 0)){p.next=168;break}case 111:if(!(D!==-1&&D>=0)){p.next=159;break}E=i.keys[D];if(!(Object.prototype.hasOwnProperty.call(h,"gt")&&a(E,h.gt)<=0||Object.prototype.hasOwnProperty.call(h,"gte")&&a(E,h.gte)<0)){p.next=115;break}return p.abrupt("return");case 115:p.next=117;return[i.keys[D],i.children[D]];case 117:F=p.sent;return p.delegateYield(b.read(j),"t30",119);case 119:p.t29=p.t30;if(p.t29){p.next=122;break}p.t29=q();case 122:i=p.t29;if(!(F!=null)){p.next=141;break}if(!(a(F,E)>=0)){p.next=126;break}throw c("unrecoverableViolation")("key must be less than current key","messenger_web_product");case 126:D=u(a,i.keys,F,r.lte);if(!(D===-1)){p.next=139;break}p.t31=t;p.t32=a;p.t33=b;return p.delegateYield(x(b),"t34",132);case 132:p.t35=(k=p.t34).rootId;p.t36=F;return p.delegateYield(p.t31(p.t32,p.t33,p.t35,p.t36),"t37",135);case 135:G=p.t37,i=G[0],j=G[1],D=u(a,i.keys,F,r.lte);case 139:p.next=157;break;case 141:H=D>=i.keys.length||a(i.keys[D],E)!==0;if(!H){p.next=156;break}D=u(a,i.keys,E,r.gte);if(!(D===-1)){p.next=156;break}p.t38=t;p.t39=a;p.t40=b;return p.delegateYield(x(b),"t41",149);case 149:p.t42=(k=p.t41).rootId;p.t43=E;return p.delegateYield(p.t38(p.t39,p.t40,p.t42,p.t43),"t44",152);case 152:I=p.t44,i=I[0],j=I[1],D=u(a,i.keys,E,r.gte);case 156:D--;case 157:p.next=111;break;case 159:j=i.prevId;p.t45=j!==void 0;if(!p.t45){p.next=164;break}return p.delegateYield(b.readExn(j),"t46",163);case 163:p.t45=p.t46;case 164:i=p.t45;D=i?i.keys.length-1:-1;p.next=110;break;case 168:case"end":return p.stop()}},p,this)}function a(a,b,c){b===void 0&&(b=32);return{get:function(b){return y(a,c,b)},getWithDefault:function(b,d){return z(a,c,b,d)},has:function(b){return A(a,c,b)},set:function(d,e){return B(a,c,b,d,e)},"delete":function(d){return C(a,c,b,d)},entries:function(b){return D(a,c,b)},clear:function(){return s(c)}}}g["default"]=a}),98);
__d("BPlusTree",["BPlusTreeBase","nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a={},b=void 0,d=0;return{read:c("nativePromiseRegeneratorRuntime").mark(function b(d){return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",a[d]);case 1:case"end":return b.stop()}},b,this)}),readExn:c("nativePromiseRegeneratorRuntime").mark(function b(d){return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:if(!Object.prototype.hasOwnProperty.call(a,d)){b.next=4;break}return b.abrupt("return",a[d]);case 4:throw c("unrecoverableViolation")("expected key","messenger_web_product");case 5:case"end":return b.stop()}},b,this)}),readHeader:c("nativePromiseRegeneratorRuntime").mark(function a(){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",b);case 1:case"end":return a.stop()}},a,this)}),remove:c("nativePromiseRegeneratorRuntime").mark(function b(d){return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:delete a[d];case 1:case"end":return b.stop()}},b,this)}),removeHeader:c("nativePromiseRegeneratorRuntime").mark(function a(){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:b=void 0;case 1:case"end":return a.stop()}},a,this)}),write:c("nativePromiseRegeneratorRuntime").mark(function b(d,e){return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:a[d]=e;case 1:case"end":return b.stop()}},b,this)}),writeHeader:c("nativePromiseRegeneratorRuntime").mark(function a(d){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:b=d;case 1:case"end":return a.stop()}},a,this)}),writeNew:c("nativePromiseRegeneratorRuntime").mark(function b(e){return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:a[d++]=e;return b.abrupt("return",d-1);case 2:case"end":return b.stop()}},b,this)})}}function i(a){var b=a.next();while(!b.done)b=a.next(b.value);return b.value}function a(a,b){b===void 0&&(b=16);var d=c("BPlusTreeBase")(a,b,h()),e;return e={clear:function(){return i(d.clear())},"delete":function(a){return i(d["delete"](a))},entries:function(a){return d.entries(a)},get:function(a){return i(d.get(a))},getWithDefault:function(a,b){return i(d.getWithDefault(a,b))},has:function(a){return i(d.has(a))},set:function(a,b){i(d.set(a,b));return e}}}g["default"]=a}),98);
__d("LSDbKeyComparer",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=[[]];function i(a,b){var d=a===h,e=b===h;if(d&&e)return 0;if(d)return 1;if(e)return-1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;else if(Array.isArray(a)){if(!Array.isArray(b))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");d=a[0];e=b[0];if(d<e)return-1;if(d>e)return 1;d=a[1];e=b[1];if(d<e)return-1;if(d>e)return 1}else if(typeof a==="string"){if(!(typeof b==="string"))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="number"){if(!(typeof b==="number"))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="boolean"){if(!(typeof b==="boolean"))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(!a&&b)return-1;if(a&&!b)return 1}else throw c("unrecoverableViolation")("Unexpected type","messenger_comet");return 0}function a(a,b){for(var a=a,b=b;;a=a.tl,b=b.tl){if(a===0&&b===0)return 0;if(a===0)return-1;if(b===0)return 1;var c=i(a.hd,b.hd);if(c!==0)return c}return 0}g.MAX_KEY=h;g.compareValue=i;g.compareKey=a}),98);
__d("PromiseOrValue",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a instanceof window.Promise&&b instanceof window.Promise)return a.then(function(a){return b.then(function(b){return[a,b]})});if(a instanceof window.Promise)return a.then(function(a){return[a,b]});return b instanceof window.Promise?b.then(function(b){return[a,b]}):[a,b]}function b(a,b){return a instanceof Promise?a.then(b):b(a)}function h(a,b){b=b;while(!0){var d=a(b);if(d instanceof Promise)return d.then(function(b){return b.action==="break"?b.value:h(a,b.value)});if(d.action==="break")return d.value;b=d.value}throw c("unrecoverableViolation")("just for flow","messenger_web_product")}g.all2=a;g.map=b;g.loop=h}),98);
__d("ReQLBounds",["LSDbKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a?{hd:a.hd,tl:h(a.tl,b)}:b}function i(a){return h(a,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})}function j(a,b,c){if(a!=null&&b!=null)return d("LSDbKeyComparer").compareKey(a[1],b[1])*c>0?a[0]:b[0];if(a!=null)return a[0];if(b!=null)return b[0]}function a(a,b){return j((a==null?void 0:a.gt)!=null?[{gt:a.gt},i(a.gt)]:(a==null?void 0:a.gte)!=null?[{gte:a.gte},a.gte]:void 0,(b==null?void 0:b.gt)!=null?[{gt:b.gt},i(b.gt)]:(b==null?void 0:b.gte)!=null?[{gte:b.gte},b.gte]:void 0,1)}function b(a,b){return j((a==null?void 0:a.lt)!=null?[{lt:a.lt},a.lt]:(a==null?void 0:a.lte)!=null?[{lte:a.lte},i(a.lte)]:void 0,(b==null?void 0:b.lt)!=null?[{lt:b.lt},b.lt]:(b==null?void 0:b.lte)!=null?[{lte:b.lte},i(b.lte)]:void 0,-1)}function c(a,b,c){a.forEach(function(a){var e=a[0];a=a[1];var f=(e==null?void 0:e.gt)!=null?d("LSDbKeyComparer").compareKey(b,i(e.gt))>=0:(e==null?void 0:e.gte)!=null?d("LSDbKeyComparer").compareKey(b,e.gte)>0:!0;e=(e==null?void 0:e.lt)!=null?d("LSDbKeyComparer").compareKey(b,e.lt)<0:(e==null?void 0:e.lte)!=null?d("LSDbKeyComparer").compareKey(b,i(e.lte))<=0:!0;if(f&&e)return c(a)})}g.getLowerLimit=a;g.getUpperLimit=b;g.forEachMatchingBounds=c}),98);
__d("ReQLGlobalQueryContext",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){a=a.get(g);return a==null?[]:a}function b(a,b){a.set(g,b)}c={contents:void 0};f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=c}),66);
__d("ReQL",["BPlusTree","LSDbKeyComparer","PromiseOrValue","ReQLBounds","ReQLGlobalQueryContext","nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={bounds:b,filter:f,getKeyRange:m,map:o,take:q};function i(a,b){return a?{hd:a.hd,tl:i(a.tl,b)}:b}function j(a,b){b=b;a=a;while(b){if(!a)throw c("unrecoverableViolation")("unexpected end of key","messenger_web_product");b=b.tl;a=a.tl}return a}function k(a,b){try{var c=d("ReQLGlobalQueryContext").globalQueryContext.contents,e=d("ReQLGlobalQueryContext").getDependencies(b);d("ReQLGlobalQueryContext").setDependencies(b,[]);d("ReQLGlobalQueryContext").globalQueryContext.contents=b;var f,g;try{f=a(),g=d("ReQLGlobalQueryContext").getDependencies(b)}finally{d("ReQLGlobalQueryContext").setDependencies(b,e),d("ReQLGlobalQueryContext").globalQueryContext.contents=c}return[f,g]}catch(c){if(c instanceof Promise)return c.then(function(){return k(a,b)});throw c}}function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduceRight(function(a,b){return{hd:b,tl:a}},0)}function b(a){var b=this;function c(a,b){if(b==null)return a;var c=d("ReQLBounds").getLowerLimit(b,a);b=d("ReQLBounds").getUpperLimit(b,a);if(c!=null&&b!=null)return babelHelpers["extends"]({},c,b);if(c!=null)return c;if(b!=null)return b}return Object.setPrototypeOf({direction:b.direction,iterator:function(d,e){return b.iterator(d,c(a,e))},subscribe:function(d,e){return b.subscribe(d,c(a,e))}},h)}var l=Object.setPrototypeOf({direction:"asc",iterator:function(){return{next:function(){return{done:!0}}}},subscribe:function(){return function(){}}},h);function e(){return l}function f(a){var b=this,e=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(c,f){var g=b.iterator(c,f);return{next:function(b){return d("PromiseOrValue").loop(function(b){return d("PromiseOrValue").map(g.next(b),function(b){if(b.done)return{action:"break",value:b};var c=b.value,f=c[0];c=c[1];if(a(c)){d("ReQLBounds").forEachMatchingBounds(e,f,function(a){a.add(JSON.stringify(f))});return{action:"break",value:b}}d("ReQLBounds").forEachMatchingBounds(e,f,function(a){a["delete"](JSON.stringify(f))});return{action:"continue",value:void 0}})},b)}}},subscribe:function(d,f){var g={},h=new Set();e.set(g,[f,h]);var i=b.subscribe(function(b,e,f){var g;return c("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=JSON.stringify(b);if(!(e.operation==="add"&&a(e.value))){i.next=7;break}h.add(g);i.next=5;return c("nativePromiseRegeneratorRuntime").awrap(d(b,e,f));case 5:i.next=28;break;case 7:if(!(e.operation==="put"&&a(e.value))){i.next=18;break}if(!h.has(g)){i.next=13;break}i.next=11;return c("nativePromiseRegeneratorRuntime").awrap(d(b,e,f));case 11:i.next=16;break;case 13:h.add(g);i.next=16;return c("nativePromiseRegeneratorRuntime").awrap(d(b,{operation:"add",value:e.value},f));case 16:i.next=28;break;case 18:if(!(e.operation==="put"&&h.has(g))){i.next=24;break}h["delete"](g);i.next=22;return c("nativePromiseRegeneratorRuntime").awrap(d(b,{operation:"delete"},f));case 22:i.next=28;break;case 24:if(!(e.operation==="delete"&&h.has(g))){i.next=28;break}h["delete"](g);i.next=28;return c("nativePromiseRegeneratorRuntime").awrap(d(b,e,f));case 28:case"end":return i.stop()}},null,this)},f);return function(){e["delete"](g);return i()}}},h)}function m(){var a=this;for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=c.reduceRight(function(a,b){return{hd:b,tl:a}},0);function g(a){return a.gt!=null?{gt:i(f,a.gt)}:{gte:i(f,a.gte)}}function k(a){return a.lt!=null?{lt:i(f,a.lt)}:{lte:i(f,a.lte)}}function l(a){return a==null?{gte:f,lte:f}:babelHelpers["extends"]({},a.gte!=null||a.gt!=null?g(a):{gte:f},a.lte!=null||a.lt!=null?k(a):{lte:f})}return Object.setPrototypeOf({direction:a.direction,iterator:function(b,c){var e=a.iterator(b,l(c));return{next:function(a){return d("PromiseOrValue").map(e.next(a==null?a:i(f,a)),function(a){return a.done?{done:!0}:{done:!1,value:[j(a.value[0],f),a.value[1]]}})}}},subscribe:function(b,c){return a.subscribe(function(a,c,d){return b(j(a,f),c,d)},l(c))}},h)}function n(a,b){if(a.direction!==b.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:a.direction,iterator:function(e,f){var g=a.iterator(e,f),h=b.iterator(e,f),i=h.next();function j(a){return d("PromiseOrValue").map(i,function(b){var c=b.done?!0:d("LSDbKeyComparer").compareKey(a,b.value[0])<=0;c=c?b:h.next(a);i=c;return c})}return{next:function(a){return d("PromiseOrValue").map(g.next(a),function(a){if(a.done)return{done:!0,value:void 0};var b=a.value;b=b[0];return d("PromiseOrValue").map(j(b),function(b){var e=a.value,f=e[0];e=e[1];if(b.done)return{done:!1,value:[f,[e,void 0]]};b=b.value;var g=b[0];b=b[1];g=d("LSDbKeyComparer").compareKey(f,g);if(g>0)throw c("unrecoverableViolation")("Right iterable should always be equal to or ahead","messenger_web_product");else if(g<0)return{done:!1,value:[f,[e,void 0]]};else return{done:!1,value:[f,[e,b]]}})})}}},subscribe:function(d,e){var f=!0,g=a.subscribe(function(a,e,g){var h,i,j;return c("nativePromiseRegeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return c("nativePromiseRegeneratorRuntime").awrap(b.iterator(g,{gte:a,lte:a}).next());case 2:j=k.sent;if(f){k.next=5;break}return k.abrupt("return");case 5:k.next=7;return c("nativePromiseRegeneratorRuntime").awrap(d(a,e.operation==="add"?{operation:"add",value:[e.value,(h=j.value)==null?void 0:h[1]]}:e.operation==="put"?{operation:"put",value:[e.value,(i=j.value)==null?void 0:i[1]]}:{operation:"delete"},g));case 7:case"end":return k.stop()}},null,this)},e),h=b.subscribe(function(b,e,g){var h;return c("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return c("nativePromiseRegeneratorRuntime").awrap(a.iterator(g,{gte:b,lte:b}).next());case 2:h=i.sent;if(!(!f||h.done)){i.next=5;break}return i.abrupt("return");case 5:i.next=7;return c("nativePromiseRegeneratorRuntime").awrap(d(b,e.operation==="add"?{operation:"add",value:[h.value[1],e.value]}:e.operation==="put"?{operation:"put",value:[h.value[1],e.value]}:{operation:"delete"},g));case 7:case"end":return i.stop()}},null,this)},e);return function(){f=!1,g(),h()}}},h)}function o(a){var b=this,e=new Map();function f(b,d,e,f,h){var i=JSON.stringify(e),j=b.get(i);j==null&&(j=[],b.set(i,j));j.forEach(function(a){return a()});j.length=0;var k=j;h.forEach(function(h){k.push(h.subscribe(function(h,i,j){return c("nativePromiseRegeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return c("nativePromiseRegeneratorRuntime").awrap(g(b,d,e,f,j));case 2:h.next=4;return c("nativePromiseRegeneratorRuntime").awrap(d(e,{operation:"put",value:a(f)},j));case 4:case"end":return h.stop()}},null,this)}))})}function g(b,c,e,g,h){return d("PromiseOrValue").map(k(function(){return a(g)},h),function(a){var d=a[0];a=a[1];f(b,c,e,g,a);return d})}function i(a,b){var c=JSON.stringify(b);if(!a.has(c))return;b=(b=a.get(JSON.stringify(b)))!=null?b:[];b.forEach(function(a){return a()});b.length=0;a["delete"](c)}return Object.setPrototypeOf({direction:b.direction,iterator:function(c,g){var h=b.iterator(c,g);return{next:function(b){return d("PromiseOrValue").map(h.next(b),function(g){if(g.done)return g;g=g.value;var b=g[0],h=g[1];return d("PromiseOrValue").map(d("PromiseOrValue").map(k(function(){return a(h)},c),function(a){var c=a[0],g=a[1];d("ReQLBounds").forEachMatchingBounds(e,b,function(a){var c=a[0];a=a[1];return f(c,a,b,h,g)});return c}),function(a){return{done:!1,value:[b,a]}})})}}},subscribe:function(d,f){var h={},j=new Map();e.set(h,[f,[j,d]]);var k=b.subscribe(function(b,e,f){var h,k,l,m;return c("nativePromiseRegeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.operation==="delete")){n.next=6;break}i(j,b);n.next=4;return c("nativePromiseRegeneratorRuntime").awrap(d(b,e,f));case 4:n.next=24;break;case 6:if(!(e.operation==="add")){n.next=16;break}h=e.value;n.next=10;return c("nativePromiseRegeneratorRuntime").awrap(g(j,d,b,h,f));case 10:k=n.sent;a(h);n.next=14;return c("nativePromiseRegeneratorRuntime").awrap(d(b,{operation:"add",value:k},f));case 14:n.next=24;break;case 16:if(!(e.operation==="put")){n.next=24;break}l=e.value;n.next=20;return c("nativePromiseRegeneratorRuntime").awrap(g(j,d,b,l,f));case 20:m=n.sent;a(l);n.next=24;return c("nativePromiseRegeneratorRuntime").awrap(d(b,{operation:"put",value:m},f));case 24:case"end":return n.stop()}},null,this)},f);return function(){j.forEach(function(a){a.forEach(function(a){return a()})}),e["delete"](h),k()}}},h)}function p(a,b){if(a.direction!==b.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:a.direction,iterator:function(c,e){var f=a.iterator(c,e),g=b.iterator(c,e);function h(a){return d("PromiseOrValue").loop(function(a){var b=a[0];a=a[1];if(b.done||a.done)return{action:"break",value:{done:!0}};var c=b.value,e=c[0];c=c[1];var h=a.value,i=h[0];h=h[1];var j=d("LSDbKeyComparer").compareKey(e,i);if(j>0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(b,g.next(e)),function(a){return{action:"continue",value:a}});else if(j<0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(f.next(i),a),function(a){return{action:"continue",value:a}});return{action:"break",value:{done:!1,value:[e,[c,h]]}}},a)}return{next:function(a){return d("PromiseOrValue").map(d("PromiseOrValue").all2(f.next(a),g.next(a)),h)}}},subscribe:function(d,e){var f=!0;function g(a,b,e,g,h){var i,j,k;return c("nativePromiseRegeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return c("nativePromiseRegeneratorRuntime").awrap(a.iterator(h,{gte:e,lte:e}).next());case 2:i=l.sent;if(!(i.done||!f)){l.next=5;break}return l.abrupt("return");case 5:j=i.value[1];k=g.operation==="add"?{operation:"add",value:b(g.value,j)}:g.operation==="put"?{operation:"put",value:b(g.value,j)}:g;l.next=9;return c("nativePromiseRegeneratorRuntime").awrap(d(e,k,h));case 9:case"end":return l.stop()}},null,this)}var h=a.subscribe(function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return g.apply(void 0,[b,function(a,b){return[a,b]}].concat(c))},e),i=b.subscribe(function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return g.apply(void 0,[a,function(a,b){return[b,a]}].concat(c))},e);return function(){f=!1,h(),i()}}},h)}function q(a){var b=this,e=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(c,f){var g=b.iterator(c,f),h=0;return{next:function(b){if(h>=a)return{done:!0};else return d("PromiseOrValue").map(g.next(b),function(b){b.done||d("ReQLBounds").forEachMatchingBounds(e,b.value[0],function(c){var d=c[0];c=c[1];c.contents<=a&&(d.has(b.value[0])||(c.contents+=1,d.set(b.value[0],void 0)))});h+=1;return b})}}},subscribe:function(f,g){var h={},i=b.direction==="asc"?1:-1,j=c("BPlusTree")(function(a,b){return d("LSDbKeyComparer").compareKey(a,b)*-i}),k={contents:0};e.set(h,[g,[j,k]]);var l=b.subscribe(function(g,l,m){var n,o,p,q;return c("nativePromiseRegeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:o=(n=j.entries().next().value)==null?void 0:n[0];p=o==null?!0:d("LSDbKeyComparer").compareKey(g,o)*i<=0;if(!(l.operation==="delete"&&p)){r.next=18;break}j["delete"](g);r.next=6;return c("nativePromiseRegeneratorRuntime").awrap(f(g,l,m));case 6:r.next=8;return c("nativePromiseRegeneratorRuntime").awrap(b.iterator(m,o==null?void 0:i===1?{gt:o}:{lt:o}).next());case 8:q=r.sent;if(!(!q.done&&e.has(h))){r.next=15;break}j.set(q.value[0],void 0);r.next=13;return c("nativePromiseRegeneratorRuntime").awrap(f(q.value[0],{operation:"add",value:q.value[1]},m));case 13:r.next=16;break;case 15:k.contents-=1;case 16:r.next=38;break;case 18:if(!(l.operation==="add"&&k.contents<a)){r.next=25;break}k.contents+=1;j.set(g,void 0);r.next=23;return c("nativePromiseRegeneratorRuntime").awrap(f(g,l,m));case 23:r.next=38;break;case 25:if(!(l.operation==="add"&&p)){r.next=35;break}if(!(o!=null)){r.next=30;break}j["delete"](o);r.next=30;return c("nativePromiseRegeneratorRuntime").awrap(f(o,{operation:"delete"},m));case 30:j.set(g,void 0);r.next=33;return c("nativePromiseRegeneratorRuntime").awrap(f(g,l,m));case 33:r.next=38;break;case 35:if(!(l.operation==="put"&&p)){r.next=38;break}r.next=38;return c("nativePromiseRegeneratorRuntime").awrap(f(g,l,m));case 38:case"end":return r.stop()}},null,this)},g);return function(){e["delete"](h);return l()}}},h)}function r(a){return Object.setPrototypeOf({direction:"asc",iterator:function(b,c){return a.entries(b,"asc",c)},subscribe:a.subscribe},h)}function s(a){return Object.setPrototypeOf({direction:"desc",iterator:function(b,c){return a.entries(b,"desc",c)},subscribe:a.subscribe},h)}function t(a){var b,d,e;return c("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:b=[];d=a.iterator(new WeakMap());f.next=4;return c("nativePromiseRegeneratorRuntime").awrap(d.next());case 4:e=f.sent;case 5:if(e.done){f.next=12;break}b.push(e.value[1]);f.next=9;return c("nativePromiseRegeneratorRuntime").awrap(d.next());case 9:e=f.sent;f.next=5;break;case 12:return f.abrupt("return",b);case 13:case"end":return f.stop()}},null,this)}function u(a){return c("nativePromiseRegeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return c("nativePromiseRegeneratorRuntime").awrap(t(a));case 2:return b.abrupt("return",b.sent[0]);case 3:case"end":return b.stop()}},null,this)}function v(a){var b,d;return c("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:b=a.iterator(new WeakMap());e.next=3;return c("nativePromiseRegeneratorRuntime").awrap(b.next());case 3:d=e.sent;if(!d.done){e.next=6;break}throw c("unrecoverableViolation")("expected result","messenger_web_product");case 6:return e.abrupt("return",d.value[1]);case 7:case"end":return e.stop()}},null,this)}g.prototype=h;g.key=a;g.empty=e;g.leftJoin=n;g.mergeJoin=p;g.fromTableAscending=r;g.fromTableDescending=s;g.toArray=t;g.first=u;g.firstExn=v}),98);
__d("I64",["bs_caml_format","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])?a:void 0}function b(a){return a}g.mk=c("bs_caml_int64").mk;g.succ=c("bs_caml_int64").succ;g.min_int=c("bs_caml_int64").min_int;g.max_int=c("bs_caml_int64").max_int;g.one=c("bs_caml_int64").one;g.zero=c("bs_caml_int64").zero;g.neg_one=c("bs_caml_int64").neg_one;g.of_int32=c("bs_caml_int64").of_int32;g.to_int32=c("bs_caml_int64").to_int32;g.add=c("bs_caml_int64").add;g.neg=c("bs_caml_int64").neg;g.sub=c("bs_caml_int64").sub;g.lsl_=c("bs_caml_int64").lsl_;g.lsr_=c("bs_caml_int64").lsr_;g.asr_=c("bs_caml_int64").asr_;g.is_zero=c("bs_caml_int64").is_zero;g.mul=c("bs_caml_int64").mul;g.xor=c("bs_caml_int64").xor;g.or_=c("bs_caml_int64").or_;g.and_=c("bs_caml_int64").and_;g.equal_null=c("bs_caml_int64").equal_null;g.equal_undefined=c("bs_caml_int64").equal_undefined;g.equal_nullable=c("bs_caml_int64").equal_nullable;g.to_float=c("bs_caml_int64").to_float;g.of_float=c("bs_caml_int64").of_float;g.div=c("bs_caml_int64").div;g.mod_=c("bs_caml_int64").mod_;g.compare=c("bs_caml_int64").compare;g.float_of_bits=c("bs_caml_int64").float_of_bits;g.bits_of_float=c("bs_caml_int64").bits_of_float;g.div_mod=c("bs_caml_int64").div_mod;g.to_hex=c("bs_caml_int64").to_hex;g.discard_sign=c("bs_caml_int64").discard_sign;g.to_string=c("bs_caml_int64").to_string;g.minus_one=c("bs_int64").minus_one;g.pred=c("bs_int64").pred;g.abs=c("bs_int64").abs;g.lognot=c("bs_int64").lognot;g.of_string_opt=c("bs_int64").of_string_opt;g.equal=c("bs_int64").equal;g.of_string=c("bs_caml_format").caml_int64_of_string;g.cast=a;g.asI64=b}),98);
__d("LSDbKeyComparer.bs",["LSDbKeyComparer"],(function(a,b,c,d,e,f){"use strict";a=b("LSDbKeyComparer").compareKey;c=b("LSDbKeyComparer").MAX_KEY;f.cmp=a;f.maxKey=c}),null);
__d("bs_js_dict",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c in a)return b("bs_caml_option").some(a[c])}var g=function(a,b){delete a[b]};function c(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function d(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=a[b[e]];return d}function e(a){var b={};a=a;while(!0){var c=a;if(!c)return b;var d=c.hd;b[d[0]]=d[1];a=c.tl;continue}}function h(a){var b={},c=a.length;for(var d=0;d<c;++d){var e=a[d];b[e[0]]=e[1]}return b}function i(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0;f<e;++f){var g=d[f];c[g]=a(b[g])}return c}f.get=a;f.unsafeDeleteKey=g;f.entries=c;f.values=d;f.fromList=e;f.fromArray=h;f.map=i}),null);
__d("ReQLBounds.bs",["LSDbKeyComparer.bs","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c){if(!b)return c;if(a<=0)return c;var d=b.hd;if(a===1)return{hd:d,tl:0};else return{hd:d,tl:g(a-1|0,b.tl,c)}}function a(a,c){return g(a,c,{hd:b("LSDbKeyComparer.bs").maxKey,tl:0})}function c(a,c){a=function(a){var b=a.NAME;if(b==="lessThan")return["lt",a.VAL];else if(b==="greaterThan")return["gt",a.VAL];else if(b==="greaterThanOrEqual")return["gte",a.VAL];else return["lte",a.VAL]};var d=c.NAME;if(d!=="range")if(d==="greaterThanOrEqual"||d==="greaterThan")return b("bs_js_dict").fromArray([a(c)]);else return b("bs_js_dict").fromArray([a(c)]);d=c.VAL;return b("bs_js_dict").fromArray([a(d[0]),a(d[1])])}function d(a){var c=a.operation;switch(c){case"add":return{TAG:0,_0:a.value};case"delete":return 0;case"put":return{TAG:1,_0:a.value};default:return b("unrecoverableViolation")("Unexpected operation","messenger_web_product")}}f.concat=g;f.nextKey=a;f.mapBounds=c;f.mapEventToOperation=d}),null);
__d("IntervalList",["FBLogger","LSDbKeyComparer","ReQLBounds.bs","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("must not be null");return a}function a(a,c){var e=b("regeneratorRuntime").mark(k),f=new Map(),g=new Map(),i=new Map();function j(b,c){return c==null?!0:(c.gt!==void 0?a(b,c.gt)>0:c.gte!==void 0?a(b,c.gte)>=0:!0)&&(c.lt!==void 0?a(b,c.lt)<0:c.lte!==void 0?a(b,c.lte)<=0:!0)}function k(a){var h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:h=a,i={hd:d("LSDbKeyComparer").MAX_KEY,tl:0},k=0;case 3:if(!(h!==0&&g.size)){b.next=33;break}k++;l=h;m=h.tl;h.tl=k<c?i:0;b.prev=8;n=g.get(JSON.stringify(a));if(!(n!=null)){b.next=27;break}o=n,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 12:if(!p){b.next=18;break}if(!(q>=o.length)){b.next=15;break}return b.abrupt("break",27);case 15:r=o[q++];b.next=22;break;case 18:q=o.next();if(!q.done){b.next=21;break}return b.abrupt("break",27);case 21:r=q.value;case 22:s=r;b.next=25;return s;case 25:b.next=12;break;case 27:b.prev=27;l.tl=m;return b.finish(27);case 30:h=l.tl;b.next=3;break;case 33:t=f.entries(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 34:if(!u){b.next=40;break}if(!(v>=t.length)){b.next=37;break}return b.abrupt("break",52);case 37:w=t[v++];b.next=44;break;case 40:v=t.next();if(!v.done){b.next=43;break}return b.abrupt("break",52);case 43:w=v.value;case 44:x=w;y=x[0];z=x[1];if(!(f.has(y)&&j(a,z))){b.next=50;break}b.next=50;return y;case 50:b.next=34;break;case 52:case"end":return b.stop()}},e,this,[[8,,27,30]])}function l(a){var b=i.get(a);if(b!=null){i["delete"](a);var c=h(g.get(b));c["delete"](a);c.size===0&&g["delete"](b)}else f["delete"](a)}function m(a,b){var e;if(a&&a.gte!=null&&a.lte!=null&&(e=JSON.stringify(d("ReQLBounds.bs").nextKey(c,a.gte)))===JSON.stringify(a.lte)){var h=g.get(e);h==null&&(h=new Set(),g.set(e,h));h.add(b);i.set(b,e)}else f.set(b,a)}return{"delete":l,findIntersecting:k,set:m}}g["default"]=a}),98);
__d("LSStorage",["IntervalList","LSDbKeyComparer","cr:181","killswitch","nullthrows","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,d,e){a=a.tableNames[b];b=a.indexes;a=a.primaryKeyIds;a=e==null?a:b[e];return a.reduceRight(function(a,b){if(d[b]!==void 0||e!=null)return{hd:d[b],tl:a};throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")},0)}function a(a,b){while(a!==0&&b!==0){if(a.hd!==b.hd&&!(Array.isArray(a.hd)&&Array.isArray(b.hd)&&a.hd.length===b.hd.length&&a.hd.every(function(a,c){return a===b.hd[c]})))return!1;a=a.tl;b=b.tl}return a===0&&b===0}function e(a){var e=new Map(),f=new Map();function g(a,b,c,d){return Promise.all(Array.from(a.findIntersecting(c)).map(function(a){return a(c,d,b)}))}function i(b){return c("nullthrows")((e.has(b)?e:e.set(b,[c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].primaryKeyIds.length),new Map()])).get(b))}function j(b,e){var f=i(b);f[0];f=f[1];return c("nullthrows")((f.has(e)?f:f.set(e,c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].indexes[e].length))).get(e))}function k(b,e,f,i,j,k){var l=g.bind(null,b,k);b=f==null?void 0:h(a,e,f,j);var m=i==null?void 0:h(a,e,i,j);if(m==null&&b!=null)return l(b,{operation:"delete",prevValue:f});if(b==null&&m!=null)return l(m,{operation:"add",value:c("nullthrows")(i)});return b!=null&&m!=null?d("LSDbKeyComparer").compareKey(b,m)===0?l(b,{operation:"put",value:c("nullthrows")(i),prevValue:f}):l(b,{operation:"delete",prevValue:f}).then(function(){return l(m,{operation:"add",value:c("nullthrows")(i)})}):Promise.resolve()}function l(a,d,e,f,g){g===void 0&&(g=!1);!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&g&&b("cr:181")!=null&&b("cr:181").postMessage("notifyTable",[a,d,e]);g=i(a);var h=g[0],j=g[1];return k(h,a,d,e,null,f).then(function(){return Promise.all(Array.from(j.entries()).map(function(b){var c=b[0];b=b[1];return k(b,a,d,e,c,f)}).filter(function(a){return a!=null}))})}function m(a){a===void 0&&(a=!1),!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&a&&b("cr:181")!=null&&b("cr:181").postMessage("notifyCommit"),f.forEach(function(a){return a()})}!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&b("cr:181")!=null&&(b("cr:181").onEventReceive("notifyTable",function(a){var b=a[0],d=a[1];a=a[2];var e=new WeakMap();c("promiseDone")(l(b,d,a,e,!1))}),b("cr:181").onEventReceive("notifyCommit",function(a){m(!1)}));return{subscribeTable:function(a,b,c){a=i(a);var d=a[0],e=!1,f=function(a,c,d){return e?Promise.resolve():b(a,c,d)};d.set(c,f);return function(){e=!0,d["delete"](f)}},subscribeIndex:function(a,b,c,d){var e=j(a,b),f=!1,g=function(a,b,d){return f?Promise.resolve():c(a,b,d)};e.set(d,g);return function(){f=!0,e["delete"](g)}},notifyTableAndIndexSubscribers:l,subscribeToCommit:function(a){f.set(a,a);return function(){f["delete"](a)}},notifyCommit:m,dispose:function(){e.clear(),f.clear()}}}g.searchKey=h;g.areKeysEqual=a;g.createSubscriptionManager=e}),98);
__d("LSTableDefaults.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c={syncStatus:(a=b("bs_caml_int64")).zero,sendSyncParams:!1,minTimeToSyncTimestampMs:a.zero,canIgnoreTimestamp:!1,lastSyncCompletedTimestampMs:a.zero,syncChannel:a.one};d={enqueueTimestampMs:a.zero,firstExecutedTimestampMs:a.zero,failureCount:a.zero,minTimeToSyncTimestampMs:a.zero,pluginType:a.zero};e={isMessengerUser:!1,isMemorialized:!1,blockedByViewerStatus:a.zero,rank:a.zero,contactType:a.zero,contactTypeExact:a.zero,canViewerMessage:!0,authorityLevel:a.zero,optimisticBlockedByViewerStatus:a.zero,optimisticBlockedByViewerStatusTimestampMs:a.zero,contactReachabilityStatusType:a.zero,waConnectStatus:a.zero,capabilities2:a.zero};b={timestampMs:a.zero,authorityLevel:a.zero};var g={lastActivityTimestampMs:a.zero,lastReadWatermarkTimestampMs:a.zero,removeWatermarkTimestampMs:a.zero,muteExpireTimeMs:a.zero,ongoingCallState:a.zero,snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,capabilities:a.zero,isCustomThreadPicture:!1,authorityLevel:a.zero,capabilities2:a.zero,muteCallsExpireTimeMs:a.zero,unsendLimitMs:a.zero,threadInvitesEnabled:a.zero,threadInvitesEnabledV2:a.zero},h={minThreadKey:a.zero,minLastActivityTimestampMs:a.zero,maxThreadKey:a.zero,maxLastActivityTimestampMs:a.zero,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},i={timestampMs:a.zero,primarySortKey:a.zero,secondarySortKey:a.zero,isAdminMessage:!1,sendStatus:a.zero,sendStatusV2:a.zero,isUnsent:!1,replyStatus:a.zero,replyAttachmentType:a.zero,hasQuickReplies:!1,textHasLinks:!1,viewFlags:a.zero,displayedContentTypes:a.one,quickReplyType:a.zero,authorityLevel:a.zero,unsentTimestampMs:a.zero},j={isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},k={readWatermarkTimestampMs:a.zero,deliveredWatermarkTimestampMs:a.zero,authorityLevel:a.zero,readActionTimestampMs:a.zero,groupParticipantJoinState:a.zero},l={timestampMs:a.zero,attachmentType:a.zero,hasMedia:!1,isSharable:!1,hasXma:!1,attachmentIndex:a.zero,authorityLevel:a.zero},m={mediaGroup:a.zero,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},n={attachmentIndex:a.zero},o={authorityLevel:a.zero},p={timestampMs:a.zero,showAdChoiceIcon:!1},q={ctaType:a.zero},r={timestampMs:a.zero},s={pollType:a.zero},t={minThreadKey:a.zero,minLastActivityTimestampMs:a.zero,maxThreadKey:a.zero,maxLastActivityTimestampMs:a.zero,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1,folderName:""},u={capabilities:a.zero},v={minThreadKey:a.zero,minLastActivityTimestampMs:a.zero,isLoadingBefore:!1,hasMoreBefore:!1},w={lastAccessedTimestampMs:a.zero},x={authorityLevel:a.zero},y={canAnonymousUsersJoin:a.zero},z={timestampMs:a.zero},A={pageNum:a.zero,readState:a.zero},B={authorityLevel:a.zero},C={interactionType:a.one,authorityLevel:a.zero},D={authorityLevel:a.zero},E={shouldShowAdChoice:!1},F={authorityLevel:a.zero},G={authorityLevel:a.zero,encryptionVersion:a.zero,revisionVersion:a.zero},H={authorityLevel:a.zero},I={authorityLevel:a.zero},J={virtualDeviceType:a.one},K={virtualDeviceType:a.one};a={authorityLevel:a.zero};var L={isMigrated:!1,showOpenMessageHistory:!1};c={sync_groups:c,pending_tasks:d,contacts:e,reactions:b,threads:g,threads_ranges_v2__generated:h,messages:i,messages_ranges_v2__generated:j,participants:k,attachments:l,attachments_ranges_v2__generated:m,attachment_items:n,group_membership_approval_requests:o,admin_message_ctas:p,thread_nullstate:q,messages_status:r,polls:s,filtered_threads_ranges_v2__generated:t,community_folders:u,inbox_threads_ranges:v,universal_search_recent_searches:w,contact_upload_settings:x,video_chat_links_joining:y,transaction_history:z,story_buckets:A,stories:B,story_viewers:C,story_reactions:D,story_ad_unit:E,story_overlays:F,secure_encrypted_backups_client_state:G,secure_encrypted_backups_epochs:H,encrypted_backups:I,secure_encrypted_backups_generated_recovery_code:J,encrypted_backups_virtual_devices:K,encrypted_backups_metadata:a,cutover_threads:L};f.Defaults=c}),null);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!=="string")return null}return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string",tableName:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"?null:{data:e,indexName:a.indexName,tableName:a.tableName}}function b(a,b){if(a==null)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}function d(a){return{indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName}}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStorePersistence",["PromiseOrValue","nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={};function i(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function j(b){if(b==null)return b;var c=Object.getOwnPropertyNames(b),a={},d,e;for(d=0;d<c.length;d++)e=b[c[d]],a[c[d]]=Array.isArray(e)?[].concat(e):e;return a}function a(a){return{clearCache:a.clearCache,close:a.close,createTransaction:function(){var b=new Map();return{flush:function(){return c("nativePromiseRegeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return c("nativePromiseRegeneratorRuntime").awrap(a.flush(b));case 2:case"end":return d.stop()}},null,this)},table:function(e){function f(b,c){var d=k.get(c);if(d===h)return void 0;return d!==void 0?d:a.get(b,e,c)}function g(a,b){return d("PromiseOrValue").map(f(a,b),function(a){if(a===void 0)throw c("unrecoverableViolation")("Got unexpected undefined","messenger_web_product");return a})}var k=i(b,e,function(){return new Map()});function l(a,b){return{read:c("nativePromiseRegeneratorRuntime").mark(function b(d){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:e=f(a,d);if(!(e instanceof window.Promise)){b.next=7;break}b.next=4;return e;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=e;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},b,this)}),readExn:c("nativePromiseRegeneratorRuntime").mark(function b(d){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:e=g(a,d);if(!(e instanceof window.Promise)){b.next=7;break}b.next=4;return e;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=e;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},b,this)}),readHeader:c("nativePromiseRegeneratorRuntime").mark(function d(){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:e=f(a,b);if(!(e instanceof window.Promise)){c.next=7;break}c.next=4;return e;case 4:c.t0=c.sent;c.next=8;break;case 7:c.t0=e;case 8:return c.abrupt("return",c.t0);case 9:case"end":return c.stop()}},d,this)}),remove:c("nativePromiseRegeneratorRuntime").mark(function a(b){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:k.set(b,h);case 1:case"end":return a.stop()}},a,this)}),removeHeader:c("nativePromiseRegeneratorRuntime").mark(function a(){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:k.set(b,h);case 1:case"end":return a.stop()}},a,this)}),write:c("nativePromiseRegeneratorRuntime").mark(function a(b,d){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:k.set(b,d);case 1:case"end":return a.stop()}},a,this)}),writeHeader:c("nativePromiseRegeneratorRuntime").mark(function a(d){return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:k.set(b,d);case 1:case"end":return a.stop()}},a,this)}),writeNew:c("nativePromiseRegeneratorRuntime").mark(function b(e){var g;return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:g=d("PromiseOrValue").map(f(a,"nextId"),function(a){a===void 0&&(a=0);k.set("nextId",a+1);k.set(a,e);return a});if(!(g instanceof window.Promise)){b.next=7;break}b.next=4;return g;case 4:b.t0=b.sent;b.next=8;break;case 7:b.t0=g;case 8:return b.abrupt("return",b.t0);case 9:case"end":return b.stop()}},b,this)})}}return{getBPlusTreeStore:l,incrementSeed:function(a,b){return d("PromiseOrValue").map(f(a,"seed"),function(a){a===void 0&&(a=0);k.set("seed",Math.max(a,b||0)+1);return b===void 0?a:b})},readData:c("nativePromiseRegeneratorRuntime").mark(function a(b,d){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:e=f(b,d);if(!(e instanceof window.Promise)){a.next=7;break}a.next=4;return e;case 4:a.t0=a.sent;a.next=8;break;case 7:a.t0=e;case 8:return a.abrupt("return",a.t0);case 9:case"end":return a.stop()}},a,this)}),readDataExn:c("nativePromiseRegeneratorRuntime").mark(function a(b,d){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:e=g(b,d);if(!(e instanceof window.Promise)){a.next=7;break}a.next=4;return e;case 4:a.t0=a.sent;a.next=8;break;case 7:a.t0=e;case 8:return a.abrupt("return",a.t0);case 9:case"end":return a.stop()}},a,this)}),readSeed:function(a){return d("PromiseOrValue").map(f(a,"seed"),function(a){a===void 0&&(a=0);return a})},remove:function(a,b){k.set(b,h)},writeData:function(a,b,c){k.set(b,j(c))},writeNewData:function(a,b){return d("PromiseOrValue").map(f(a,"nextId"),function(a){a===void 0&&(a=0);k.set("nextId",a+1);k.set(a,j(b));return a})}}}}},releaseLockIfNeeded:a.releaseLockIfNeeded,waitForLock:a.waitForLock}}g.sentinelDeleted=h;g.createDbStore=a}),98);
__d("ReStoreTransactionLock",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={chainPromiseOrValue:function(a){return a(h)}};a=function(){function a(){this.lock=null}var b=a.prototype;b.chainPromiseOrValue=function(a){var b=this;if(!c("gkx")("3174"))return h.chainPromiseOrValue(a);var d=this.lock;if(d==null){var e=a(h);if(e instanceof window.Promise)d=e;else return e}else d=d.then(function(){return a(h)});var f=d.then(function(a){b.lock===f&&(b.lock=null);return a})["finally"](function(a){b.lock===f&&(b.lock=null)});this.lock=f;return f};return a}();g["default"]=a}),98);
__d("ReStore",["BPlusTreeBase","I64","LSDbKeyComparer","LSStorage","LSTableDefaults.bs","ReStoreIndexMetadata","ReStorePersistence","ReStoreTransactionLock","gkx","nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"Transaction has finished")||this}return b}(babelHelpers.wrapNativeSuper(Error));function h(a){a=d("I64").cast(a);if(a===void 0)throw c("unrecoverableViolation")("Expected int64","messenger_web_product");return d("I64").to_float(a)}function i(a,b){function d(b){if(b.done)return b.value;if(!(b.value instanceof Promise))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function j(a){return{next:c("nativePromiseRegeneratorRuntime").mark(function b(d){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:e=a.next(d);case 1:if(!(e.value instanceof window.Promise)){b.next=9;break}b.t0=a;b.next=5;return e.value;case 5:b.t1=b.sent;e=b.t0.next.call(b.t0,b.t1);b.next=1;break;case 9:return b.abrupt("return",e);case 10:case"end":return b.stop()}},b,this)})}}function k(a,b){var c=j(a);return{next:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return b.chainPromiseOrValue(function(){return i(c.next(a))})})}}function l(a,b){var d=c("LSTableDefaults.bs").Defaults[b.name];return!d?a:Object.keys(d).reduce(function(a,b){Object.prototype.hasOwnProperty.call(a,b)||(a[b]=d[b]);return a},babelHelpers["extends"]({},a))}function m(a,b,e){return c("BPlusTreeBase")(d("LSDbKeyComparer").compareKey,16,b.getBPlusTreeStore(a,e==null?"root":"index("+e+")"))}function n(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a,e,f){var g=d("ReStorePersistence").createDbStore(a),o=b("LSStorage").searchKey.bind(null,f),p=Promise.resolve(),q=!1,r=new Map();function s(a,b,d,e,f){var g,h,j;return c("nativePromiseRegeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:g=a.table(d);h=m(b,g,e);k.next=4;return c("nativePromiseRegeneratorRuntime").awrap(i(h.getWithDefault(f,void 0)));case 4:j=k.sent;if(!(j===void 0)){k.next=7;break}return k.abrupt("return",void 0);case 7:return k.abrupt("return",i(g.readDataExn(b,j)));case 8:case"end":return k.stop()}},null,this)}function t(a,b,d,e,f){var g;return c("nativePromiseRegeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return c("nativePromiseRegeneratorRuntime").awrap(s(a,b,d,e,f));case 2:g=h.sent;if(!(g===void 0)){h.next=5;break}return h.abrupt("return",void 0);case 5:return h.abrupt("return",o(d,g));case 6:case"end":return h.stop()}},null,this)}function u(a,b,c){return!b||a<=0?c:{hd:b.hd,tl:a===1?0:u(a-1,b.tl,c)}}function v(a,b){if(a==null)return void 0;a=babelHelpers["extends"]({},a);a.gt!=null&&(a.gt=u(b,a.gt,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0}));a.lte!=null&&(a.lte=u(b,a.lte,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0}));return a}function w(a,b,d,e,g,h,i){return k(c("nativePromiseRegeneratorRuntime").mark(function i(){var k,l,n,o,p,q,r;return c("nativePromiseRegeneratorRuntime").wrap(function(c){while(1)switch(c.prev=c.next){case 0:k=a.table(d);l=m(b,k,e);n=j(l.entries(babelHelpers["extends"]({},v(h,(e===void 0?f.tableNames[d].primaryKeyIds:f.tableNames[d].indexes[e]).length),{dir:g})));return c.delegateYield(n.next(),"t0",4);case 4:o=c.t0;case 5:if(o.done){c.next=18;break}p=o.value,q=p[0],r=p[1];c.t1=n;c.t2=q;return c.delegateYield(k.readDataExn(b,r),"t3",10);case 10:c.t4=c.t3;c.next=13;return[c.t2,c.t4];case 13:c.t5=c.sent;return c.delegateYield(c.t1.next.call(c.t1,c.t5),"t6",15);case 15:o=c.t6;c.next=5;break;case 18:case"end":return c.stop()}},i,this)})(),i)}function x(a,b,e){var g,h;return c("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=f.tableNames[e].autoIncrement;if(g){i.next=3;break}throw c("unrecoverableViolation")("only supported for auto-incrementing tables","messenger_web_product");case 3:i.next=5;return c("nativePromiseRegeneratorRuntime").awrap(a.table(e).readSeed(b));case 5:h=i.sent;if(!(h===void 0)){i.next=8;break}throw c("unrecoverableViolation")("unexpected undefined autoIncrementSeed","messenger_web_product");case 8:return i.abrupt("return",d("I64").of_float(h));case 9:case"end":return i.stop()}},null,this)}function y(a,b){var e=new(c("ReStoreTransactionLock"))();function g(a,c,d,e){a=JSON.stringify([a,c]);c=b.get(a);b.set(a,[c==null?d:c[0],e])}function j(b,e,g,h,i){var k,l,m,q,r,s,t,u,v,x;return c("nativePromiseRegeneratorRuntime").async(function(y){while(1)switch(y.prev=y.next){case 0:k=function(a,b){var c=[],e=a;while(e!==0)c.push(e.hd),e=e.tl;return c.length>=b?a:c.reduceRight(function(a,b){return{hd:b,tl:a}},{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})};if(!(h!=null&&d("LSDbKeyComparer").compareKey(g,h)===0)){y.next=3;break}return y.abrupt("return");case 3:(l=f.tableNames[e],m=l.cascadeUpdates,q=l.primaryKeyIds),r=function(){var e,l,d,m,r,x,y,z,A,B,C,D,E,F,G,H;return c("nativePromiseRegeneratorRuntime").async(function(I){while(1)switch(I.prev=I.next){case 0:if(!t){I.next=6;break}if(!(u>=s.length)){I.next=3;break}return I.abrupt("return","break");case 3:v=s[u++];I.next=10;break;case 6:u=s.next();if(!u.done){I.next=9;break}return I.abrupt("return","break");case 9:v=u.value;case 10:e=v;l=e.indexName;d=e.tableName;m=f.tableNames[d],r=m.indexes,x=m.primaryKeyIds;y=l==null?x:r[l];z={gte:g,lte:k(g,y.length)};A=w(a,b,d,l,"asc",z,i);I.next=19;return c("nativePromiseRegeneratorRuntime").awrap(A.next());case 19:B=I.sent,C=[];case 21:if(B.done){I.next=28;break}C.push(B.value);I.next=25;return c("nativePromiseRegeneratorRuntime").awrap(A.next());case 25:B=I.sent;I.next=21;break;case 28:D=0;case 29:if(!(D<C.length)){I.next=49;break}E=C[D];E[0];F=E[1];G=o(d,F);if(!(h===void 0)){I.next=41;break}I.next=37;return c("nativePromiseRegeneratorRuntime").awrap(p(b,d,G));case 37:I.next=39;return c("nativePromiseRegeneratorRuntime").awrap(j(b,d,G,void 0,i));case 39:I.next=46;break;case 41:H=q.reduce(function(a,b,c){b=a[0];a=a[1];if(!a)return[b,a];b[y[c]]=a.hd;return[b,a.tl]},[babelHelpers["extends"]({},F),h])[0];I.next=44;return c("nativePromiseRegeneratorRuntime").awrap(n(b,d,G,H,i));case 44:I.next=46;return c("nativePromiseRegeneratorRuntime").awrap(j(b,d,G,o(d,H),i));case 46:D++;I.next=29;break;case 49:case"end":return I.stop()}},null,this)},(s=m,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 6:y.next=8;return c("nativePromiseRegeneratorRuntime").awrap(r());case 8:x=y.sent;if(!(x==="break")){y.next=11;break}return y.abrupt("break",13);case 11:y.next=6;break;case 13:case"end":return y.stop()}},null,this)}function k(b,e,h,j){var k,n,p,s,t,v,w,x,y,z,A,B,C,D,E,F;return c("nativePromiseRegeneratorRuntime").async(function(G){while(1)switch(G.prev=G.next){case 0:k=a.table(e);n=m(b,k);p=f.tableNames[e];s=o(e,h);t=q(Object.keys(p.indexes),e,h);v={};G.next=8;return c("nativePromiseRegeneratorRuntime").awrap(i(n.getWithDefault(s,void 0)));case 8:w=G.sent;y=h;if(!(w!==void 0)){G.next=18;break}G.next=13;return c("nativePromiseRegeneratorRuntime").awrap(i(k.readDataExn(b,w)));case 13:x=G.sent;v=q(Object.keys(p.indexes),e,x);k.writeData(b,w,h);G.next=26;break;case 18:if(!p.autoIncrement){G.next=20;break}throw c("unrecoverableViolation")("Id must not be specified for new record when table has an autoincrementing primary key","messenger_web_product");case 20:y=l(h,p);G.next=23;return c("nativePromiseRegeneratorRuntime").awrap(k.writeNewData(b,y));case 23:w=G.sent;G.next=26;return c("nativePromiseRegeneratorRuntime").awrap(i(n.set(s,w)));case 26:z=Object.keys(t);for(A=0;A<z.length;A++)B=z[A],v[B]!==void 0&&d("LSDbKeyComparer").compareKey(v[B],t[B])===0&&(delete t[B],delete v[B]);G.next=30;return c("nativePromiseRegeneratorRuntime").awrap(r(b,e,j,t));case 30:G.next=32;return c("nativePromiseRegeneratorRuntime").awrap(u(b,e,w,t));case 32:C=Object.keys(v),D=0;case 34:if(!(D<C.length)){G.next=42;break}E=C[D];F=m(b,k,E);G.next=39;return c("nativePromiseRegeneratorRuntime").awrap(i(F["delete"](v[E])));case 39:D++;G.next=34;break;case 42:g(e,s,x,y);case 43:case"end":return G.stop()}},null,this)}function n(a,b,e,f,g){var h;return c("nativePromiseRegeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:h=o(b,f);if(d("LSStorage").areKeysEqual(e,h)){i.next=4;break}i.next=4;return c("nativePromiseRegeneratorRuntime").awrap(p(a,b,e));case 4:i.next=6;return c("nativePromiseRegeneratorRuntime").awrap(k(a,b,f,g));case 6:case"end":return i.stop()}},null,this)}function p(b,d,e){var h,j,k,l,n,p,q,r,s,t;return c("nativePromiseRegeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:h=a.table(d);j=m(b,h);k=f.tableNames[d];u.next=5;return c("nativePromiseRegeneratorRuntime").awrap(i(j.getWithDefault(e,void 0)));case 5:l=u.sent;if(!(l!==void 0)){u.next=27;break}u.next=9;return c("nativePromiseRegeneratorRuntime").awrap(i(h.readDataExn(b,l)));case 9:n=u.sent;if(!Object.keys(k.indexes).length){u.next=23;break}p=Object.keys(k.indexes);q=0;case 13:if(!(q<p.length)){u.next=23;break}r=p[q];s=o(d,n,r);if(!(s!=null)){u.next=20;break}t=m(b,h,r);u.next=20;return c("nativePromiseRegeneratorRuntime").awrap(i(t["delete"](s)));case 20:q++;u.next=13;break;case 23:u.next=25;return c("nativePromiseRegeneratorRuntime").awrap(i(j["delete"](e)));case 25:h.remove(b,l),g(d,e,n,void 0);case 27:case"end":return u.stop()}},null,this)}function q(a,b,c){return a.reduce(function(a,d){var e=o(b,c,d);a[d]=e;return a},{})}function r(b,d,e,f){var g,h,k,l,n,q,r,s,t;return c("nativePromiseRegeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:g=a.table(d),h=new Set(),k=Object.keys(f),l=0;case 4:if(!(l<k.length)){u.next=26;break}n=k[l];q=m(b,g,n);r=f[n];u.next=10;return c("nativePromiseRegeneratorRuntime").awrap(i(q.getWithDefault(r)));case 10:s=u.sent;if(!(s!=null&&!h.has(s))){u.next=23;break}u.t0=o;u.t1=d;u.next=16;return c("nativePromiseRegeneratorRuntime").awrap(i(g.readDataExn(b,s)));case 16:u.t2=u.sent;t=u.t0(u.t1,u.t2);u.next=20;return c("nativePromiseRegeneratorRuntime").awrap(p(b,d,t));case 20:u.next=22;return c("nativePromiseRegeneratorRuntime").awrap(j(b,d,t,void 0,e));case 22:h.add(s);case 23:l++;u.next=4;break;case 26:case"end":return u.stop()}},null,this)}function u(b,d,e,f){var g,h,j,k,l,n;return c("nativePromiseRegeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:g=a.table(d),h=Object.keys(f),j=0;case 3:if(!(j<h.length)){o.next=12;break}k=h[j];l=m(b,g,k);n=f[k];o.next=9;return c("nativePromiseRegeneratorRuntime").awrap(i(l.set(n,e)));case 9:j++;o.next=3;break;case 12:case"end":return o.stop()}},null,this)}function v(b,e,j,k){var n,p,s,t,v,w,x,y,z;return c("nativePromiseRegeneratorRuntime").async(function(A){while(1)switch(A.prev=A.next){case 0:n=a.table(e);p=m(b,n);s=f.tableNames[e];if(!s.autoIncrement){A.next=11;break}t=j[f.tableNames[e].primaryKeyIds[0]];A.t0=d("I64");A.next=8;return c("nativePromiseRegeneratorRuntime").awrap(n.incrementSeed(b,t===void 0?t:h(t)));case 8:A.t1=A.sent,v=A.t0.of_float.call(A.t0,A.t1),j[f.tableNames[e].primaryKeyIds[0]]=v;case 11:w=l(j,s);x=o(e,w);if(!(x==null)){A.next=15;break}throw new Error("Evaluating the object store's key path did not yield a value");case 15:A.next=17;return c("nativePromiseRegeneratorRuntime").awrap(i(p.has(x)));case 17:if(A.sent){A.next=29;break}y=q(Object.keys(s.indexes),e,w);A.next=21;return c("nativePromiseRegeneratorRuntime").awrap(r(b,e,k,y));case 21:A.next=23;return c("nativePromiseRegeneratorRuntime").awrap(n.writeNewData(b,w));case 23:z=A.sent;A.next=26;return c("nativePromiseRegeneratorRuntime").awrap(i(p.set(x,z)));case 26:A.next=28;return c("nativePromiseRegeneratorRuntime").awrap(u(b,e,z,y));case 28:g(e,x,void 0,w);case 29:case"end":return A.stop()}},null,this)}return{table:function(b){return{add:function(a){return e.chainPromiseOrValue(function(c){return v(new WeakMap(),b,a,c)})},"delete":function(a){return e.chainPromiseOrValue(function(d){var e;return c("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=new WeakMap();f.next=3;return c("nativePromiseRegeneratorRuntime").awrap(p(e,b,a));case 3:f.next=5;return c("nativePromiseRegeneratorRuntime").awrap(j(e,b,a,void 0,d));case 5:case"end":return f.stop()}},null,this)})},deleteThenInsert:function(a){return e.chainPromiseOrValue(function(d){var e;return c("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=new WeakMap();f.next=3;return c("nativePromiseRegeneratorRuntime").awrap(k(e,b,a,d));case 3:f.next=5;return c("nativePromiseRegeneratorRuntime").awrap(j(e,b,o(b,a),void 0,d));case 5:case"end":return f.stop()}},null,this)})},entries:function(c,d,f){d===void 0&&(d="asc");return w(a,c,b,void 0,d,f,e)},get:function(c,d){d===void 0&&(d=new WeakMap());return e.chainPromiseOrValue(function(){return s(a,d,b,void 0,c)})},index:function(c){return{entries:function(d,f,g){f===void 0&&(f="asc");return w(a,d,b,c,f,g,e)},get:function(d){return e.chainPromiseOrValue(function(){return s(a,new WeakMap(),b,c,d)})},getKey:function(d){return t(a,new WeakMap(),b,c,d)}}},peekNextAutoIncrementId:function(){return x(a,new WeakMap(),b)},put:function(a){return e.chainPromiseOrValue(function(d){var e;return c("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=new WeakMap();f.next=3;return c("nativePromiseRegeneratorRuntime").awrap(k(e,b,a,d));case 3:case"end":return f.stop()}},null,this)})},upsert:function(a,d){return e.chainPromiseOrValue(function(e){var f;return c("nativePromiseRegeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:f=new WeakMap();g.next=3;return c("nativePromiseRegeneratorRuntime").awrap(n(f,b,a,d,e));case 3:g.next=5;return c("nativePromiseRegeneratorRuntime").awrap(j(f,b,a,o(b,d),e));case 5:case"end":return g.stop()}},null,this)})}}}}}function z(a,b){var d=new Map();return new Promise(function(b,f){p=p.then(g.waitForLock).then(function(){var h,i,j,k,l,m,n,o,p,r,s,t,u,v;return c("nativePromiseRegeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:w.prev=0;q=!0;h=g.createTransaction();w.next=5;return c("nativePromiseRegeneratorRuntime").awrap(a(y(h,d)));case 5:i=w.sent;j=new WeakMap();w.next=9;return c("nativePromiseRegeneratorRuntime").awrap(h.flush());case 9:k=d,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 10:if(!l){w.next=16;break}if(!(m>=k.length)){w.next=13;break}return w.abrupt("break",30);case 13:n=k[m++];w.next=20;break;case 16:m=k.next();if(!m.done){w.next=19;break}return w.abrupt("break",30);case 19:n=m.value;case 20:o=n;p=o[0];r=o[1];s=r[0];t=r[1];u=JSON.parse(p),v=u[0],u[1];w.next=28;return c("nativePromiseRegeneratorRuntime").awrap(e.notifyTableAndIndexSubscribers(v,s,t,j,!0));case 28:w.next=10;break;case 30:b(i);w.next=36;break;case 33:w.prev=33,w.t0=w["catch"](0),f(w.t0);case 36:e.notifyCommit(!0),q=!1;case 38:case"end":return w.stop()}},null,this,[[0,33]])}).then(g.releaseLockIfNeeded)})}if(c("gkx")("4547")){var A=function(a){var b,e,f,g,h,i,j,k,l,m,n,o,p,q;return c("nativePromiseRegeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:b=a.table(d("ReStoreIndexMetadata").indicesTableName);e={};f=new WeakMap();g=b.entries(f);r.next=6;return c("nativePromiseRegeneratorRuntime").awrap(g.next());case 6:h=r.sent,i=[];case 8:if(h.done){r.next=15;break}i.push(h.value);r.next=12;return c("nativePromiseRegeneratorRuntime").awrap(g.next());case 12:h=r.sent;r.next=8;break;case 15:j=0;case 16:if(!(j<i.length)){r.next=30;break}k=i[j];l=k[0];m=k[1];if(!(l!=null)){r.next=27;break}o=d("ReStoreIndexMetadata").tryParseIndexData(m);if(!(o==null)){r.next=24;break}return r.abrupt("continue",27);case 24:(p=o.indexName,q=o.tableName),e[q]=(n=e[q])!=null?n:{},e[q][p]={index:o.data,key:l};case 27:j++;r.next=16;break;case 30:return r.abrupt("return",e);case 31:case"end":return r.stop()}},null,this)},B=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return c("nativePromiseRegeneratorRuntime").async(function(w){while(1)switch(w.prev=w.next){case 0:w.next=2;return c("nativePromiseRegeneratorRuntime").awrap(A(a));case 2:e=w.sent;f={};for(g in b.tableNames){h=b.tableNames[g];for(i in h.indexes)k=h.indexes[i],l=(j=e[g])==null?void 0:j[i],d("ReStoreIndexMetadata").indicesDiffer(l==null?void 0:l.index,k)&&(f[g]=(m=f[g])!=null?m:{},f[g][i]=k)}n={};for(o in e){p=e[o];for(q in p)t=p[q],u=(r=b.tableNames[o])==null?void 0:(s=r.indexes)==null?void 0:s[q],u==null&&(n[o]=(v=n[o])!=null?v:{},n[o][q]=t)}return w.abrupt("return",{toRemove:n,toUpdate:f});case 8:case"end":return w.stop()}},null,this)},C=function(a,b){var e,f,g,h,i,j;return c("nativePromiseRegeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=a.table(d("ReStoreIndexMetadata").indicesTableName),k.t0=c("nativePromiseRegeneratorRuntime").keys(b);case 2:if((k.t1=k.t0()).done){k.next=16;break}f=k.t1.value;g=b[f];k.t2=c("nativePromiseRegeneratorRuntime").keys(g);case 6:if((k.t3=k.t2()).done){k.next=14;break}h=k.t3.value;i=g[h];j={data:i,indexName:h,tableName:f};k.next=12;return c("nativePromiseRegeneratorRuntime").awrap(e.put(d("ReStoreIndexMetadata").indexDataToValue(j)));case 12:k.next=6;break;case 14:k.next=2;break;case 16:case"end":return k.stop()}},null,this)},D=function(a,b){var e,f,g,h,i;return c("nativePromiseRegeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=a.table(d("ReStoreIndexMetadata").indicesTableName),j.t0=c("nativePromiseRegeneratorRuntime").keys(b);case 2:if((j.t1=j.t0()).done){j.next=15;break}f=j.t1.value;g=b[f];j.t2=c("nativePromiseRegeneratorRuntime").keys(g);case 6:if((j.t3=j.t2()).done){j.next=13;break}h=j.t3.value;i=g[h].key;j.next=11;return c("nativePromiseRegeneratorRuntime").awrap(e["delete"](i));case 11:j.next=6;break;case 13:j.next=2;break;case 15:case"end":return j.stop()}},null,this)},E=function(a,b){return B(a,b).then(function(b){var d,e;return c("nativePromiseRegeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=b.toRemove,e=b.toUpdate;f.next=3;return c("nativePromiseRegeneratorRuntime").awrap(C(a,e));case 3:f.next=5;return c("nativePromiseRegeneratorRuntime").awrap(D(a,d));case 5:case"end":return f.stop()}},null,this)})};z(function(a){return c("nativePromiseRegeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return c("nativePromiseRegeneratorRuntime").awrap(E(a,f));case 2:case"end":return b.stop()}},null,this)},"readwrite")}return{clearCacheIfSupported:function(){var a=g;a instanceof Object&&a.clearCache!==void 0&&a.clearCache instanceof Function&&a.clearCache()},closeDb:function(){var a=g;a instanceof Object&&a.close!==void 0&&a.close()},getTableData:function(){return f},isTransactionActive:function(){return q},runInTransaction:z,subscribeToCommit:function(a){return e.subscribeToCommit(a)},subscriptionManager:e,table:function(a){return n(r,a,function(){var b=new Map();return{entries:function(b,d,e){d===void 0&&(d="asc");return w(g.createTransaction(),b,a,void 0,d,e,new(c("ReStoreTransactionLock"))())},get:function(b,c){c===void 0&&(c=new WeakMap());return s(g.createTransaction(),c,a,void 0,b)},index:function(d){return n(b,d,function(){return{entries:function(b,e,f){e===void 0&&(e="asc");return w(g.createTransaction(),b,a,d,e,f,new(c("ReStoreTransactionLock"))())},get:function(b,c){c===void 0&&(c=new WeakMap());return s(g.createTransaction(),c,a,d,b)},getKey:function(b){return t(g.createTransaction(),new WeakMap(),a,d,b)},subscribe:function(b,c){return e.subscribeIndex(a,d,b,v(c,f.tableNames[a].indexes[d]))}}})},peekNextAutoIncrementId:function(){return x(g.createTransaction(),new WeakMap(),a)},subscribe:function(b,c){return e.subscribeTable(a,b,v(c,f.tableNames[a].primaryKeyIds.length))}}})}}}a.TransactionClosedError=e;g["default"]=a}),98);
__d("createReStoreEphemeralPersistence",["ReStorePersistence","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(){var a=new Map();function c(b){return h(a,b,function(){return new Map()})}return{flush:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.forEach(function(a,b){var e=c(b);a.forEach(function(a,b){a===d("ReStorePersistence").sentinelDeleted?e["delete"](b):e.set(b,a)})});case 1:case"end":return b.stop()}},null,this)},get:function(a,b,d){a=c(b);return a.get(d)},releaseLockIfNeeded:function(){return window.Promise.resolve()},waitForLock:function(){return window.Promise.resolve()}}}g["default"]=a}),98);
__d("BDSignalBufferData",[],(function(a,b,c,d,e,f){"use strict";a={};b=a;f["default"]=b}),66);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.signalFlags=a,this.signalType=b}var b=a.prototype;b.getSignalCollector=function(){return c("SignalCollectorMap").get(this.signalType)};b.getBufferConfig=function(){return c("BDSignalBufferData")[this.signalType]};return a}();g["default"]=a}),98);
__d("SignalValueContext",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.cn=a}var b=a.prototype;b.getSignalValueContextName=function(){return this.cn};return a}();f["default"]=a}),66);
__d("BDSignalCollectorBase",["BDSignalBufferData","SignalValueContext","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.signalType=a}var d=a.prototype;d.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")};d.executeAsyncSignalCollection=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.executeSignalCollection());case 2:a=c.sent;return c.abrupt("return",a);case 4:case"end":return c.stop()}},null,this)};a.getSanitizedURI=function(){var a=window.location.href,b=a.indexOf("?");return b<0?a:a.substring(0,b)};d.getContext=function(){return new(c("SignalValueContext"))(a.getSanitizedURI())};d.throwIfNotInitialized=function(){if(!(this.signalType in c("BDSignalBufferData")))throw new Error("Signal is not intialized")};return a}();g["default"]=a}),98);
__d("BDLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ERROR:"error",WARNING:"warning",INFO:"info"};b={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"};c="JS";f.LEVELS=a;f.OPERATIONS=b;f.COMPONENT_NAME=c}),66);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBdSessionID=function(a){this.$1.bd_session_id=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setDurationUs=function(a){this.$1.duration_us=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionStackTrace=function(a){this.$1.exception_stack_trace=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setIntValue=function(a){this.$1.int_value=a;return this};c.setLevel=function(a){this.$1.level=a;return this};c.setOperation=function(a){this.$1.operation=a;return this};c.setOperationInfo=function(a){this.$1.operation_info=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionlets=function(a){this.$1.sessionlets=b("GeneratedLoggerUtils").serializeVector(a);return this};return a}();c={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};f["default"]=a}),66);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.INFO,b,c,e)}function b(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.WARNING,b,c,e)}function e(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.ERROR,b,c,e)}function h(a,b,e,f,g){f===void 0&&(f={});if(d("Random").coinflip(i(e))){if(f===null)throw new Error("opeartion info null");f.source=a;new(c("BDOperationTypedLogger"))().setLevel(b).setDurationUs(g).setOperation(e).setComponent(d("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(f).log()}}function i(a){var b=d("BDLoggingConstants").OPERATIONS;switch(a){case b.APPEND_SIGNAL:case b.HB_COLLECTED:case b.GET_LOCAL_STORAGE_ERROR:case b.WEB_STORAGE:case b.SIGNAL_NOT_IMPLEMENTED:case b.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}g.logInfo=a;g.logWarning=b;g.logError=e;g.log=h;g.getFlipSamplingByOperation=i}),98);
__d("SignalErrorValueTypeDef",[],(function(a,b,c,d,e,f){"use strict";var g="ec",h="en",i="es",j=500;a=function(){function a(a,b,c){this.$1=a,this.$2=b,c!=null&&(this.$3=c.substr(0,j))}var b=a.prototype;b.getErrorCode=function(){return this.$1};b.getErrorName=function(){return this.$2};b.getErrorDetails=function(){return this.$3};b.isEqual=function(a){return this.$1===a.getErrorCode()&&this.$3===a.getErrorDetails()&&this.$2===a.getErrorName()};b.toJSON=function(){var a={};a[g]=this.$1;switch(this.$1){case 0:a[h]=this.$2;a[i]=this.$3;break}return a};return a}();f.SignalErrorValueTypeDef=a}),66);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";var h="SignalValueTypeDef",i="t",j="ctx",k="v",l="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"};a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e!=null?e:0}var b=a.prototype;b.getTimeStampMS=function(){return this.$1};b.getSignalContext=function(){return this.$2};b.getSignalValue=function(){return this.$3};b.getSignalValueType=function(){return this.$4};b.isEqual=function(a,b){if(a==null){d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL);return!1}if(this.getSignalValueType()!==a.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&a.getSignalValueType()===m.ERROR)return this.equalValue(a);var c=!1;b.has(128)&&(c=this.equalValue(a));b.has(256)&&(c=c&&this.getSignalContext()!=null&&a.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===a.getSignalContext().getSignalValueContextName());b.has(512)&&(c=c&&Math.abs(this.getTimeStampMS()-a.getTimeStampMS())<=this.$5);return c};b.equalValue=function(a){if(this.isPrimitiveType())return this.getSignalValue()===a.getSignalValue();throw new Error("Must implement in the subclasses")};b.toJSON=function(a){var b={};a&&(b[i]=this.$1/1e3,this.$2!=null&&(b[j]=this.$2));this.$3==null?b[l]=new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(2):this.addValueOrErrorToJSON(b);return b};b.addValueOrErrorToJSON=function(a){if(this.isPrimitiveType())a[k]=this.$3;else throw new Error("Must implement in the subclasses")};b.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}};return a}();g.BD_VALUE=k;g.BD_ERROR=l;g.VALUE_TYPES=m;g.SignalValueTypeDef=a}),98);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}var c=b.prototype;c.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};c.addValueOrErrorToJSON=function(a){a[d("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()};return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){if(navigator.connection!=null&&navigator.connection.rtt!=null){var a=navigator.connection.rtt;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a)}else a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.connection.rtt not supported"));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30004,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}var c=b.prototype;c.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};c.addValueOrErrorToJSON=function(a){a[d("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()};return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("HeartbeatObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.isAppForeground=!0}var b=a.prototype;b.toJSON=function(){return{f:this.isAppForeground}};b.isEqual=function(a){return!1};return a}();f["default"]=a}),66);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("HeartbeatObject"))());return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:38e3,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(a,b,c,d,e,f,g){"use strict";a="biometric_signal_collected";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.listenForSignals=function(){throw c("err")("Child class responsibility to implement listenForSignals")};d.executeSignalCollection=function(){throw c("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")};return b}(c("BDSignalCollectorBase"));g.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=a;g.BDBiometricSignalCollectorBase=b}),98);
__d("KeyDownUpObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.action=null,this.key_code=null,this.action=a,this.key_code=b}var b=a.prototype;b.toJSON=function(){return{action:this.action,key_code:this.key_code}};b.isEqual=function(b){return b instanceof a?this.action===b.action&&this.key_code===b.key_code:!1};return a}();f["default"]=a}),66);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.listenForSignals=function(){var a=this;c("gkx")("1652843")&&(document.addEventListener("keydown",function(b){return a.collectSignals(2)}),document.addEventListener("keyup",function(b){return a.collectSignals(1)}))};e.collectSignals=function(a){a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("KeyDownUpObject"))(a,0));a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return a}(d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),i=null,j={signalType:30100,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("StringArrayObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.strings=[],this.strings=a}var b=a.prototype;b.toJSON=function(){return this.strings};b.isEqual=function(b){if(!(b instanceof a))return!1;if(b.strings===this.strings)return!0;if(b.strings.length!==this.strings.length)return!1;for(var c=0;c<this.strings.length;c++)if(this.strings[c]!==b.strings[c])return!1;return!0};return a}();f["default"]=a}),66);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=[].concat(navigator.languages);a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("StringArrayObject"))(a));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30003,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.mimeTypes?navigator.mimeTypes.length:-1;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30002,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,b)||this;e.eventsToSubscribe=[];e.pauseTimeout=60*60*1e3;e.eventsToSubscribe=c;e.pauseTimeout=d;e.handler=function(a){return e.collectSignals(a)};return e}var e=b.prototype;e.listenForSignals=function(){this.collectSignals(),this.addListeners()};e.addListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){document.addEventListener(b,a.handler)})};e.pauseListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){document.removeEventListener(b,a.handler)});window.setTimeout(function(){return a.addListeners()},this.pauseTimeout)};e.collectSignals=function(a){a=a!=null;a&&this.pauseListeners();a=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return b}(d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);g["default"]=a}),98);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f,g){"use strict";var h=60*60*1e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType,["mousedown","mousemove"],h)||this}return a}(c("BDTouchOrMouseSignalCollectorBase")),j=null,k={signalType:30106,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDNavigatorAppVersionSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.appVersion;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30013,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),(a=navigator.hardwareConcurrency)!=null?a:0);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30018,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30093,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(e){babelHelpers.inheritsLoose(a,e);function a(){return e.call(this,j.signalType)||this}var f=a.prototype;f.executeAsyncSignalCollection=function(){var a,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;if(!navigator.permissions){f.next=8;break}f.next=4;return b("regeneratorRuntime").awrap(navigator.permissions.query({name:"notifications"}));case 4:e=f.sent;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),e.state);f.next=9;break;case 8:a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.permissions not supported"));case 9:f.next=14;break;case 11:f.prev=11,f.t0=f["catch"](0),a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"notifications cannot be queried from navigator.permissions"));case 14:return f.abrupt("return",{valueOrError:a});case 15:case"end":return f.stop()}},null,this,[[0,11]])};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30008,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30015,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){var a=null;try{var b=navigator.plugins?navigator.plugins.length:0,e=new Set();for(var f=0;f<b;f++){var g=navigator.plugins[f].filename;if(!g)continue;var i=g.indexOf(".");if(i==-1||i==g.length-1)continue;e.add(g.substr(i+1));if(e.size>=h)break}e.size&&(a=new(c("StringArrayObject"))(Array.from(e)))}catch(b){a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.plugins is not defined"))}return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),j=null,k={signalType:30019,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30094,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.vendor;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30012,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){var a;window.Notification?a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"Notification not supported"));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30007,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.plugins?navigator.plugins.length:-1;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30001,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),(a=new Date().getTimezoneOffset())!=null?a:999);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30040,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f,g){"use strict";var h=60*60*1e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType,["touchstart","touchcancel"],h)||this}return a}(c("BDTouchOrMouseSignalCollectorBase")),j=null,k={signalType:30107,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=!!navigator.webdriver;a=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:3e4,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30095,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("DimensionObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.width=null,this.height=null,this.width=a,this.height=b}var b=a.prototype;b.toJSON=function(){return{w:this.width,h:this.height}};b.isEqual=function(b){if(b instanceof a)return this.width===b.width&&this.height===b.height;else return!1};return a}();f["default"]=a}),66);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=window.innerHeight,b=window.innerWidth;b=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("DimensionObject"))(b,a));return{valueOrError:b}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30005,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorAppVersionSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(a){switch(a){case 3e4:return c("BDWebdriverSignalCollector").get();case 30001:return c("BDPluginCountSignalCollector").get();case 30002:return c("BDMimeTypeCountSignalCollector").get();case 30003:return c("BDLanguagesSignalCollector").get();case 30004:return c("BDConnectionRTTSignalCollector").get();case 30005:return c("BDWindowOuterDimensionSignalCollector").get();case 30007:return c("BDNotificationPermissionSignalCollector").get();case 30008:return c("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return c("BDNavigatorVendorSignalCollector").get();case 30013:return c("BDNavigatorAppVersionSignalCollector").get();case 30015:return c("BDNavigatorPlatformSignalCollector").get();case 30018:return c("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return c("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30040:return c("BDTimezoneOffsetSignalCollector").get();case 30093:return c("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return c("BDNavigatorUserAgentSignalCollector").get();case 30095:return c("BDWindowHistoryLengthSignalCollector").get();case 30100:return c("BDKeyDownUpSignalCollector").get();case 30106:return c("BDMousePresenceSignalCollector").get();case 30107:return c("BDTouchPresenceSignalCollector").get();case 38e3:return c("BDHeartbeatSignalCollector").get();case 38001:return c("BDHeartbeatV2SignalCollector").get()}}};b=a;g["default"]=b}),98);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.id="";c.id=b;return c}var c=b.prototype;c.toJSON=function(){return{f:this.isAppForeground,id:this.id}};return b}(c("HeartbeatObject"));g["default"]=a}),98);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatV2Object"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("HeartbeatV2Object"))(c("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:38001,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(a,b,c,d,e,f,g){"use strict";var h="BDClientConfig",i=function(){function a(){this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map(),this.heartbeatSignal=new(c("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var b=a.prototype;b.setStaticSignalBufferSize=function(a){a>0?this.staticSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"s"});return this};b.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize};b.setDynamicSignalBufferSize=function(a){a>1?this.dynamicSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"d"});return this};b.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize};b.setBiometricSignalBufferSize=function(a){a>1?this.biometricSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"b"});return this};b.setSID=function(a){this.sid=a;return this};b.setHeartbeatVersion=function(a){this.hbVersion=a;return this};b.getHeartbeatVersion=function(){return this.hbVersion};b.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize};b.setConfigGenerationTimeStamp=function(a){this.signalConfigGenerationTimeStampMs=a;return this};b.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs};b.setHeartbeatIntervalMinutes=function(a){this.heartbeatIntervalMs=a*60*1e3;return this};b.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs};b.setSuspiciousTiersFlushDurationMinutes=function(a){a>0?this.suspiciousTiersFlushDurationMs=a*60*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fds"});return this};b.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs};b.setAllTiersFlushDurationMinutes=function(a){a>0?this.allTiersFlushDurationMs=a*60*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fda"});return this};b.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs};b.addMultipleSignalsToClientConfig=function(a){var b=this;a.forEach(function(a){return b.addSignalToClientConfig(a)});return this};b.addSignalToClientConfig=function(a){var b=a.getSignalFlags(),d=a.getSignalId();if(d===38e3)return this;var e=new(c("BDSignalWrapper"))(b,d);if(d===38001){this.heartbeatSignal=e;return this}!b.includes(2)?this.staticSignals.push(e):b.includes(4)?this.biometricSignals.push(e):this.dynamicSignals.push(e);a.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[a.getSignalId()]=a.getBufferSize());return this};b.setPeriodicCollectionIntervalSeconds=function(a){a>0?this.periodicCollectionIntervalMs=a*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"pi"});return this};b.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs};b.getDynamicSignals=function(){return this.dynamicSignals};b.getStaticSignals=function(){return this.staticSignals};b.getBiometricSignals=function(){return this.biometricSignals};b.getBiometricSignalsMap=function(){this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(a,b){return a.set(b.signalType,b)},new Map()));return this.biometricSignalsMap};b.getHeartbeatSignal=function(){return this.heartbeatSignal};b.getBufferSizeBySignalId=function(a){return this.bufferSizeBySignalIdMap[a]};b.setParsingDone=function(a){this.parsingDone=a};b.isParsingDone=function(){return this.parsingDone};return a}(),j=null;a={get:function(){j==null&&(j=new i());return j}};b=a;g["default"]=b}),98);
__d("BDCollectionTypeEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});f["default"]=a}),66);
__d("BotDetection_SignalFlags",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});f["default"]=a}),66);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(a,b,c,d,e,f,g){"use strict";var h="BDServerSignalConfig";a=function(){function a(a,b,c){this.parsedSignalFlags=[],this.signalId=a,this.signalFlags=b,this.bufferSize=c}var b=a.prototype;b.getSignalId=function(){return this.signalId};b.getSignalFlags=function(){var a=this;if(this.parsedSignalFlags.length===0){var b=Object.keys(c("BotDetection_SignalFlags"));b.forEach(function(b){(c("BotDetection_SignalFlags")[b]&a.signalFlags)===c("BotDetection_SignalFlags")[b]&&a.parsedSignalFlags.push(c("BotDetection_SignalFlags")[b])})}this.parsedSignalFlags.length===0&&d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()});return this.parsedSignalFlags};b.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0};return a}();g["default"]=a}),98);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="BDServerConfig";function a(a){var b=[];try{var e=JSON.parse(a.sc),f=new Map(e.c);f.forEach(function(a,d){return b.push(new(c("BDServerSignalConfig"))(d,a))});if(f.size===0){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}f=c("BDClientConfig").get();f.setPeriodicCollectionIntervalSeconds(a.i).addMultipleSignalsToClientConfig(b).setConfigGenerationTimeStamp(e.t).setAllTiersFlushDurationMinutes(a.fda).setSuspiciousTiersFlushDurationMinutes(a.fds).setHeartbeatIntervalMinutes(a.hbi).setStaticSignalBufferSize(a.sbs).setDynamicSignalBufferSize(a.dbs).setBiometricSignalBufferSize(a.bbs).setSID(a.sid).setHeartbeatVersion(a.hbv).setParsingDone(!0)}catch(a){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:a})}}g.parseConfig=a}),98);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(a,b,c,d,e,f,g){"use strict";var h="BDSignalBuffer";function a(a,b,d){if(a in c("BDSignalBufferData"))return;var e=1;b!==void 0&&(e=b);c("BDSignalBufferData")[a]={values:[],max_buffer_size:e,signal_flags:(b=d)!=null?b:[]}}function i(a){if(a in c("BDSignalBufferData"))c("BDSignalBufferData")[a].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function b(a,b){if(a in c("BDSignalBufferData")){var e=c("BDSignalBufferData")[a],f=e.max_buffer_size;e.values.length>=f&&e.values.shift();e.values.push(b);d("BDOperationLogHelper").logInfo(h,d("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:a.toString()})}else{d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:a.toString()});throw new Error("Tried to append signal that was not intialized:")}}function e(){var a=c("BDClientConfig").get();a=a.getBiometricSignals();a.forEach(function(a){a.signalType in c("BDSignalBufferData")&&i(a.signalType)})}function f(a){var b;a=c("BDSignalBufferData")[a];b=a==null?void 0:(b=a.values)==null?void 0:b.length;return b!=null&&b>0?a.values[b-1]:{valueOrError:void 0}}function j(a){return c("BDSignalBufferData")[a].values}function k(a){var b={};for(var d=0;d<a.length;d++){var e=a[d];e in c("BDSignalBufferData")&&(b[e]=j(e).map(function(a){return a.valueOrError}))}return b}function l(a){a=m(a);return JSON.stringify(k(a))}function m(a){var b=c("BDClientConfig").get(),d=[];a.forEach(function(a){switch(a){case c("BDCollectionTypeEnum").STATIC:d=[].concat(d,b.getStaticSignals());break;case c("BDCollectionTypeEnum").DYNAMIC:d=[].concat(d,b.getDynamicSignals());break;case c("BDCollectionTypeEnum").BIOMETRIC:d=[].concat(d,b.getBiometricSignals());break}});return d.map(function(a){return a.signalType})}g.initialize=a;g.clearBuffer=i;g.appendSignal=b;g.clearBiometricSignals=e;g.getLastSignalFormatBySignalId=f;g.retrieveSignal=j;g.retrieveSignals=k;g.getSignalsAsJSONString=l;g._getSignalIdsByCollectionType=m}),98);
__d("BDUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}f.uuid=a}),66);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743095");c=b("FalcoLoggerInternal").create("bd_pdc_signals",a);e.exports=c}),null);
__d("SignalCollectionManager",["BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="SignalCollectionManager",i=function(){function a(){var a=this;this.$1=!1;this.$6=function(b){if(b instanceof CustomEvent&&b.detail!=null&&b.detail.data!=null){var d=c("BDClientConfig").get().getBiometricSignalsMap().get(b.detail.signalId);d!=null&&a.$4(b.detail.data,d)}}}var e=a.prototype;e.collectSignals=function(a){var c=this,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=[];a.forEach(function(a){a.signalFlags.includes(4)?c.$2(a):d.push(c.$3(a))});e.next=4;return b("regeneratorRuntime").awrap(b("Promise").all(d));case 4:case"end":return e.stop()}},null,this)};e.isEqualToLastCollectedSignal=function(a,b){var c=d("BDSignalBuffer").getLastSignalFormatBySignalId(b.signalType);return c.valueOrError==void 0?!1:a.isEqual(c.valueOrError,new Set(b.signalFlags))};e.getCircularBufferSize=function(a){var b=c("BDClientConfig").get(),d=b.getBufferSizeBySignalId(a.signalType);if(d!=null&&b.getBufferSizeBySignalId(a.signalType)>0)return d;if(!a.signalFlags.includes(2))return b.getStaticSignalBufferSize();else if(a.signalFlags.includes(4))return b.getBiometricSignalBufferSize();else return b.getDynamicSignalBufferSize()};e.$3=function(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=a.getSignalCollector();if(!(c!=null)){f.next=12;break}f.prev=2;f.next=5;return b("regeneratorRuntime").awrap(c.executeAsyncSignalCollection());case 5:e=f.sent;this.$4(e,a);f.next=12;break;case 9:f.prev=9,f.t0=f["catch"](2),d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:f.t0});case 12:case"end":return f.stop()}},null,this,[[2,9]])};e.$2=function(a){this.$5();a=a.getSignalCollector();a!=null&&a instanceof d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&a.listenForSignals()};e.$5=function(){if(this.$1)return;window.addEventListener(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6);this.$1=!0};e.$4=function(a,b){b.getBufferConfig()==null&&d("BDSignalBuffer").initialize(b.signalType,this.getCircularBufferSize(b),b.signalFlags),a.valueOrError&&!this.isEqualToLastCollectedSignal(a.valueOrError,b)&&d("BDSignalBuffer").appendSignal(b.signalType,a)};return a}(),j=null;a={get:function(){j==null&&(j=new i());return j}};e=a;g["default"]=e}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("javascript-blowfish-1.0.5",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=function(b,c){this.key=b,(c==="ecb"||c==="cbc")&&(this.mode=c),this.sBox0=a.sBox0.slice(),this.sBox1=a.sBox1.slice(),this.sBox2=a.sBox2.slice(),this.sBox3=a.sBox3.slice(),this.pArray=a.pArray.slice(),this.generateSubkeys(b)};a.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(a,b){if(this.mode==="ecb")return this.encryptECB(a);if(this.mode==="cbc")return this.encryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},decrypt:function(a,b){if(this.mode==="ecb")return this.decryptECB(a);if(this.mode==="cbc")return this.decryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},encryptECB:function(a){a=this.utf8Decode(a);var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8){var f=8-e.length;while(0<f--)e+="\0"}var g;f=this.split64by32(e);e=f[0];g=f[1];f=this.encipher(e,g);e=f[0];g=f[1];c+=this.num2block32(e)+this.num2block32(g)}return c},encryptCBC:function(a,b){a=this.utf8Decode(a);var c=Math.ceil(a.length/8),d;b=this.split64by32(b);d=b[0];b=b[1];var e="";for(var f=0;f<c;f++){var g=a.substr(f*8,8);if(g.length<8){var h=8-g.length;while(0<h--)g+="\0"}var i;h=this.split64by32(g);g=h[0];i=h[1];g=this.xor(g,d);i=this.xor(i,b);h=this.encipher(g,i);g=h[0];i=h[1];d=g;b=i;e+=this.num2block32(g)+this.num2block32(i)}return e},decryptECB:function(a){var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u044b\u0439\u0442\u0430\u043c.");var f,g;e=this.split64by32(e);f=e[0];g=e[1];e=this.decipher(f,g);f=e[0];g=e[1];c+=this.num2block32(f)+this.num2block32(g)}c=this.utf8Encode(c);return c},decryptCBC:function(a,b){var c=Math.ceil(a.length/8),d,e,f;b=this.split64by32(b);d=b[0];b=b[1];var g="";for(var h=0;h<c;h++){var i=a.substr(h*8,8);if(i.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043c.");var j,k;i=this.split64by32(i);j=i[0];k=i[1];e=j;f=k;i=this.decipher(j,k);j=i[0];k=i[1];j=this.xor(j,d);k=this.xor(k,b);d=e;b=f;g+=this.num2block32(j)+this.num2block32(k)}g=this.utf8Encode(g);return g},F:function(a){var b=a>>>24,c=a<<8>>>24,d=a<<16>>>24;a=a<<24>>>24;b=this.addMod32(this.sBox0[b],this.sBox1[c]);b=this.xor(b,this.sBox2[d]);b=this.addMod32(b,this.sBox3[a]);return b},encipher:function(a,b){var c;for(var d=0;d<16;d++)a=this.xor(a,this.pArray[d]),b=this.xor(this.F(a),b),c=a,a=b,b=c;c=a;a=b;b=c;b=this.xor(b,this.pArray[16]);a=this.xor(a,this.pArray[17]);return[a,b]},decipher:function(a,b){var c;a=this.xor(a,this.pArray[17]);b=this.xor(b,this.pArray[16]);c=a;a=b;b=c;for(var d=15;d>=0;d--)c=a,a=b,b=c,b=this.xor(this.F(a),b),a=this.xor(a,this.pArray[d]);return[a,b]},generateSubkeys:function(a){var b=0,c=0,d,e;for(d=0;d<18;d++){for(e=4;e>0;e--)b=this.fixNegative(b<<8|a.charCodeAt(c)),c=(c+1)%a.length;this.pArray[d]=this.xor(this.pArray[d],b);b=0}e=[0,0];for(d=0;d<18;d+=2)e=this.encipher(e[0],e[1]),this.pArray[d]=e[0],this.pArray[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox0[d]=e[0],this.sBox0[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox1[d]=e[0],this.sBox1[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox2[d]=e[0],this.sBox2[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox3[d]=e[0],this.sBox3[d+1]=e[1]},block32toNum:function(a){return this.fixNegative(a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3))},num2block32:function(a){return String.fromCharCode(a>>>24)+String.fromCharCode(a<<8>>>24)+String.fromCharCode(a<<16>>>24)+String.fromCharCode(a<<24>>>24)},xor:function(a,b){return this.fixNegative(a^b)},addMod32:function(a,b){return this.fixNegative(a+b|0)},fixNegative:function(a){return a>>>0},split64by32:function(a){var b=a.substring(0,4);a=a.substring(4,8);return[this.block32toNum(b),this.block32toNum(a)]},utf8Decode:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},utf8Encode:function(a){var b="",c=0,d=0,e=0,f;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b},base64Encode:function(a){var b="",c,d,e,f,g,h,i=0;while(i<a.length)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this.keyStr.charAt(f)+this.keyStr.charAt(c)+this.keyStr.charAt(g)+this.keyStr.charAt(h);return b},base64Decode:function(a){var b="",c,d,e,f,g,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<a.length)d=this.keyStr.indexOf(a.charAt(h++)),e=this.keyStr.indexOf(a.charAt(h++)),f=this.keyStr.indexOf(a.charAt(h++)),g=this.keyStr.indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|f>>2,c=(f&3)<<6|g,b=b+String.fromCharCode(d),f!=64&&(b=b+String.fromCharCode(e)),g!=64&&(b=b+String.fromCharCode(c));return b},trimZeros:function(a){return a.replace(/\0+$/g,"")}};a.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];a.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946];a.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055];a.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504];a.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];g.exports=a}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(a,b,c,d,e,f){e.exports=b("javascript-blowfish-1.0.5")()}),null);
__d("BDClientSignalCollectionTrigger",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDServerConfig","BDSignalBuffer","BDUtils","BdPdcSignalsFalcoEvent","Promise","SignalCollectionManager","WebStorage","javascript-blowfish","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="BDClientSignalCollectionTrigger",i="signal_flush_timestamp",j=!1,k=!1,l=!1,m=0,n=0,o=0,p=30,q=5,r,s,t=d("BDUtils").uuid(),u=c("BDClientConfig").get(),v=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),w={startSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:u.setSID(a.sid);if(j){c.next=15;break}j=!0;d("BDServerConfig").parseConfig(a);if(u.isParsingDone()){c.next=8;break}d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{config:JSON.stringify(a)});j=!1;return c.abrupt("return");case 8:a!=null&&(n=a.hbcbc&&a.hbcbc>0?a.hbcbc:n,o=a.hbvbc&&a.hbvbc>0?a.hbvbc:o,p=a.hbbi&&a.hbbi>0?a.hbbi:p);w.startHeartbeatDelayed();s=new(b("Promise"))(function(a,b){try{u.getDynamicSignals().length>0&&(w.collectDynamicSignals(),d("BDOperationLogHelper").logInfo(h,d("BDLoggingConstants").OPERATIONS.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),u.getBiometricSignals().length>0&&(w.collectBiometricSignals(),d("BDOperationLogHelper").logInfo(h,d("BDLoggingConstants").OPERATIONS.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),a()}catch(a){b(a)}});c.next=13;return b("regeneratorRuntime").awrap(s);case 13:c.next=15;return b("regeneratorRuntime").awrap(w.startSignalPosting());case 15:j&&!k&&!l&&q>0&&(q-=1,d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.TRY_RESTARTING_HB),w.startHeartbeatDelayed());case 16:case"end":return c.stop()}},null,this)},retrieveSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(s);case 2:a.next=4;return b("regeneratorRuntime").awrap(w.postSignals([c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").BIOMETRIC,c("BDCollectionTypeEnum").STATIC]));case 4:case"end":return a.stop()}},null,this)},postSignals:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(w.collectStaticSignals());case 2:w._postSignalsHelper(d("BDSignalBuffer").getSignalsAsJSONString(a),v.NONE)&&w.setTimestampInStorage(Date.now(),i);case 3:case"end":return c.stop()}},null,this)},_postSignalsHelper:function(a,b){if(a.length<=2)return!1;var e=u.getConfigGenerationTimeStamp(),f=w.encryptDataUsingAsid(t,a);a=function(){return{asid:t,ct:e,sjd:f,sid:u.sid}};var g=!1;try{b===v.CRITICAL?c("BdPdcSignalsFalcoEvent").logCritical(a):b===v.VITAL?c("BdPdcSignalsFalcoEvent").logImmediately(a):c("BdPdcSignalsFalcoEvent").log(a),g=!0}catch(a){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.BANZAI_LOG_ERROR,a),g=!1}finally{return g}},getInitialVector:function(a){if(a.length!==16){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_LENGTH);return""}var b="";for(var c=0;c<8;c++)b+=String.fromCharCode(a.charCodeAt(c)^a.charCodeAt(8+c));return b},encryptDataUsingAsid:function(a,b){if(a.length!==36){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_GUID);return b}a=a.slice(19,23)+a.slice(24,36);var e=w.getInitialVector(a);a=new(c("javascript-blowfish"))(a,"cbc");return a.base64Encode(a.encrypt(b,e))},startSignalPosting:function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=w.getTimestampInStorage(i);c=Date.now()-a;if(!(c>=u.getAllTiersFlushDurationMs())){d.next=7;break}d.next=5;return b("regeneratorRuntime").awrap(w.postSignalsIntermittently());case 5:d.next=8;break;case 7:window.setTimeout(function(){w.postSignalsIntermittently()},u.getAllTiersFlushDurationMs()-c);case 8:case"end":return d.stop()}},null,this)},postSignalsIntermittently:function(){w.postSignals([c("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){w.postSignals([c("BDCollectionTypeEnum").STATIC,c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").BIOMETRIC])},u.getAllTiersFlushDurationMs())},setTimestampInStorage:function(a,b){var e=c("WebStorage").getLocalStorage();if(!e){d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return}e=c("WebStorage").setItemGuarded(e,b,a.toString());e!=null&&d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.WEB_STORAGE,{error:e.message})},getTimestampInStorage:function(a){var b=c("WebStorage").getLocalStorage();if(!b){d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return 0}b=b.getItem(a);if(b==null)return 0;a=Number.parseInt(b,10);return Number.isFinite(a)?a:0},resetHeartbeatStartedForTest:function(){k=!1,l=!1},startHeartbeatDelayed:function(){if(k||l)return;var a=w.getTimestampInStorage(w.HEARTBEAT_TIMESTAMP_STORAGE_KEY);a=Date.now()-a;try{a>=u.getHeartbeatIntervalMs()?w.startHeartbeat():(window.setTimeout(function(){return w.startHeartbeat()},u.getHeartbeatIntervalMs()-a),l=!0)}catch(b){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.HB_START_FAILURE,{lastBeatSince:a.toString(),hbi:u.getHeartbeatIntervalMs().toString(),e:b})}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!k&&u.getHeartbeatIntervalMs()>0&&(w.collectHeartbeatTimes(n,o),m!==0&&(window.clearInterval(m),d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.HB_ALREADY_RUNNING)),m=window.setInterval(function(){return w.collectHeartbeatTimes(n,o)},u.getHeartbeatIntervalMs()),k=!0)},collectHeartbeatTimes:function(a,b){if(a<=0&&b<=0)return;a>0&&w.collectHeartbeat(v.CRITICAL);b>0&&w.collectHeartbeat(v.VITAL);(a>1||b>1)&&window.setTimeout(function(){return w.collectHeartbeatTimes(a-1,b-1)},p*1e3)},collectHeartbeat:function(a){var b;b=u==null?void 0:(b=u.getHeartbeatSignal())==null?void 0:(b=b.getSignalCollector())==null?void 0:b.executeSignalCollection();if(b==null){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.HB_COLLECTION_FAILED,{urgency:a.toString()});return}else d("BDOperationLogHelper").logInfo(h,d("BDLoggingConstants").OPERATIONS.HB_COLLECTED,{urgency:a.toString()});w.postHeartbeat(a,b)&&w.setTimestampInStorage(Date.now(),w.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(a,b){var c={};c[38001]=[b==null?void 0:b.valueOrError];b=JSON.stringify(c);return w._postSignalsHelper(b,a)},collectStaticSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(w.collectSignalsOneTime(u.getStaticSignals()));case 2:case"end":return a.stop()}},null,this)},collectDynamicSignals:function(){w.stopDynamicSignalCollection(),r=window.setInterval(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(w.collectSignalsOneTime(u.getDynamicSignals()));case 2:case"end":return a.stop()}},null,this)},u.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){w.collectSignalsOneTime(u.getBiometricSignals())},stopDynamicSignalCollection:function(){r!=null&&(window.clearInterval(r),r=null)},collectSignalsOneTime:function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c("SignalCollectionManager").get().collectSignals(a));case 2:case"end":return d.stop()}},null,this)}};a=w;g["default"]=a}),98);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("BDClientSignalCollectionTrigger").startSignalCollection(c("BDSignalCollectionData"))}g.initSignalCollection=a}),98);
__d("LSDict",["nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a.tag="ls-array";return a}a=function(){function a(a){this.size=0;var b=new Map(Array.from(a||[]).map(function(a){var b=a[0];a=a[1];return[JSON.stringify(b),a]}));this.$1=b;Object.defineProperties(this,{size:{get:function(){return b.size}}})}var b=a.prototype;b.get=function(a){return this.$1.get(JSON.stringify(a))};b.set=function(a,b){this.$1.set(JSON.stringify(a),b);return this};b["delete"]=function(a){return this.$1["delete"](JSON.stringify(a))};b.clear=function(){return this.$1.clear()};b.forEach=function(a,b){var c=this;this.$1.forEach(function(b,d){return a(b,JSON.parse(d),c)},b)};b.$2=function(){return this.$1.size};b.has=function(a){return this.$1.has(JSON.stringify(a))};b.entries=c("nativePromiseRegeneratorRuntime").mark(function a(){var b,d,e,f,g,h,i;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:b=this.$1.entries(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){a.next=7;break}if(!(e>=b.length)){a.next=4;break}return a.abrupt("break",18);case 4:f=b[e++];a.next=11;break;case 7:e=b.next();if(!e.done){a.next=10;break}return a.abrupt("break",18);case 10:f=e.value;case 11:g=f;h=g[0];i=g[1];a.next=16;return[JSON.parse(h),i];case 16:a.next=1;break;case 18:case"end":return a.stop()}},a,this)});b.keys=function(){return h(Array.from(this.$1.keys()).map(function(a){return JSON.parse(a)}))};b.values=function(){return this.$1.values()};a.fromObject=function(b){return new a(Object.entries(b))};a.shapeToRecord=function(a){return Array.from(a.entries()).reduce(function(a,b){var d=b[0];b=b[1];if(typeof d!=="string")throw c("unrecoverableViolation")("Cannot convert dicts with mixed keys to records","messenger_web_product");return babelHelpers["extends"]({},a,(a={},a[d]=b,a))},{})};return a}();g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSDbKeyComparer","LSDict","bs_caml_int64","nativePromiseRegeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=[];while(a!==0)b.push(a.hd),a=a.tl;return b}function i(a){return a.reduceRight(function(a,b){return{hd:b,tl:a}},0)}function j(a,b,e){e===void 0&&(e="asc");var f=a.entries(new WeakMap(),e);function g(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=g,a.next=function(){var a,g,j,k;return c("nativePromiseRegeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return c("nativePromiseRegeneratorRuntime").awrap(f.next());case 2:a=l.sent;case 3:if(a.done){l.next=22;break}g=function(g){var j,k,l,m,n,o,p;return c("nativePromiseRegeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:j=b[g]||{},k=j.end,l=j.start;m=h(a.value[0]);n=m.slice(0,g);if(!l){q.next=21;break}o=d("LSDbKeyComparer").compareValue(m[g],l[0]);if(!(o*(e==="asc"?1:-1)<l[1])){q.next=21;break}if(!(g===m.length-1&&o===0)){q.next=12;break}q.next=9;return c("nativePromiseRegeneratorRuntime").awrap(f.next());case 9:a=q.sent;q.next=16;break;case 12:p=[].concat(n,[l[0]],l[1]&&e==="asc"||!l[1]&&e==="desc"?[d("LSDbKeyComparer").MAX_KEY]:[]);q.next=15;return c("nativePromiseRegeneratorRuntime").awrap(f.next(i(p)));case 15:a=q.sent;case 16:if(!a.done){q.next=18;break}return q.abrupt("return",{v:{done:!0}});case 18:m=h(a.value[0]);if(n.every(function(b,a){return d("LSDbKeyComparer").compareValue(b,m[a])===0})){q.next=21;break}return q.abrupt("return","continue|outer");case 21:if(!k){q.next=27;break}if(!(d("LSDbKeyComparer").compareValue(k[0],m[g])*(e==="asc"?1:-1)<k[1])){q.next=27;break}q.next=25;return c("nativePromiseRegeneratorRuntime").awrap(f.next(i([].concat(m.slice(0,g),e==="asc"?[d("LSDbKeyComparer").MAX_KEY]:[]))));case 25:a=q.sent;return q.abrupt("return","continue|outer");case 27:case"end":return q.stop()}},null,this)};j=0;case 6:if(!(j<b.length)){l.next=19;break}l.next=9;return c("nativePromiseRegeneratorRuntime").awrap(g(j));case 9:k=l.sent;l.t0=k;l.next=l.t0==="continue|outer"?13:14;break;case 13:return l.abrupt("continue",3);case 14:if(!(typeof k==="object")){l.next=16;break}return l.abrupt("return",k.v);case 16:j++;l.next=6;break;case 19:return l.abrupt("break",22);case 22:return l.abrupt("return",a);case 23:case"end":return l.stop()}},null,this)},a}return g()}function k(a,b){var d;return d={},d[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=k.bind(null,a,b),d.next=function(){var d;return c("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 2:d=e.sent;case 3:e.t0=!d.done;if(!e.t0){e.next=8;break}e.next=7;return c("nativePromiseRegeneratorRuntime").awrap(b(d.value.item));case 7:e.t0=!e.sent;case 8:if(!e.t0){e.next=14;break}e.next=11;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 11:d=e.sent;e.next=3;break;case 14:return e.abrupt("return",d);case 15:case"end":return e.stop()}},null,this)},d}function l(a,b,d){var e,f=0;return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=l.bind(null,a,b,d),e.next=function(){var e,g;return c("nativePromiseRegeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:if(!(f<b)){h.next=11;break}h.next=3;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:e=h.sent;g=e.done;if(!g){h.next=8;break}c("FBLogger")("messenger_web_product").info("not enough iterable values to slice from %d",b);return h.abrupt("return",{done:!0});case 8:f++;h.next=0;break;case 11:if(!(f<d)){h.next=14;break}f++;return h.abrupt("return",a.next());case 14:return h.abrupt("return",{done:!0});case 15:case"end":return h.stop()}},null,this)},e}function a(a,b){var d,e,f,g;return c("nativePromiseRegeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 2:d=h.sent,e=[];case 4:if(d.done){h.next=11;break}e.push(d.value);h.next=8;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 8:d=h.sent;h.next=4;break;case 11:f=0;case 12:if(!(f<e.length)){h.next=19;break}g=e[f];h.next=16;return c("nativePromiseRegeneratorRuntime").awrap(b(g));case 16:f++;h.next=12;break;case 19:case"end":return h.stop()}},null,this)}function m(a){var b,d;return c("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:b=[];e.next=3;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:d=e.sent;case 4:if(d.done){e.next=11;break}b.push(d.value);e.next=8;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 8:d=e.sent;e.next=4;break;case 11:return e.abrupt("return",b);case 12:case"end":return e.stop()}},null,this)}function b(a,b,e){e===void 0&&(e=[]);var f={ASC:1,DESC:-1},g=function(a,c){a=a.item;c=c.item;for(var e=0;e<b.length;e++){var g=b[e];g=g[0];var h=a[g];g=c[g];var i;h===void 0&&g===void 0?i=0:h===void 0&&g!==void 0?i=-1:h!==void 0&&g===void 0?i=1:i=d("LSDbKeyComparer").compareValue(h,g);if(i===0)continue;return i*f[b[e][1]]}return 0},h=function(){var b=babelHelpers.wrapAsyncGenerator(c("nativePromiseRegeneratorRuntime").mark(function b(){var f,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return c("nativePromiseRegeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return babelHelpers.awaitAsyncGenerator(a.next());case 2:f=b.sent,i=[];case 4:if(f.done){b.next=32;break}j=0;for(k=e.length-1;k>=0;k--)j={hd:f.value.item[e[k]],tl:j};if(!(h!==void 0&&d("LSDbKeyComparer").compareKey(h,j)!==0)){b.next=25;break}l=i.sort(g),m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 9:if(!m){b.next=15;break}if(!(n>=l.length)){b.next=12;break}return b.abrupt("break",24);case 12:o=l[n++];b.next=19;break;case 15:n=l.next();if(!n.done){b.next=18;break}return b.abrupt("break",24);case 18:o=n.value;case 19:p=o;b.next=22;return p;case 22:b.next=9;break;case 24:i=[];case 25:f.done||i.push(f.value);h=j;b.next=29;return babelHelpers.awaitAsyncGenerator(a.next());case 29:f=b.sent;b.next=4;break;case 32:if(!i.length){b.next=49;break}q=i.sort(g),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 34:if(!r){b.next=40;break}if(!(s>=q.length)){b.next=37;break}return b.abrupt("break",49);case 37:t=q[s++];b.next=44;break;case 40:s=q.next();if(!s.done){b.next=43;break}return b.abrupt("break",49);case 43:t=s.value;case 44:u=t;b.next=47;return u;case 47:b.next=34;break;case 49:case"end":return b.stop()}},b,this)}));return function(){return b.apply(this,arguments)}}();return h()}function e(a){var b,d;return c("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:b=0;e.next=3;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:d=e.sent;case 4:if(d.done){e.next=11;break}b++;e.next=8;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 8:d=e.sent;e.next=4;break;case 11:return e.abrupt("return",c("bs_caml_int64").of_int32(b));case 12:case"end":return e.stop()}},null,this)}function f(a,b){return{forEach:function(d){var e,f,g,h,i,j,k,l,n,o;return c("nativePromiseRegeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c("nativePromiseRegeneratorRuntime").awrap(m(a));case 2:e=p.sent,f=e.reduce(function(c,d){d=d.item[b];var a=(c.get(d)||0)+1;return c.set(d,a)},new(c("LSDict"))()),(g=f.entries(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!h){p.next=11;break}if(!(i>=g.length)){p.next=8;break}return p.abrupt("break",22);case 8:k=g[i++];p.next=15;break;case 11:i=g.next();if(!i.done){p.next=14;break}return p.abrupt("break",22);case 14:k=i.value;case 15:l=k;n=l[0];o=l[1];p.next=20;return c("nativePromiseRegeneratorRuntime").awrap(d((j={},j[b]=n,j.group_count=c("bs_caml_int64").of_int32(o),j)));case 20:p.next=5;break;case 22:case"end":return p.stop()}},null,this)}}}function n(a,b,c){return{"delete":function(){return c["delete"](a)},item:b,update:function(d){return c.upsert(a,babelHelpers["extends"]({},b,d))}}}function o(a,b){return p.apply(this,arguments)}function p(){p=babelHelpers.wrapAsyncGenerator(c("nativePromiseRegeneratorRuntime").mark(function a(b,d){var e;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return babelHelpers.awaitAsyncGenerator(b.next());case 2:e=a.sent;case 3:if(e.done){a.next=11;break}a.next=6;return e.value;case 6:a.next=8;return babelHelpers.awaitAsyncGenerator(b.next());case 8:e=a.sent;a.next=3;break;case 11:a.next=13;return babelHelpers.awaitAsyncGenerator(d.next());case 13:e=a.sent;case 14:if(e.done){a.next=22;break}a.next=17;return e.value;case 17:a.next=19;return babelHelpers.awaitAsyncGenerator(d.next());case 19:e=a.sent;a.next=14;break;case 22:case"end":return a.stop()}},a,this)}));return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=babelHelpers.wrapAsyncGenerator(c("nativePromiseRegeneratorRuntime").mark(function a(b,e,f){var g,h,i;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return babelHelpers.awaitAsyncGenerator(b.next());case 2:g=a.sent;a.next=5;return babelHelpers.awaitAsyncGenerator(e.next());case 5:h=a.sent;case 6:if(!(!g.done&&!h.done)){a.next=34;break}i=d("LSDbKeyComparer").compareKey(g.value[0],h.value[0]);if(!(i===0)){a.next=19;break}a.next=11;return g.value;case 11:a.next=13;return babelHelpers.awaitAsyncGenerator(b.next());case 13:g=a.sent;a.next=16;return babelHelpers.awaitAsyncGenerator(e.next());case 16:h=a.sent;a.next=32;break;case 19:if(!(i*(f==="asc"?1:-1)<0)){a.next=27;break}a.next=22;return g.value;case 22:a.next=24;return babelHelpers.awaitAsyncGenerator(b.next());case 24:g=a.sent;a.next=32;break;case 27:a.next=29;return h.value;case 29:a.next=31;return babelHelpers.awaitAsyncGenerator(e.next());case 31:h=a.sent;case 32:a.next=6;break;case 34:if(g.done){a.next=42;break}a.next=37;return g.value;case 37:a.next=39;return babelHelpers.awaitAsyncGenerator(b.next());case 39:g=a.sent;a.next=34;break;case 42:if(h.done){a.next=50;break}a.next=45;return h.value;case 45:a.next=47;return babelHelpers.awaitAsyncGenerator(e.next());case 47:h=a.sent;a.next=42;break;case 50:case"end":return a.stop()}},a,this)}));return r.apply(this,arguments)}function s(a,b,d,e,f,g){var h=new Set(),k=a.length>1,l=a.length===1&&a[0][1]===void 0,m=a.map(function(a){var h=a[0],k=a[1];return h.map(function(a){e.key_lookup===!0&&a.length!==0;e.table_scan===!0&&a.length===0;var h=a.map(function(a){return g(a,b)});a=h.length===(k===void 0?d.primaryKeyIds:d.indexes[k]).length&&h.every(function(a){var b=a.start;a=a.end;return b&&a&&b[0]===a[0]&&b[1]===0&&a[1]===0});if(a){a=function a(){var b,d=!1;return b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,b.next=function(){var a,b;return c("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return",{done:!0});case 2:d=!0;a=i(h.map(function(a){a=a.start;return a[0]}));e.next=6;return c("nativePromiseRegeneratorRuntime").awrap((k===void 0?f:f.index(k)).get(a));case 6:b=e.sent;if(b){e.next=9;break}return e.abrupt("return",{done:!0});case 9:return e.abrupt("return",{value:[a,b],done:!1});case 10:case"end":return e.stop()}},null,this)},b};return a()}return j(k===void 0?f:f.index(k),h,b)})}).flat().reduce(function(c,d){return a.length>1?o(c,d):q(c,d,b)});function p(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=p,a.next=function(){var a,b,e,g,i,j;return c("nativePromiseRegeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c("nativePromiseRegeneratorRuntime").awrap(m.next());case 2:g=o.sent;case 3:if(g.done){o.next=19;break}i=g.value;b=i[0];e=i[1];a=l?b:d.primaryKeyIds.reduceRight(function(a,b){return{hd:e[b],tl:a}},0);if(!k){o.next=16;break}j=JSON.stringify(a);if(!h.has(j)){o.next=15;break}o.next=13;return c("nativePromiseRegeneratorRuntime").awrap(m.next());case 13:g=o.sent;return o.abrupt("continue",3);case 15:h.add(j);case 16:return o.abrupt("break",19);case 19:if(!(g.done||a===void 0||e===void 0)){o.next=21;break}return o.abrupt("return",{done:!0});case 21:return o.abrupt("return",{done:!1,value:n(a,e,f)});case 22:case"end":return o.stop()}},null,this)},a}return p()}g.filter=k;g.slice=l;g.forEach=a;g.toArray=m;g.sortBy=b;g.count=e;g.groupBy=f;g.fetch=s}),98);
__d("LSJson",["LSDict","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=512;function i(a,b){b===void 0&&(b=0);if(b>h)throw c("unrecoverableViolation")("recursion limit exceeded","messenger_comet");if(typeof a==="string"||typeof a==="number")return JSON.stringify(a);else if(typeof a==="boolean")return a?"1":"0";else if(a===void 0)return"null";else if(typeof a==="object")if(Array.isArray(a))return a.tag==="ls-array"?"["+a.map(function(a){return i(a,b+1)}).join(",")+"]":d("bs_caml_int64").to_string(a);else if(a instanceof c("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var d=a[0];a=a[1];if(typeof d==="string")return JSON.stringify(d)+":"+i(a,b+1);else throw c("unrecoverableViolation")("key must be a string","messenger_comet")}).join(",")+"}";throw c("unrecoverableViolation")("type not supported: %s"+typeof a,"messenger_comet")}g.stringify=i}),98);
__d("LSLogHistory.bs",[],(function(a,b,c,d,e,f){"use strict";var g={contents:[]};function a(a){return g.contents}function b(a){g.contents=[]}function c(a,b){g.contents.push({date:Date.now(),level:b,category:"lightspeed_log",event:"lightspeed_log_event",args:a})}f.getEntries=a;f.clearEntries=b;f.log=c}),null);
__d("LSLogHistory.re",["LSLogHistory.bs","bs_curry"],(function(a,b,c,d,e,f){a=b("LSLogHistory.bs").getEntries;f.getEntries=a;c=function(a,c){a=b("bs_curry")._2(b("LSLogHistory.bs").log,a,c);return a};f.log=c}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("base64-js-1.3.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){g.byteLength=h;g.toByteArray=d;g.fromByteArray=e;var a=[],b=[],c=typeof Uint8Array!=="undefined"?Uint8Array:Array;h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var d=0,e=h.length;d<e;++d)a[d]=h[d],b[h.charCodeAt(d)]=d;b["-".charCodeAt(0)]=62;b["_".charCodeAt(0)]=63;function f(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");a===-1&&(a=b);b=a===b?0:4-a%4;return[a,b]}function h(a){a=f(a);var b=a[0];a=a[1];return(b+a)*3/4-a}function i(a,b,c){return(b+c)*3/4-c}function d(a){var d,e=f(a),g=e[0];e=e[1];var h=new c(i(a,g,e)),j=0;g=e>0?g-4:g;for(var k=0;k<g;k+=4)d=b[a.charCodeAt(k)]<<18|b[a.charCodeAt(k+1)]<<12|b[a.charCodeAt(k+2)]<<6|b[a.charCodeAt(k+3)],h[j++]=d>>16&255,h[j++]=d>>8&255,h[j++]=d&255;e===2&&(d=b[a.charCodeAt(k)]<<2|b[a.charCodeAt(k+1)]>>4,h[j++]=d&255);e===1&&(d=b[a.charCodeAt(k)]<<10|b[a.charCodeAt(k+1)]<<4|b[a.charCodeAt(k+2)]>>2,h[j++]=d>>8&255,h[j++]=d&255);return h}function j(b){return a[b>>18&63]+a[b>>12&63]+a[b>>6&63]+a[b&63]}function k(a,b,c){var d,e=[];for(var b=b;b<c;b+=3)d=(a[b]<<16&16711680)+(a[b+1]<<8&65280)+(a[b+2]&255),e.push(j(d));return e.join("")}function e(b){var c=b.length,d=c%3,e=[],f=16383;for(var g=0,h=c-d;g<h;g+=f)e.push(k(b,g,g+f>h?h:g+f));d===1?(g=b[c-1],e.push(a[g>>2]+a[g<<4&63]+"==")):d===2&&(g=(b[c-2]<<8)+b[c-1],e.push(a[g>>10]+a[g>>4&63]+a[g<<2&63]+"="));return e.join("")}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("base64-js",["base64-js-1.3.0"],(function(a,b,c,d,e,f){e.exports=b("base64-js-1.3.0")()}),null);
__d("LS",["FBLogger","I64","LSDbKeyComparer","LSDict","LSIterationHelpers","LSJson","LSLogHistory.re","ODS","QuickPerformanceLogger","base64-js","bs_caml","bs_caml_format","bs_caml_int64","nativePromiseRegeneratorRuntime","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);k=function(){return a};return a}var l="LS_WEB";function m(a){return a.name.match(/secure_|inbox(?!_)/i)}var n=babelHelpers["extends"]({},c("bs_caml_int64"),{eq:function(a,b){return a==null&&b==null||a!=null&&b!=null&&c("bs_caml").i64_eq(a,b)},neq:function(a,b){return a==null&&b!=null||a!=null&&b==null||a!=null&&b!=null&&c("bs_caml").i64_neq(a,b)},lt:c("bs_caml").i64_lt,gt:c("bs_caml").i64_gt,le:c("bs_caml").i64_le,ge:c("bs_caml").i64_ge,min:c("bs_caml").i64_min,max:c("bs_caml").i64_max,to_int32:function(a){return a==null?a:c("bs_caml_int64").to_int32(a)},to_string:function(a){return a==null?a:c("bs_caml_int64").to_string(a)},from_string:function(a){try{return c("bs_caml_format").caml_int64_of_string(a)}catch(b){throw c("unrecoverableViolation")('Unable to cast "'+a+'" to int64',"messenger_comet")}},random:function(){var b=a.crypto||a.msCrypto;b=Array.from(b.getRandomValues(new Uint32Array(2)));b[0]>>>=1;return b}});function o(a){return c("base64-js").toByteArray(a).buffer}var p={to_string:function(a){if(a==null)return void 0;var b=new TextDecoder();return b.decode(a)},of_string:function(a){if(a==null)return void 0;var b=new TextEncoder();return b.encode(a).buffer},eq:function(a,b){if(a==null&&b==null)return!0;if(a==null||b==null)return!1;a=new Uint8Array(a);b=new Uint8Array(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},neq:function(a,b){return!p.eq(a,b)},compareTo:function(a,b){a=new Uint8Array(a);b=new Uint8Array(b);var c=Math.min(a.length,b.length);for(var d=0;d<c;d++){var e=a[d]-b[d];if(e!==0)return e}return a.length===b.length?0:a.length-b.length},le:function(a,b){return p.compareTo(a,b)<=0},lt:function(a,b){return p.compareTo(a,b)<0},ge:function(a,b){return p.compareTo(a,b)>=0},gt:function(a,b){return p.compareTo(a,b)>0}};function q(a){if(a.length!==1)throw c("unrecoverableViolation")("only literal strings supported","messenger_web_product");a=a[0];var b=parseInt(a.substr(-8),16);a=parseInt(a.substr(0,a.length-8),16);return d("I64").asI64([a>>>1^-(b&1),((b>>>1)+(a&1)*2147483648^-(b&1))>>>0])}function r(a,b){if(typeof a==="object"&&!Array.isArray(a)){var d,e;if(b==="asc"){Object.prototype.hasOwnProperty.call(a,"gt")&&(d=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(d!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");d=[a.gte,0]}Object.prototype.hasOwnProperty.call(a,"lt")&&(e=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(e!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");e=[a.lte,0]}}else{Object.prototype.hasOwnProperty.call(a,"lt")&&(d=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(d!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");d=[a.lte,0]}Object.prototype.hasOwnProperty.call(a,"gt")&&(e=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(e!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");e=[a.gte,0]}}return{start:d,end:e}}return{start:[a,0],end:[a,0]}}function s(a,b,c){var e=a.table(b.name);return{add:function(a){return e.add(a)},fetch:function(){for(var a=arguments.length,f=new Array(a),g=0;g<a;g++)f[g]=arguments[g];return d("LSIterationHelpers").fetch(f.length===0?[[[[]],void 0]]:f,"asc",b,c,e,r)},fetchDesc:function(){for(var a=arguments.length,f=new Array(a),g=0;g<a;g++)f[g]=arguments[g];return d("LSIterationHelpers").fetch(f.length===0?[[[[]],void 0]]:f,"desc",b,c,e,r)},put:function(a){return e.deleteThenInsert(a)},peekNextAutoIncrementId:function(){return e.peekNextAutoIncrementId()}}}function t(a,b,d,e){return{table:function(f){f=d.tableIds[f];if(b===0&&m(f))throw c("unrecoverableViolation")("cannot access secure table from dynamic mode","messenger_web_product");return s(a,f,e)}}}function u(a){var b="unknown_sproc";a=a.displayName;var c=/\[from (.*)\]/;c=c.exec(a);c!=null&&(b=c[1]);return b}var v=function(){var a=0,b={},d={};function e(a){var b;b=(b=d[a])!=null?b:0;d[a]=b+1}function f(c){if(c in b)return b[c];b[c]=a;a++;return b[c]}function g(a){var b=a.shouldLog;a=a.sprocName;e(a);if(!b)return;b=f(a);c("QuickPerformanceLogger")==null?void 0:c("QuickPerformanceLogger").markerStart(c("qpl")._(25302991,"143"),b);c("QuickPerformanceLogger")==null?void 0:c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:a}},{instanceKey:b})}function h(a,b){var d=a.shouldLog;a=a.sprocName;if(!d)return;d=f(a);a=b==="success"?2:3;c("QuickPerformanceLogger")==null?void 0:c("QuickPerformanceLogger").markerEnd(c("qpl")._(25302991,"143"),a,d)}function i(a){h(a,"success")}function j(a){h(a,"failure")}function k(a){return!1}return{call:g,success:i,failure:j,shouldLogSproc:k}}();function w(a,b,e,f,g,m,s,x){s===void 0&&(s={});x===void 0&&(x=void 0);var y=t(m,a,b,s),z=[];return{Map:c("LSDict"),constructor:{n:q},createArray:function(){return Object.defineProperty([],"tag",{value:"ls-array"})},db:y,i64:n,islc:d("LSIterationHelpers").slice,ct:d("LSIterationHelpers").count,blob:o,blobs:p,fe:d("LSIterationHelpers").forEach,ftr:d("LSIterationHelpers").filter,gb:d("LSIterationHelpers").groupBy,logger:function(a){if(x)return{mustfix:x,warn:x,info:x,debug:x};var b=c("FBLogger")("messenger_web_product");if(a.startsWith("epoch mismatch")||a.startsWith("cursor mismatch")){a=function(a){d("LSLogHistory.re").log(a,"error");a=a!=null?a.replace(/[\s,]+/g,"_"):"epoch_or_cursor_mismatch";d("ODS").bumpEntityKey(3185,"lsplatform",a)};return{mustfix:a,warn:a,info:function(a){return d("LSLogHistory.re").log(a,"log")},debug:function(a){return d("LSLogHistory.re").log(a,"debug")}}}else return b},like:function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(b).test(a)},loopAsync:function(a,b){function c(d){var e;return n.lt(d,a)?b(d).then(function(){return c(n.add(d,q(k())))}):((e=window.Promise)!=null?e:Promise).resolve()}return c(q(j()))},loopSync:function(a,b){for(var c=q(i());n.lt(c,a);c=n.add(c,q(h())))b(c)},merge:function(){function a(a,b){return d("LSDbKeyComparer").compareValue(a,b)>0?a:b}function b(a,b){return d("LSDbKeyComparer").compareValue([a[0],-a[1]],[b[0],-b[1]])<0?a:b}for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=e.reduce(function(c,d){d=r(d,"asc");return{start:c.start&&d.start?a(d.start,c.start):d.start||c.start,end:c.end&&d.end?b(d.end,c.end):d.end||c.end}},{});return babelHelpers["extends"]({},g.start?g.start[1]?{gt:g.start[0]}:{gte:g.start[0]}:null,g.end?g.end[1]?{lt:g.end[0]}:{lte:g.end[0]}:null)},n:q,nop:function(b){var d,f,g,h,i=arguments;return c("nativePromiseRegeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:if(!(typeof b==="string")){j.next=11;break}d=e[b+".bs"];if(!(d==null)){j.next=4;break}throw c("unrecoverableViolation")("Attempted to call unimplemented native op with id: "+b,"messenger_web_product");case 4:if(!d.load){j.next=8;break}j.next=7;return c("nativePromiseRegeneratorRuntime").awrap(d.load());case 7:d=j.sent;case 8:d=d.call;j.next=12;break;case 11:d=b.call;case 12:j.prev=12;for(f=i.length,g=new Array(f>1?f-1:0),h=1;h<f;h++)g[h-1]=i[h];return j.abrupt("return",d.apply(void 0,[m,a].concat(g)));case 17:j.prev=17;j.t0=j["catch"](12);c("FBLogger")("messenger_web_product").catching(j.t0).addMetadata(l,"NATIVE_OP_ID",b.toString()).warn("Native operation %s failed",b.toString());throw j.t0;case 21:case"end":return j.stop()}},null,this,[[12,17]])},notnull:function(a){if(a===null)throw c("unrecoverableViolation")("value should not be null","messenger_web_product");return a},ntop:function(b,d){var f,g,h,i,j=arguments;return c("nativePromiseRegeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:if(!(typeof d==="string")){k.next=11;break}f=e[d.toString()];if(!(f==null)){k.next=4;break}throw c("unrecoverableViolation")("Attempted to call unimplemented native type op with type: "+b+" and id: "+d,"messenger_web_product");case 4:if(!f.load){k.next=8;break}k.next=7;return c("nativePromiseRegeneratorRuntime").awrap(f.load());case 7:f=k.sent;case 8:f=f.call;k.next=12;break;case 11:f=d.call;case 12:for(g=j.length,h=new Array(g>2?g-2:0),i=2;i<g;i++)h[i-2]=j[i];return k.abrupt("return",f.apply(void 0,[m,a].concat(h)));case 14:case"end":return k.stop()}},null,this)},print:function(a){},resolve:function(a){var b;return((b=window.Promise)!=null?b:Promise).resolve(a)},rm:n.of_int32(a),seq:function(a){return a.slice(1).reduce(function(a,b){return a.then(b)},a[0]())},slc:function(a,b){return Array.prototype.slice.call(a,b)},sp:function(d){var h,i,j,k,n,o,p,q,r,t=arguments;return c("nativePromiseRegeneratorRuntime").async(function(y){while(1)switch(y.prev=y.next){case 0:if(!(typeof d==="string")){y.next=10;break}h=e[d];if(!h.load){y.next=6;break}y.next=5;return c("nativePromiseRegeneratorRuntime").awrap(h.load());case 5:h=y.sent;case 6:if(!(h==null)){y.next=8;break}throw c("unrecoverableViolation")("Attempted to call unimplemented stored procedure with id: "+d,"messenger_web_product");case 8:y.next=11;break;case 10:h=d;case 11:i=this;y.t0=a;y.next=y.t0===0?15:y.t0===2?17:19;break;case 15:i=w(2,b,e,f,g,m,s,x);return y.abrupt("break",19);case 17:i=w(1,b,e,f,g,m,s,x);return y.abrupt("break",19);case 19:j=u(h);k=v.shouldLogSproc(j);n={sprocName:j,shouldLog:k};z.push(d);y.prev=23;v.call(n);for(o=t.length,p=new Array(o>1?o-1:0),q=1;q<o;q++)p[q-1]=t[q];y.next=28;return c("nativePromiseRegeneratorRuntime").awrap(h.apply(void 0,p.concat([i])));case 28:r=y.sent;v.success(n);return y.abrupt("return",r);case 33:y.prev=33;y.t1=y["catch"](23);c("FBLogger")("messenger_web_product").catching(y.t1).addMetadata(l,"SPROC_STACK",z.join("\n")).warn("Sproc %s failed",d);v.failure(n);throw y.t1;case 38:y.prev=38;z.pop();return y.finish(38);case 41:case"end":return y.stop()}},null,this,[[23,33,38,41]])},"throw":function(a){throw c("unrecoverableViolation")(a,"messenger_comet")},ta:d("LSIterationHelpers").toArray,toJSON:function(a){return d("LSJson").stringify(a)},sb:d("LSIterationHelpers").sortBy,localize:function(a,b){a=c("bs_caml_int64").to_string(a);var d=function(a){return!b?"":b[a]||""};return f(a,d).toString()},localizeV2:function(a,b){a=c("bs_caml_int64").to_string(a);var d=function(a){return!b?"":b[a]||""};return g(a,d).toString()}}}w.n=q;g["default"]=w}),98);
__d("LSDbForeignKeys.bs",["bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(a,c,d,e,f){f=b("bs_js_dict").get(a.tableNames,d);if(f!==void 0){f.cascadeUpdates.push({tableName:c,indexName:e});return}else return b("unrecoverableViolation")("Failed to add foreign key","messenger_comet")};c(a,"attachments","messages","fk_messages",void 0);c(a,"attachment_items","attachments","fk_attachments",void 0);c(a,"attachment_ctas","attachments","fk_attachments",void 0);c(a,"thread_nullstate_ctas","threads","threadKeyCtaId",void 0);c(a,"messages","threads",void 0,void 0);c(a,"thread_nullstate","threads",void 0,void 0);c(a,"messages_ranges_v2__generated","threads",void 0,void 0);c(a,"participants","threads",void 0,void 0);c(a,"mi_act_mapping_table","threads","fk_threads",void 0);c(a,"encrypted_backup_restore_task_payload_context","pending_tasks",void 0,void 0);c(a,"secure_encrypted_backups_device_supported_versions","secure_encrypted_backups_devices","fk_secure_encrypted_backups_device_supported_versions_device_id",void 0);c(a,"secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","fk_secure_encrypted_backups_client_state",void 0);c(a,"pending_backups_context_v2","pending_tasks","fk_pending_tasks",void 0);c(a,"secure_recovery_code_data","pending_tasks","fk_pending_tasks",void 0);return c(a,"secure_encrypted_backups_message_thread_id_context","pending_tasks","fk_pending_tasks",void 0)}f.configure=a}),null);
__d("LSMetadata",["ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},c={},e=-1;for(var f=0;f<a.length;f++){var g=a[f];for(var g=g,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k;if(h){if(i>=g.length)break;k=g[i++]}else{i=g.next();if(i.done)break;k=i.value}k=k;j={autoIncrement:(j=k.auto_increment)!=null?j:!1,cascadeUpdates:[],id:parseInt(k.id,10),indexes:(j=k.indexes)!=null?j:{},name:k.name,primaryKeyIds:k.primary_key};b[j.id]=j;c[j.name]=j;j.id>e&&(e=j.id)}}k={autoIncrement:!1,cascadeUpdates:[],id:e+1,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};b[k.id]=k;c[k.name]=k;return{tableIds:b,tableNames:c}}function a(a){a=h(a);var b=a.tableIds;a=a.tableNames;return{tableIds:b,tableNames:a}}g.buildTableData=h;g.buildMetadata=a}),98);
__d("MPWLSDBCreateSchema.bs",["LSDbForeignKeys.bs","LSMetadata","LSTableSchemas"],(function(a,b,c,d,e,f){"use strict";a=b("LSMetadata").buildMetadata(b("LSTableSchemas"));b("LSDbForeignKeys.bs").configure(a);f.metadata=a}),null);
__d("LS.bs",["LS","LSLocalizedStrings","LSLocalizedStringsV2","MPWLSDBCreateSchema.bs"],(function(a,b,c,d,e,f){"use strict";var g={},h=b("LSLocalizedStringsV2"),i=b("LSLocalizedStrings");function a(a){return b("LS")(1,b("MPWLSDBCreateSchema.bs").metadata,g,i,h,a,0)}f.make=a;f.modules=g}),null);
__d("MessengerWebQuickLogModule",[],(function(a,b,c,d,e,f){a=Object.freeze({ARMADILLO_WEB_VIDEO_TYPE_CHECK:25309473,COMPOSER_INTERACTION:25296900,FETCH_MORE_THREAD_LIST:25296906,FETCH_THREAD_INFO:25296904,FETCH_THREAD_LIST:25296905,FIRSTCHATTABOPEN_WWW:25296897,FORWARD_INTERACTION:25298392,GROUP_INPUT_INDIVIDUAL_TAB_OPEN_WWW:25296899,GROUP_INPUT_TAB_OPEN_WWW:25296898,INBOX_THREAD_NAVIGATION:25304023,JUMP_TO_MOST_RECENT_MESSAGE:25300623,JUMP_TO_REPLIED_MESSAGE:25301087,LS_INIT:25305590,LS_PLATFORM_LOGOUT:25311266,MAW_BRIDGE_TIMEOUT:25300103,MAW_BULK_WRITE_RECEIPTS:25297955,MAW_DECRYPT_MESSAGE:25306682,MAW_DECRYPT_MESSAGE_FINAL:25307464,MAW_DEVICE_REGISTRATION:25302457,MAW_ENCRYPTION_AT_REST_DECRYPT:25313004,MAW_ENCRYPTION_AT_REST_ENCRYPT:25300256,MAW_ENCRYPT_MESSAGE:25299294,MAW_FRANKING_VALIDATION:25299246,MAW_GET_DEVICES:25307483,MAW_HANDLE_INCOMING_MSG_TXN:25311150,MAW_ICDC_ERROR:25313187,MAW_IDB_NOT_SUPPORTED:25299354,MAW_INIT:25310776,MAW_LOCAL_STORAGE_NOT_SUPPORTED:25309925,MAW_MAYBE_WITH_TIMEOUT:25301116,MAW_MEDIA_DOWNLOAD:25312150,MAW_MEDIA_UPLOAD:25313100,MAW_MESSAGE_LIST_INIT:25298765,MAW_MESSAGE_LIST_PROCESSINIG:25308079,MAW_MULTI_TAB_MUTEX_NO_PERMISSION_INIT:25310181,MAW_MULTI_TAB_MUTEX_NO_PERMISSION_LOCALTAKEOVER:25312554,MAW_MULTI_TAB_MUTEX_NO_PERMISSION_REINIT:25299377,MAW_MULTI_TAB_WORKER_REINIT:25310984,MAW_OFFLINE_QUEUE_EXECUTION:25306361,MAW_OFFLINE_RETRY:25309990,MAW_PRE_LOGOUT:25309731,MAW_QUERY_GROUP:25310326,MAW_QUERY_GROUPS:25304433,MAW_RETRY_RECEIPTS:25308942,MAW_RETRY_RECEIPTS_SENT:25301644,MAW_SAVE_SIGNAL_SESSION_RETRIES:25309040,MAW_SEND_MESSAGE:25303022,MAW_SYNCD_FATAL_ERROR:25310891,MAW_TIMED_WAIT_UNTIL_COMPLETED:25301560,MAW_TIMED_WAIT_UNTIL_PERSISTED:25305468,MAW_TRANSACTION:25310437,MAW_UNVAULT:25313217,MAW_UPDATE_DEVICES_FOR_USER_TXN:25310731,MAW_VAULT:25301509,MAW_WA_CONNECTIVITY:25312111,MAW_WRITE_MSG_RECEIPTS_TXN:25299660,PAGE_LOAD_MDOTCOM_WWW:25296901,REPLY_INTERACTION:25298086,SEND_MESSAGE:25296903,SPROC_CALL:25302991,THREAD_LOAD_MDOTCOM_WWW:25296902});f["default"]=a}),66);
__d("LSDatabaseDeferred.bs",["Promise","QuickPerformanceLogger","bs_curry","cr:11003","qpl"],(function(a,b,c,d,e,f){"use strict";a=b("bs_curry")._1(b("cr:11003").get,void 0).then(function(a){try{b("QuickPerformanceLogger").markerPoint(b("qpl")._(25305590,"1127"),"db_created")}catch(a){}return b("Promise").resolve(a)});c=b("cr:11003");f.$LSPersistedDatabaseProvider$OR$LSEphemeralDatabaseProvider$requireCond=b("cr:11003");f.DatabaseProvider=c;f.db=a}),null);
__d("LSDatabaseType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70],sa=[0,71],ta=[0,72],ua=[0,73],va=[0,74],wa=[0,75],xa=[0,76],ya=[0,77],za=[0,78],Aa=[0,79],Ba=[0,80],Ca=[0,81],Da=[0,82],Ea=[0,84],Fa=[0,85],Ga=[0,86],Ha=[0,87],Ia=[0,88],Ja=[0,89],Ka=[0,90],La=[0,91],Ma=[0,92],Na=[0,93],Oa=[0,94],Pa=[0,95],Qa=[0,96],Ra=[0,97],Sa=[0,98],Ta=[0,99],Ua=[0,100],Va=[0,101],Wa=[0,102],Xa=[0,103],Ya=[0,104],Za=[0,105],$a=[0,106],ab=[0,107],bb=[0,108],cb=[0,109],db=[0,110],eb=[0,111],fb=[0,112],gb=[0,113],hb=[0,114];f.test=a;f.mailbox=c;f.contact=d;f.appAlerts=e;f.core=b;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra;f.carrierMessaging=sa;f.notificationsClient=ta;f.cat=ua;f.composerSettings=va;f.groupThreadImage=wa;f.coplayMetadata=xa;f.searchUserGroups=ya;f.tutorial=za;f.paidAds=Aa;f.avatarsCoPresence=Ba;f.graphql=Ca;f.transcribe=Da;f.ixtServerTrigger=Ea;f.novi=Fa;f.testFramework=Ga;f.broker=Ha;f.openMessenger=Ia;f.anonymousCredentials=Ja;f.mlModel=Ka;f.localAuth=La;f.soundBite=Ma;f.encryptedBackups=Na;f.businessOrderManagement=Oa;f.e2eeMessagingMetadataMailbox=Pa;f.communitiesMailbox=Qa;f.mostLikelyToPollQuestions=Ra;f.breakoutSessions=Sa;f.messagingNotificationConfigs=Ta;f.sandboxSelector=Ua;f.gamesBotThread=Va;f.fakeMessageStreamInternalOnly=Wa;f.coPresence=Xa;f.communityExclusive=Ya;f.clientOnlySample=Za;f.urlBlackhole=$a;f.sharing=ab;f.encryptedBackupsVersioning=bb;f.rpPolls=cb;f.everythingTogether=db;f.immersiveModesSpaces=eb;f.inAppPurchaseKit=fb;f.decentralizedTypes=gb;f.armadilloDevice=hb}),null);
__d("LSMailboxMessagesRangeQueryDirection.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.before=a;f.after=c}),null);
__d("LSTransaction.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a.runInTransaction(b,function(){switch(c){case"readOnly":return"readonly";case"readWrite":return"readwrite"}}())}f.run=a}),null);
__d("ReQL.bs",["ReQL","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=function a(c){var d=c.NAME;if(d!=="range")if(d==="lessThan")return b("bs_js_dict").fromArray([["lt",c.VAL]]);else if(d==="greaterThan")return b("bs_js_dict").fromArray([["gt",c.VAL]]);else if(d==="greaterThanOrEqual")return b("bs_js_dict").fromArray([["gte",c.VAL]]);else return b("bs_js_dict").fromArray([["lte",c.VAL]]);d=c.VAL;return b("bs_js_dict").fromArray(b("bs_js_dict").entries(a(d[0])).concat(b("bs_js_dict").entries(a(d[1]))))};return a.bounds(d(c))}function c(a,c){if(!c)return b("unrecoverableViolation")("only support 5","messenger_web_product");var d=c.tl;c=c.hd;if(!d)return a.getKeyRange(c);var e=d.tl;d=d.hd;if(!e)return a.getKeyRange(c,d);var f=e.tl;e=e.hd;if(!f)return a.getKeyRange(c,d,e);var g=f.tl;f=f.hd;if(g)if(g.tl)return b("unrecoverableViolation")("only support 5","messenger_web_product");else return a.getKeyRange(c,d,e,f,g.hd);else return a.getKeyRange(c,d,e,f)}function d(a,b){return a.filter(b)}function e(a,b){return a.map(b)}function g(a){return b("ReQL").toArray(a)}function h(a,c){return b("ReQL").mergeJoin(a,c)}function i(a,c){return b("ReQL").leftJoin(a,c)}function j(a,b){return a.take(b)}function k(a){return b("ReQL").first(a)}function l(a){return b("ReQL").firstExn(a)}function m(a){return b("ReQL").fromTableAscending(a)}function n(a){return b("ReQL").fromTableDescending(a)}function o(a){return b("ReQL").fromTableAscending(a)}function p(a){return b("ReQL").fromTableDescending(a)}f.filter=d;f.map=e;f.toArray=g;f.mergeJoin=h;f.leftJoin=i;f.bounds=a;f.getKeyRange=c;f.take=j;f.first=k;f.firstExn=l;f.fromTableAscending=m;f.fromTableDescending=n;f.fromIndexAscending=o;f.fromIndexDescending=p}),null);
__d("MWLSPreloadThreadForContact.bs",["LS.bs","LSDatabaseDeferred.bs","LSDatabaseType.bs","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection.bs","LSTransaction.bs","LSVerifyThreadRowExists","ReQL.bs","bs_caml_format","promiseDone"],(function(a,b,c,d,e,f){"use strict";function g(a){var c=b("LSDatabaseDeferred.bs").db.then(function(c){return b("LSTransaction.bs").run(c,function(c){var d=b("bs_caml_format").caml_int64_of_string(a);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages_ranges_v2__generated")),{hd:d,tl:0})).then(function(a){if(a!==void 0)if(a.minMessageId===a.maxMessageId&&a.minMessageId!=="")return b("LSIssueMessagesRangeQuery")(d,a.minTimestampMs,b("LSMailboxMessagesRangeQueryDirection.bs").before,b("LS.bs").make(c));else return;else return b("LSVerifyThreadRowExists")(d,void 0,b("LSDatabaseType.bs").mailbox,b("LS.bs").make(c))})},"readWrite")});b("promiseDone")(c,void 0,void 0)}function a(){return g}f.verifyThreadExists=g;f.usePreloaderForUser=a}),null);
__d("MWChatTabEntryPoints.bs",[],(function(a,b,c,d,e,f){"use strict";a={};f.tabEntryPoints=a}),null);
__d("MessengerWebEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD_PARTICIPANTS:"add_participants",BIRTHDAYS:"birthdays",CHAT_HEADS:"chat_heads",CHAT_HEADS_OVERFLOW:"chat_heads_overflow",CHAT_SEARCH:"chat_search",CHAT_WITH_SIDEBAR:"chat_with_sidebar",COMMUNITY_HELP:"community_help",COMPAT:"compat",COOKIE:"cookie",CREATE_GROUP_DIALOG:"create_group_dialog",CRISIS_LISTING_ATTACHMENT:"crisis_listing_attachment",EVENTS_PERMALINK:"events_permalink",FEED_POLL:"feed_poll",FEED_STORY_CTA:"feed_story_cta",FILES_TAB:"files_tab",FRIENDS_TAB:"friends_tab",FUNDRAISER:"fundraiser",FUNDRAISER_SUPPORT_REACTIVE_FAQ:"fundraiser_support:reactive_faq",FUNDRAISER_SUPPORT_REACTIVE_MORE_MENU:"fundraiser_support:reactive_more_menu",FUNDRAISER_SUPPORTERS_LIST:"fundraiser_supporters_list",GRATITUDE:"gratitude",GROUP_CHATS:"group_chats",GROUP_EXPERTS_DISCOVERY_INVITE:"group_experts_discovery_invite",GROUP_MEMBERS_TAB:"group_members_tab",GROUP_QUALITY:"group_quality",GROUP_REMOVE_POST_TOMBSTONE:"group_remove_post_tombstone",GROUP_WELCOME_POST:"group_welcome_post",HOVERCARD:"hovercard",INBOX:"inbox",INBOX_TRAY:"inbox_tray",JEWEL:"jewel",JEWEL_NEW_MESSAGE:"jewel_new_message",JEWEL_SEARCH:"jewel_search",JOBS:"jobs",LINKS_TAB:"links_tab",LOCAL_BUSINESSES_NEARBY:"local_businesses_nearby",LWI_SUPPORT_BUTTON:"lwi_support_button",MARKETPLACE:"marketplace",MEDIA_TAB:"media_tab",MEMORIES_HOME:"memories_home",MENTAL_HEALTH:"mental_health",MENTORSHIP:"mentorship",MESSAGE_RECEIVED:"message_received",MUTUAL_FRIENDS_DIALOG:"mutual_friends_dialog",NEW_MESSAGE_BUTTON:"new_msg_button",OFFER:"offer",P2P_PAYMENTS:"p2p_payments",PAGES_ABOUT:"pages_about",PAGES_ADMIN_INVITE_ITEM:"pages_admin_invite_item",PAGES_COMMENT_COMPOSER:"pages_comment_composer",PAGES_COMMUNITY_FRIENDS_DIALOG:"pages_community_friends_dialog",PAGES_CTA:"pages_cta",PAGES_DISCOVER_SUGGESTED_PAGE:"pages_discover_suggested_page",PAGES_HEADER:"pages_header",PAGES_HOME_FRIENDS_DIALOG:"pages_home_friends_dialog",PAGES_HOVERCARD:"pages_hovercard",PAGES_LIKE_INVITE_ITEM:"pages_like_invite_item",PAGES_POPUP_CHAT:"pages_popup_chat",PAGES_PRIVATE_REPLY:"pages_private_reply",PROFILE_SERVICES_MENU:"profile_services_menu",REACTOR_LIST:"reactor_list",RESHARES_DIALOG:"reshares_dialog",RHC_SEARCH:"rhc_search",RHC_SEARCH_ICON:"rhc_search_icon",ROOMS_LOBBY:"rooms_lobby",ROOMS_NULL_STATE:"rooms_null_state",SEARCH:"search",SEARCH_RESULT_PAGE:"search_result_page",SHOP:"shop",SIDEBAR:"sidebar",STORIES_VIEWED_BY_LIST:"stories_viewed_by_list",STORY_AGGREGATED_USERS:"story_aggregated_users",STORY_SEEN_BY_LIST:"story_seen_by_list",THREAD_DETAILS:"thread_details",TIMELINE:"timeline",UICE:"uice",UNKNOWN:"unknown",VOLUNTEERING:"volunteering",WORK_SHIFT_SWAP:"work_shift_swap"});f["default"]=a}),66);
__d("MessengerWebEntryPointsUtil.bs",["MessengerWebEntryPoint"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="pagesLikeInviteThem")return b("MessengerWebEntryPoint").PAGES_LIKE_INVITE_ITEM;else if(a==="pagesPrivateReply")return b("MessengerWebEntryPoint").PAGES_PRIVATE_REPLY;else if(a==="inboxActiveContacts"||a==="inboxArchived"||a==="inboxSpam"||a==="inboxFolder"||a==="inboxThreadList"||a==="inboxRecentThreads"||a==="inboxRemainingThreads"||a==="pendingRequests"||a==="inboxRestricted"||a==="archieve"||a==="inboxInThread"||a==="inboxPendingRequests")return b("MessengerWebEntryPoint").INBOX;else if(a==="jobs")return b("MessengerWebEntryPoint").jobs;else if(a==="storySeenByList"||a==="friendsTab")return b("MessengerWebEntryPoint").STORY_SEEN_BY_LIST;else if(a==="chatParticipants")return b("MessengerWebEntryPoint").ADD_PARTICIPANTS;else if(a==="compat")return b("MessengerWebEntryPoint").COMPAT;else if(a==="cookie")return b("MessengerWebEntryPoint").COOKIE;else if(a==="pagesAdminInviteItem")return b("MessengerWebEntryPoint").PAGES_ADMIN_INVITE_ITEM;else if(a==="groupWelcomePost")return b("MessengerWebEntryPoint").GROUP_WELCOME_POST;else if(a==="sidebarContactsList"||a==="sidebarGroupsList")return b("MessengerWebEntryPoint").SIDEBAR;else if(a==="jewelNestedFolder"||a==="jewel")return b("MessengerWebEntryPoint").JEWEL;else if(a==="shop")return b("MessengerWebEntryPoint").SHOP;else if(a==="pageLikeChaining")return b("MessengerWebEntryPoint").PAGE_LIKE_CHAINING;else if(a==="chatheadsOverflow")return b("MessengerWebEntryPoint").CHAT_HEADS_OVERFLOW;else if(a==="feedDynamicHoverCard")return b("MessengerWebEntryPoint").PAGES_HOVERCARD;else if(a==="messengerUniversalSearch")return b("MessengerWebEntryPoint").SEARCH_RESULT_PAGE;else if(a==="mentorship")return b("MessengerWebEntryPoint").MENTORSHIP;else if(a==="reactorList")return b("MessengerWebEntryPoint").REACTOR_LIST;else if(a==="feedPoll")return b("MessengerWebEntryPoint").FEED_POLL;else if(a==="timeline"||a==="feedOrganicPost")return b("MessengerWebEntryPoint").TIMELINE;else if(a==="pageResponsivenessCard"||a==="pageAboutCard")return b("MessengerWebEntryPoint").PAGES_ABOUT;else if(a==="inboxSearch"||a==="sidebarSearch"||a==="search")return b("MessengerWebEntryPoint").SEARCH;else if(a==="storyAggregatedUsers")return b("MessengerWebEntryPoint").STORY_AGGREGATED_USERS;else if(a==="fundraiserMoreMenu")return b("MessengerWebEntryPoint").FUNDRAISER_SUPPORT_REACTIVE_MORE_MENU;else if(a==="fundraiserFaq")return b("MessengerWebEntryPoint").FUNDRAISER_SUPPORT_REACTIVE_FAQ;else if(a==="notificationInThreadReply")return b("MessengerWebEntryPoint").MESSAGE_RECEIVED;else if(a==="roomsNullState")return b("MessengerWebEntryPoint").ROOMS_NULL_STATE;else if(a==="storyViewerSheetRow")return b("MessengerWebEntryPoint").STORIES_VIEWED_BY_LIST;else if(a==="feedOrganicPostNewsfeedPagePostCta")return b("MessengerWebEntryPoint").PAGES_CTA;else if(a==="chatheadsNewMessage")return b("MessengerWebEntryPoint").NEW_MESSAGE_BUTTON;else if(a==="groupExperts"||a==="groupCommunityFriendsDialog")return b("MessengerWebEntryPoint").GROUP_EXPERTS_DISCOVERY_INVITE;else if(a==="hovercard")return b("MessengerWebEntryPoint").HOVERCARD;else if(a==="crisisListingAttachment")return b("MessengerWebEntryPoint").CRISIS_LISTING_ATTACHMENT;else if(a==="mentalHealth")return b("MessengerWebEntryPoint").MENTAL_HEALTH;else if(a==="event")return b("MessengerWebEntryPoint").EVENTS_PERMALINK;else if(a==="jewelSearch")return b("MessengerWebEntryPoint").JEWEL_SEARCH;else if(a==="pagePopupChat")return b("MessengerWebEntryPoint").PAGES_POPUP_CHAT;else if(a==="communityHelp")return b("MessengerWebEntryPoint").COMMUNITY_HELP;else if(a==="jewelNewMessage")return b("MessengerWebEntryPoint").JEWEL_NEW_MESSAGE;else if(a==="fundraiser")return b("MessengerWebEntryPoint").FUNDRAISER;else if(a==="memories")return b("MessengerWebEntryPoint").MEMORIES_HOME;else if(a==="fundraiserSupportersList")return b("MessengerWebEntryPoint").FUNDRAISER_SUPPORTERS_LIST;else if(a==="groupRemovePost")return b("MessengerWebEntryPoint").GROUP_REMOVE_POST_TOMBSTONE;else if(a==="pagesHeader")return b("MessengerWebEntryPoint").PAGES_HEADER;else if(a==="groupMembers")return b("MessengerWebEntryPoint").GROUP_MEMBERS_TAB;else if(a==="chatheads")return b("MessengerWebEntryPoint").CHAT_HEADS;else if(a==="birthday")return b("MessengerWebEntryPoint").BIRTHDAYS;else if(a==="localBusinessesNearby")return b("MessengerWebEntryPoint").LOCAL_BUSINESSES_NEARBY;else if(a==="marketplace")return b("MessengerWebEntryPoint").MARKETPLACE;else if(a==="mutualFriendsDialog")return b("MessengerWebEntryPoint").MUTUAL_FRIENDS_DIALOG;else if(a==="feedOrganicPostViewAndMessage")return b("MessengerWebEntryPoint").FEED_STORY_CTA;else if(a==="profileServicesMenu")return b("MessengerWebEntryPoint").PROFILE_SERVICES_MENU;else if(a==="adsCta")return b("MessengerWebEntryPoint").RESHARES_DIALOG;else if(a==="offer")return b("MessengerWebEntryPoint").OFFER;else if(a==="payments")return b("MessengerWebEntryPoint").P2P_PAYMENTS;else if(a==="groupQuality")return b("MessengerWebEntryPoint").GROUP_QUALITY;else if(a==="pagesHomeFriendsDialog")return b("MessengerWebEntryPoint").PAGES_HOME_FRIENDS_DIALOG;else if(a==="communityFriendsDialog")return b("MessengerWebEntryPoint").PAGES_COMMUNITY_FRIENDS_DIALOG;else if(a==="groupChats")return b("MessengerWebEntryPoint").GROUP_CHATS;else if(a==="gratitude")return b("MessengerWebEntryPoint").GRATITUDE;else return b("MessengerWebEntryPoint").UNKNOWN}f.cast=a}),null);
__d("LSJSInMemoryStorage.bs",["LSStorage","MPWLSDBCreateSchema.bs","ReStore","createReStoreEphemeralPersistence"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReStore")(b("createReStoreEphemeralPersistence")(),b("LSStorage").createSubscriptionManager(b("MPWLSDBCreateSchema.bs").metadata),a)}f.make=a}),null);
__d("LSSyncChannel.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];f.mqtt=a;f.http=c;f.dgw=d}),null);
__d("LSMailboxInitialSyncCursor.bs",["CurrentLocale","LSSyncChannel.bs","gkx"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("1224637")?183:150;c=b("gkx")("1224637")?360:300;d=b("CurrentLocale").get();e={scale:1,preview_height:200,preview_width:a,preview_height_large:400,preview_width_large:c,full_height:200,snapshot_num_threads_per_page:15,locale:d};a={contents:b("LSSyncChannel.bs").mqtt};c={contents:0};d={contents:e};f.defaultSyncParams=e;f.syncChannel=a;f.lastSyncTimestampMs=c;f.syncParams=d}),null);
__d("LSSyncGroupsUtils.bs",["CurrentLocale","LSDict","LSJson","LSMailboxInitialSyncCursor.bs","LSSyncChannel.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b.reduce(function(b,c){return b.then(function(b){return a.put(c)})},window.Promise.resolve(void 0))}c=b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]]));e={groupId:(d=b("bs_caml_int64")).zero,currentCursor:void 0,syncStatus:d.zero,syncParams:c,sendSyncParams:!0,minTimeToSyncTimestampMs:d.neg_one,canIgnoreTimestamp:!1,priority:d.zero,lastSyncRequestTimestampMs:d.zero,regionHint:void 0,lastSyncCompletedTimestampMs:void 0,dataTraceId:void 0,initTraceTimestampMs:void 0,syncChannel:b("LSSyncChannel.bs").mqtt};c=d.zero;b=d.of_float(b("LSMailboxInitialSyncCursor.bs").lastSyncTimestampMs.contents);c={taskQueueName:"",syncDatabaseId:d.zero,epochId:c,networkTaskIdentifier:void 0,lastSentTimestampMs:d.zero,failureCount:d.zero,lastSyncRequestTimestampMs:b,lastDelayedRequestTimestampMs:void 0};b={taskQueueName:"",syncDatabaseId:d.zero,epochId:void 0,networkTaskIdentifier:void 0,lastSentTimestampMs:d.zero,failureCount:d.zero,lastSyncRequestTimestampMs:d.zero,lastDelayedRequestTimestampMs:void 0};f.writeRows=a;f.defaultNetworkRequest=b;f.defaultSyncGroup=e;f.preloadedNetworkRequest=c}),null);
__d("MNetRankType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,26],B=[0,27],C=[0,28],D=[0,29],E=[0,30],F=[0,31],G=[0,32],H=[0,33],I=[0,34],J=[0,35],K=[0,36],L=[0,37],M=[0,38],N=[0,39],O=[0,40],P=[0,41],Q=[0,42],R=[0,43],S=[0,44],T=[0,45];f.inboxActiveNow=a;f.messengerUserSearch=c;f.montageUser=d;f.broadcastFlowTopContacts=e;f.broadcastFlowNeedyContacts=b;f.messengerGroupSearch=g;f.rtcTopContacts=h;f.pstnTopContacts=i;f.messengerNonContactSearch=j;f.messengerSearchBootstrap=k;f.activeBeeper=l;f.montageAndActiveNow=m;f.messengerPageSearch=n;f.messengerGameSearch=o;f.wwwNullstate=p;f.rtcGrowth=q;f.messengerOmnipickerNullstate=r;f.rtcSequentialTopContacts=s;f.messengerUserSearchNullstate=t;f.mliteDiodePromotion=u;f.messengerPendingRequest=v;f.messengerCloseConnection=w;f.messengerMontageSeenSheet=x;f.messengerOmnipickerKeypress=y;f.messengerNotifQpTargetingUpsellType=z;f.contactTabActiveNow=A;f.messengerUnivNullstateBlend=B;f.messengerInboxThreads=C;f.inboxActiveNowNoBoosting=D;f.broadcastFlowTopContactsFbShare=E;f.broadcastFlowTopContactsMessengerShare=F;f.broadcastFlowTopContactsExternalShare=G;f.messengerTrendingStickers=H;f.messengerBroadcastFlowTopThreads=I;f.messengerSends28d=J;f.messengerRoomInvite=K;f.messengerRoomInviteSearch=L;f.inboxActiveNowPrefetch=M;f.messengerBlendedKeypress=N;f.messengerBlendedNullstate=O;f.messengerCarrierMessaging=P;f.messengerRoomInviteGroup=Q;f.messengerInboxBirthdayItem=R;f.instagramDirectSearchNullstate=S;f.broadcastFlowTopContactsAndTopThreadFbShare=T}),null);
__d("LSDefaultSyncGroups.bs",["CurrentUser","LSDatabaseType.bs","LSMailboxInitialSyncCursor.bs","LSSyncGroupsUtils.bs","MNetRankType.bs","bs_caml_format","bs_caml_int64","bs_curry","cr:11269","qex"],(function(a,b,c,d,e,f){"use strict";c=b("qex")._("1549");d=c==null?!1:c;var g={mnet_rank_types:d?[b("MNetRankType.bs").messengerUserSearch,b("MNetRankType.bs").messengerUserSearchNullstate,b("MNetRankType.bs").inboxActiveNow,b("MNetRankType.bs").messengerOmnipickerNullstate].map(b("bs_caml_int64").to_int32):[]};function h(a){return[function(c){var d;return(c=b("LSSyncGroupsUtils.bs")).writeRows(a.table("network_requests"),[{taskQueueName:c.preloadedNetworkRequest.taskQueueName,syncDatabaseId:(d=b("LSDatabaseType.bs")).mailbox,epochId:c.preloadedNetworkRequest.epochId,networkTaskIdentifier:c.preloadedNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.preloadedNetworkRequest.lastSentTimestampMs,failureCount:c.preloadedNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.preloadedNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.preloadedNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.preloadedNetworkRequest.taskQueueName,syncDatabaseId:d.contact,epochId:c.preloadedNetworkRequest.epochId,networkTaskIdentifier:c.preloadedNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.preloadedNetworkRequest.lastSentTimestampMs,failureCount:c.preloadedNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.preloadedNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.preloadedNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.payments,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.threadTheme,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.sticker,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.settings,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.inthreadbanner,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs}])},function(c){var d,e,f;return(c=b("LSSyncGroupsUtils.bs")).writeRows(a.table("sync_groups"),[{groupId:(d=b("LSDatabaseType.bs")).mailbox,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:JSON.stringify((e=b("LSMailboxInitialSyncCursor.bs")).syncParams.contents),sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:(f=b("bs_caml_int64")).of_float(e.lastSyncTimestampMs.contents),regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:e.syncChannel.contents},{groupId:d.contact,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:f.of_float(e.lastSyncTimestampMs.contents),regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:e.syncChannel.contents},{groupId:d.payments,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.threadTheme,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:f.neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.sticker,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.ranking,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:JSON.stringify(g),sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.settings,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.inthreadbanner,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:f.neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.stories,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:f.neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel}])},function(c){return b("LSSyncGroupsUtils.bs").writeRows(a.table("_user_info"),[{id:b("bs_caml_int64").one,facebookUserId:b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID())}])},function(c){if(b("cr:11269")==null)return window.Promise.resolve(void 0);else return b("bs_curry")._1(b("cr:11269").seed,a)}]}function a(a){return h(a).reduce(function(a,c){return a.then(b("bs_curry").__1(c))},window.Promise.resolve(void 0))}f.syncRankingLimited=d;f.syncRankingParams=g;f.$LSE2EEMetadataSyncSyncGroups$requireCond=b("cr:11269");f.writeData=h;f.seedDb=a}),null);
__d("MWLSSchemaEphemeral.bs",["LSDefaultSyncGroups.bs","LSJSInMemoryStorage.bs","LSTransaction.bs","MPWLSDBCreateSchema.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("Promise").resolve(b("LSJSInMemoryStorage.bs").make(b("MPWLSDBCreateSchema.bs").metadata)).then(function(a){return b("LSTransaction.bs").run(a,b("LSDefaultSyncGroups.bs").seedDb,"readWrite").then(function(b){return a})})}f.createDB=a}),null);
__d("GetLsDatabaseForComet.bs",["bs_curry","requireDeferred"],(function(a,b,c,d,e,f){"use strict";c=b("requireDeferred")("MWLSSchemaEphemeral.bs").__setRef("GetLsDatabaseForComet.bs");var g=c.load().then(function(a){return b("bs_curry")._1(a.createDB,void 0)});function a(a){return g}f.$MWLSSchemaEphemeral$Deferred=c;f.get=a}),null);
__d("LSEphemeralDatabaseProvider.bs",["bs_curry","cr:1942626"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_curry")._1(b("cr:1942626").get,void 0)}f.$GetLsDatabase$OR$GetLsDatabaseForComet$requireCond=b("cr:1942626");f.get=a}),null);
__d("isAdsExcelAddinURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)fbaddins\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}f["default"]=a}),66);
__d("isValidAsyncSignalURI",[],(function(a,b,c,d,e,f){var g=new RegExp("((^|\\.)instagram\\.com$)|((^|\\.)wit\\.ai$)|((^|\\.)accountkit\\.com$)","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.includes(a.getProtocol())&&g.test(a.getDomain())}f["default"]=a}),66);
__d("AsyncSignal",["ErrorGuard","Promise","QueryString","Run","TimeSlice","TrackingConfig","URI","ZeroRewrites","getAsyncParams","isAdsExcelAddinURI","isFacebookURI","isMessengerDotComURI","isValidAsyncSignalURI","isWorkplaceDotComURI","memoize","promiseDone"],(function(a,b,c,d,e,f){var g,h,i;function a(a,c){this.data=c||{},this.uri=a.toString(),b("TrackingConfig").domain&&this.uri.charAt(0)=="/"&&(this.uri=b("TrackingConfig").domain+this.uri)}a.prototype.setHandler=function(a){this.handler=a;return this};a.prototype.setTimeout=function(a){this.timeout=a;return this};a.prototype.send=function(){b("TimeSlice").guard(this._send.bind(this),"AsyncSignal send",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype._send=function(){var a=this.handler,c=this.data;c.asyncSignal=(Math.random()*1e4|0)+1;var d=b("ZeroRewrites").rewriteURI(new(g||(g=b("URI")))(this.uri));d=b("isFacebookURI")(d)||b("isMessengerDotComURI")(d)||b("isAdsExcelAddinURI")(d)||b("isWorkplaceDotComURI")(d)||b("isValidAsyncSignalURI")(d);if(d)Object.assign(c,b("getAsyncParams")("POST"));else throw new Error("'"+this.uri+"' is an external URL, you should not send async signals to offsite links.");var e=b("QueryString").appendToUrl(this.uri,c);i||(i=new(b("Promise"))(function(a){b("Run").onAfterLoad(a)}));d=i.then(function(){return new(b("Promise"))(function(a,b){var c=new Image();c.onload=a;c.onerror=c.onabort=b;c.src=e})});if(a){var f=!1,j=b("memoize")(function(){(h||(h=b("ErrorGuard"))).applyWithGuard(a,null,[f])});b("promiseDone")(d.then(function(){f=!0,j()},j));this.timeout&&setTimeout(j,this.timeout)}return this};e.exports=a}),null);
__d("StringTransformations",[],(function(a,b,c,d,e,f){"use strict";a={unicodeEscape:function(a){return a.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(a){a=a.charCodeAt(0).toString(16);return"\\u"+("0000"+a.toUpperCase()).slice(-4)})},unicodeUnescape:function(a){return a.replace(/(\\u[0-9A-Fa-f]{4})/g,function(a){return String.fromCharCode(parseInt(a.slice(2),16))})}};f["default"]=a}),66);
__d("WebStorageMonster",["AsyncRequest","CacheStorage","Event","ExecutionEnvironment","NetworkStatus","StringTransformations","UserActivity","WebStorage","WebStorageMonsterLoggingURI","ifRequired","isEmpty","killswitch","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=5,j=!1;function k(a){var b={};for(var d in a){var e=a.getItem(d),f=c("StringTransformations").unicodeEscape(d);typeof e==="string"&&(b[f]=e.length)}return b}function l(a){var b=c("WebStorage").getLocalStorage();if(!b||a==null||!a.keys)return;o._getLocalStorageKeys().forEach(function(c){a.keys.includes(c)&&b.removeItem(c)})}function m(a){var b=c("WebStorage").getLocalStorage();b&&o._getLocalStorageKeys().forEach(function(c){a.some(function(a){return new RegExp(a).test(c)})||b.removeItem(c)})}function n(a,b){a===void 0&&(a=!1);b===void 0&&(b=h);if(c("UserActivity").isActive(b)){var d=Math.max(h,Math.floor(b/i));c("setTimeoutAcrossTransitions")(function(){n(a,d)},d)}else{o.cleanNow(a);var e=!c("killswitch")("WEB_STORAGE_MONSTER_DONT_RESCHEDULE_ON_RUN");if(e){var f=b*i;c("setTimeoutAcrossTransitions")(function(){n(a,f)},f)}}}var o={registerLogoutForm:function(a,b){c("Event").listen(a,"submit",function(a){o.cleanOnLogout(b)})},schedule:function(a){a===void 0&&(a=!1);if(j||!c("ExecutionEnvironment").isInBrowser)return;j=!0;n(a)},cleanNow:function(a){a===void 0&&(a=!1);var b=Date.now(),d={},e=c("WebStorage").getLocalStorage();e&&(d.local_storage=k(e));e=c("WebStorage").getSessionStorage();e&&(d.session_storage=k(e));e=!c("isEmpty")(d);var f=Date.now();d.logtime=f-b;if(e){var g,h=c("WebStorageMonsterLoggingURI").uri;if(h===null)return null;var i=function(){new(c("AsyncRequest"))(h).setData(d).setHandler(function(b){b=b.getPayload();b&&b.keys&&(b.keys=b.keys.map(c("StringTransformations").unicodeUnescape));a||l(b);c("NetworkStatus").reportSuccess()}).setErrorHandler(function(){c("NetworkStatus").reportError()}).setOption("retries",2).send()};if(c("NetworkStatus").isOnline())i();else{f=function(a){a=a.online;a&&(i(),g.remove())};g=c("NetworkStatus").onChange(f)}}},cleanOnLogout:function(a){c("CacheStorage").disablePersistentWrites();c("ifRequired")("WebAsyncStorage",function(a){a.disablePersistentWrites()});a?m(a):m([]);a=c("WebStorage").getSessionStorage();a&&a.clear();c("ifRequired")("WebAsyncStorage",function(a){a.clear(function(){})})},_getLocalStorageKeys:function(){var a=c("WebStorage").getLocalStorage();return a?Object.keys(a):[]}};a=o;g["default"]=a}),98);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function j(a,b,c){return Math.max(0,((c=c)!=null?c:0)-Math.max(a,(c=b)!=null?c:0))}function k(){return{blocking:babelHelpers["extends"]({},i),nonblocking:babelHelpers["extends"]({},i),"default":babelHelpers["extends"]({},i)}}function l(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function m(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);l(a,j(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function n(a,b,d,e){var f=k();for(var a=c("objectEntries")(a),g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var l=j[0];j=j[1];for(var j=j,n=Array.isArray(j),o=0,j=n?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=j.length)break;p=j[o++]}else{o=j.next();if(o.done)break;p=o.value}p=p;var q=p[0];p=p[1];var r=void 0,s=void 0;switch(p.type){case"async":s=null;r=d;break;case"js":case"css":s=[p.src,p.d===1];r=f;break;default:p,h(0,3721)}m(r[l],q,b,s,e)}}return f}function o(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f=c("objectEntries")(b),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];for(var i=i.entries(),k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];a[j].has(n)?e.ef[j].set(n,m):e.overpredicted[j].set(n,m)}}for(var n=c("objectEntries")(a),m=Array.isArray(n),l=0,n=m?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(m){if(l>=n.length)break;k=n[l++]}else{l=n.next();if(l.done)break;k=l.value}i=k;j=i[0];h=i[1];for(var g=h.entries(),f=Array.isArray(g),a=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(a>=g.length)break;k=g[a++]}else{a=g.next();if(a.done)break;k=a.value}i=k;h=i[0];k=i[1];b[j].has(h)||e.unpredicted[j].set(h,k)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=o(c,b.tierOne);f=g.unpredicted;g={ef:n(g.ef,b.fetchRsrcsStart,k(),e),overpredicted:n(g.overpredicted,b.fetchRsrcsStart,k(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:n(f,d,k(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i=a.components,m=Array.isArray(i),o=0,i=m?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(m){if(o>=i.length)break;p=i[o++]}else{o=i.next();if(o.done)break;p=o.value}p=p;p=c("Bootloader").getComponentTiming(p);var q=p.tierTwoStart,r=p.tierTwoEnd,s=p.tierThreeStart;p=p.tierThreeEnd;e=Math.max(e,j(b,q,r));f=Math.max(f,j(b,b,r));g=Math.max(g,j(b,s,p));h=Math.max(h,j(b,b,p))}q=new Set();r=k();s=n(a.tierOne,b,r,q);p=n(a.tierTwo,b,r,q);o=n(a.tierThree,b,r,q);m=r.blocking.downloaded_count!=0;i=k();var t=d("BootloaderEvents").newResourceMapSet(),u=new Set(),v=[a.tierOne,a.tierTwo,a.tierThree];for(var w=0;w<v.length;w++){var x=v[w];for(var x=c("objectValues")(x),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}A=A;for(var A=A.keys(),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}D=D;u.add(D)}}}D=0;C=0;B=0;for(var A=a.beRequests.values(),z=Array.isArray(A),y=0,A=z?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(z){if(y>=A.length)break;x=A[y++]}else{y=A.next();if(y.done)break;x=y.value}v=x;D+=j(b,b,v.requestStart);C+=v.serverGenTime;B+=v.jsmodsEnd-v.jsmodsStart;l(i[m?"blocking":"nonblocking"],v.responseStart-v.requestStart,[v.uri,!1]);for(var w=c("objectEntries")(v.rsrcs),x=Array.isArray(w),v=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(x){if(v>=w.length)break;E=w[v++]}else{v=w.next();if(v.done)break;E=v.value}E=E;var F=E[0];E=E[1];for(var E=E,G=Array.isArray(E),H=0,E=G?E:E[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=E.length)break;I=E[H++]}else{H=E.next();if(H.done)break;I=H.value}I=I;var J=I[0];I=I[1];u.has(J)||t[F].set(J,I)}}}J=n(t,b,r,q);return{ref:a.ref,components:a.components,timeslice_context:(I=a.timesliceContext)==null?void 0:I.name,start_time:b,err_count:q.size,resources:{t1:s,t2:p,t3:o,be:i,unpredicted:J,async:r},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:D,be_server_gen:C,be_jsmods:B,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);for(var b=c("objectEntries")(b),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=c("objectEntries")(g),i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;var l=k[0];k=k[1];for(var k=c("objectEntries")(k),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];a[h+"_"+l+"_resources_"+p]=Math.round(Number(o))}}}for(var p=c("objectEntries")(d),o=Array.isArray(p),n=0,p=o?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(o){if(n>=p.length)break;m=p[n++]}else{n=p.next();if(n.done)break;m=n.value}k=m;l=k[0];j=k[1];a[l+"_duration"]=Math.round(Number(j))}if(a.payloadStats){for(var i=c("objectEntries")(a.payloadStats),g=Array.isArray(i),h=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(h>=i.length)break;f=i[h++]}else{h=i.next();if(h.done)break;f=h.value}e=f;b=e[0];d=e[1];for(var m=c("objectEntries")(d),k=Array.isArray(m),l=0,m=k?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(k){if(l>=m.length)break;j=m[l++]}else{l=m.next();if(l.done)break;j=l.value}n=j;o=n[0];p=n[1];a[b+"_"+o+"_count"]=Math.round(Number(p))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("AccessibilityWebAssistiveTechTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:AccessibilityWebAssistiveTechLoggerConfig")}),null);